<div class="add-layer-wrapper">

    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-layertype" class="add-layer-label" title="<%= instance.getLocalization('admin').layerTypeDesc %>"><%= instance.getLocalization('admin').layerType %></label>
        </div>
        <div class="add-layer-input-area">
            <div id="add-layer-layertype" class="add-layer-text"><%= instance.getLocalization('admin').layertypes[model.getLayerType()] %></div>
            <input type="hidden" id="add-layer-type" value="<%= model.getLayerType() %>" />
        </div>
    </div>

<!--    <% if(!model.getId()){ %>-->
<!--    <div class="add-layer-record">-->
<!--        <div class="add-layer-label-area">-->
<!--            <label for="add-layer-interface" class="add-layer-label"  title="<%= instance.getLocalization('admin').interfaceAddress %>"><%= instance.getLocalization('admin').interfaceAddress %></label>-->
<!--        </div>-->
<!--        <div class="add-layer-input-area">-->
<!--            <div class="input-controls">-->
<!--                <input type="text" id="add-layer-interface" class="add-layer-input mid"-->
<!--                    placeholder="<%= instance.getLocalization('admin').interfaceAddress %>" -->
<!--                    <% if(model.getWmsUrls) { %>value="<%= model.getWmsUrls().join() %>"<% } %> />-->
<!--                <div class="icon-close mid"></div>-->
<!--            </div>-->
<!--                    <button id="add-layer-wms-button" class="fetch-wms-button"><%= instance.getLocalization('admin').getInfo %></button>-->
<!--        </div>-->
<!--    </div>-->
<!--    <% } %>-->

    <% if(capabilities) { %>
    <div class="add-layer-record capabilities">
        <div class="add-layer-label-area">
            <label class="add-layer-label"><%= instance.getLocalization('admin').capabilitiesLabel %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <%= capabilitiesTemplate({
                    capabilities: capabilities, 
                    capabilitiesTemplate: capabilitiesTemplate, 
                    isSub : false }) %>
            </div>
        </div>
    </div>
    <% } %>


    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-wms-url" class="add-layer-label" title="<%= instance.getLocalization('admin').wfsInterfaceAddress %>"><%= instance.getLocalization('admin').wfsInterfaceAddress %></label>
        </div>
        <div class="add-layer-input-area">
            <textarea rows="3" cols="40" id="add-layer-wms-url" class="add-layer-input long" required><%= model.getLayerUrls().join() %></textarea>
        </div>
    </div>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-interface-version" class="add-layer-label" title="<%= instance.getLocalization('admin').interfaceVersionDesc %>"><%= instance.getLocalization('admin').interfaceVersion %></label>
        </div>
        <div class="add-layer-input-area">
            <select id="add-layer-interface-version">
                <option value="1.1.0" <% if(model.getVersion() == '1.1.0' ) { %>selected<% } %> ><%= instance.getLocalization('admin').wfs1_1_0 %></option>
                <option value="1.0.0" <% if(model.getVersion() == '1.0.0' ) { %>selected<% } %> ><%= instance.getLocalization('admin').wfs1_0_0 %></option>
            </select>
        </div>
    </div>
	
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-download-service-url" class="add-layer-label" title="<%= instance.getLocalization('admin').downloadServiceUrlDesc%>"><%= instance.getLocalization('admin').downloadServiceUrl %></label>
        </div>
        <div class="add-layer-input-area">
            <textarea rows="3" cols="40" id="add-layer-download-service-url" class="add-layer-input long" required><%= model.getDownloadServiceUrl() %></textarea>
        </div>
    </div>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-copyright-info" class="add-layer-label" title="<%= instance.getLocalization('admin').copyrightInfoDesc %>"><%= instance.getLocalization('admin').copyrightInfo %></label>
        </div>
        <div class="add-layer-input-area">
            <input type="text" id="add-layer-copyright-info" class="add-layer-input long" required value="<%= model.getCopyrightInfo() %>" />
        </div>
    </div>

    <% 
        // Names are not necessary for sublayers, BUT we need to show something as the name for admins (!isSubLayer &&)
        if ( model.getNameLanguages) { %>
        <div class="add-layer-grouping" title="<%= instance.getLocalization('admin').layerNameAndDesc %>"><%= instance.getLocalization('admin').layerNameAndDesc %></div>

        <% 
        var names = model.getNameLanguages();
        for (var i = 0; i < names.length; i++) {
            var lang = names[i] %>
            <div class="add-layer-record">
                <div class="add-layer-label-area">
                    <label for="add-layer-<%= lang %>-name" class="add-layer-label" title="<%= instance.getLocalization('admin')[lang] ? instance.getLocalization('admin')[lang].title : lang %>"><%= instance.getLocalization('admin')[lang] ? instance.getLocalization('admin')[lang].lang : lang + ':' %></label>
                </div>
                <div class="add-layer-input-area">
                    <div class="input-controls">
                        <input type="text" id="add-layer-<%= lang %>-name" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin')[lang] ? instance.getLocalization('admin')[lang].placeholder : instance.getLocalization('admin')['generic'].placeholder.replace('{0}', lang) %>" value="<%= model.getName(lang) %>"  />
                        <div class="icon-close"></div>
                    </div>
                    <div class="input-controls">
                        <input type="text" id="add-layer-<%= lang %>-title" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin')[lang] ? instance.getLocalization('admin')[lang].descplaceholder : instance.getLocalization('admin')['generic'].descplaceholder.replace('{0}', lang) %>" value="<%= model.getDescription(lang) %>" />
                        <div class="icon-close"></div>
                    </div>
                </div>
            </div>
        <% } %>
    <% } %>
    
    <% if (!readOnly) { %>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-wfsusername" class="add-layer-label" title="<%= instance.getLocalization('admin').wfsusername %>"><%= instance.getLocalization('admin').wfsusername %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-wfsusername" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').wfsusername %>" value="<%= model.getUsername() %>" />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-wfspassword" class="add-layer-label" title="<%= instance.getLocalization('admin').wfspassword %>"><%= instance.getLocalization('admin').wfspassword %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-wfspassword" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').wfspassword %>" value="<%= model.getPassword() %>" />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-wfsgmlversion" class="add-layer-label" title="<%= instance.getLocalization('admin').wfsgmlversion %>"><%= instance.getLocalization('admin').wfsgmlversion %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-wfsgmlversion" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').wfsgmlversion %>" value="<%= model.getGmlVersion() %>" />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-wfsgmlgeometryproperty" class="add-layer-label" title="<%= instance.getLocalization('admin').wfsgmlgeometryproperty %>"><%= instance.getLocalization('admin').wfsgmlgeometryproperty %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-wfsgmlgeometryproperty" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').wfsgmlgeometryproperty %>" value="<%= model.getGmlGeometryProperty() %>" />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-wfsfeaturenamespaceURI" class="add-layer-label" title="<%= instance.getLocalization('admin').wfsfeaturenamespaceURI %>"><%= instance.getLocalization('admin').wfsfeaturenamespaceURI %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-wfsfeaturenamespaceURI" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').wfsfeaturenamespaceURI %>" value="<%= model.getFeatureNamespaceURI() %>" />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-wfsfeaturenamespace" class="add-layer-label" title="<%= instance.getLocalization('admin').wfsfeaturenamespace %>"><%= instance.getLocalization('admin').wfsfeaturenamespace %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-wfsfeaturenamespace" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').wfsfeaturenamespace %>" value="<%= model.getFeatureNamespace() %>" />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-wfsfeatureelement" class="add-layer-label" title="<%= instance.getLocalization('admin').wfsfeatureelement %>"><%= instance.getLocalization('admin').wfsfeatureelement %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-wfsfeatureelement" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').wfsfeatureelement %>" value="<%= model.getFeatureElement() %>" />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-wfsgeometrynamespaceURI" class="add-layer-label" title="<%= instance.getLocalization('admin').wfsgeometrynamespaceURI %>"><%= instance.getLocalization('admin').wfsgeometrynamespaceURI %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-wfsgeometrynamespaceURI" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').wfsgeometrynamespaceURI %>" value="<%= model.getGeometryNamespaceURI() %>" />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>
    
    <% } %>

    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-datauuid" class="add-layer-label" title="<%= instance.getLocalization('admin').metaInfoUrlDesc %>"><%= instance.getLocalization('admin').metaInfoUrl %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-datauuid" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').metaInfoUrlDesc %>" value="<%= model.getMetadataIdentifier() %>" />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>
    
    <div class="add-layer-record add-layer-separation">
        <div class="add-layer-label-area">
            <label for="add-layer-wms-id" class="add-layer-label" title="<%= instance.getLocalization('admin').layerName %>"><%= instance.getLocalization('admin').layerName %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-wms-id" required class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').layerName %>" value="<%= model.getWmsName() %>" />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>

<!--    <% if(!isSubLayer) { %>-->
<!--    <div class="add-layer-record">-->
<!--        <div class="add-layer-label-area">-->
<!--            <label for="add-layer-inspire-theme" class="add-layer-label"  title="<%= instance.getLocalization('admin').addInspireThemeDesc %>"><%= instance.getLocalization('admin').addInspireTheme %></label>-->
<!--        </div>-->
<!--        <div class="add-layer-input-area">-->
<!--            <div class="input-controls">-->
<!--            <select id="add-layer-inspire-theme">-->
<!--                <% for(var i = 0; inspireThemes != null && i < inspireThemes.length; i++) { %>-->
<!--                <option value="<%= inspireThemes[i].id %>" <% if(model.getInspireName() == inspireThemes[i].name ) { %>selected<% } %> ><%= inspireThemes[i].name %></option>-->
<!--                <% } %>-->
<!--            </select>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <% } %>-->

    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="opacity-slider" class="add-layer-label" title="<%= instance.getLocalization('admin').opacityDesc %>"><%= instance.getLocalization('admin').opacity %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <div class="left-tools opacity-slider-tool">
                    <div class="oskariui admin-opacity-slider layer-opacity">
                        <div class="layout-slider"></div>
                    </div>
                    <div class="opacity-slider" style="display:inline-block">
                        <input type="text" name="opacity-slider" class="opacity-slider opacity" id="opacity-slider" value="<%= model.getOpacity() %>" style="width: 30px;padding: 2px;">%
                    </div>
                </div>
            </div>
        </div>
    </div>

    <% if(model.getStyles().length > 0) { %>
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-style" class="add-layer-label" title="<%= instance.getLocalization('admin').styleDesc %>"><%= instance.getLocalization('admin').style %></label>
        </div>
        <div class="add-layer-input-area">
            <% if(model.getStyles().length > 1) { %>
            <select id="add-layer-style">
                 <% for(var i = 0; i < model.getStyles().length; i++) { %>
                <option value="<%= model.getStyles()[i].getName() %>" 
                    <% if(model.getCurrentStyle().getName() == model.getStyles()[i].getName() ) { %>selected<% } %> ><%= model.getStyles()[i].getTitle() %></option>
                <% } %>
            </select>
            <% } else { %>
                <%= model.getCurrentStyle().getTitle() %>
            <% } %>
        </div>
    </div>
    <% } %>

    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-minscale" class="add-layer-label" title="<%= instance.getLocalization('admin').minScaleDesc %>"><%= instance.getLocalization('admin').minScale %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-minscale" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').minScalePlaceholder %>" value="<%= model.getMinScale() %>" required />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>

    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-maxscale" class="add-layer-label" title="<%= instance.getLocalization('admin').maxScaleDesc %>"><%= instance.getLocalization('admin').maxScale %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-maxscale" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').maxScalePlaceholder %>" value="<%= model.getMaxScale() %>" required />
                <div class="icon-close"></div>
            </div>
        </div>
    </div>

    <!-- div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-srsname" class="add-layer-label" title="<%= instance.getLocalization('admin').srsName %>"><%= instance.getLocalization('admin').srsName %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <input type="text" id="add-layer-srsname" class="add-layer-input long" placeholder="<%= instance.getLocalization('admin').srsNamePlaceholder %>" <% if(model && model.admin) { %>value="<%= model.admin.epsg %>"<% } %> required />
                <div class="icon-close"></div>
            </div>
        </div>
    </div -->

    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label for="add-layer-legendImage" class="add-layer-label" title="<%= instance.getLocalization('admin').legendImageDesc %>"><%= instance.getLocalization('admin').legendImage %></label>
        </div>
        <div class="add-layer-input-area">
            <div class="input-controls">
                <textarea rows="3" cols="50" id="add-layer-legendImage" class="add-layer-input long"><% if(model) { %><%= model.getLegendImage() %><% } %></textarea>
            </div>
        </div>
    </div>
    
    <div class="add-layer-record">
        <div class="add-layer-label-area">
            <label class="add-class-label" title="<%= instance.getLocalization('admin').realtime %>" ><%= instance.getLocalization('admin').realtime %>
            </label>
        </div>
        <div class="add-class-input-area">
            <div class="input-controls">
                <label for="add-layer-realtime"><%= instance.getLocalization('admin').realtime %></label>
                <input
                    type="checkbox"
                    id="add-layer-realtime"
                    class="add-class-input"
                    placeholder="placeholder"
                    <% if (model.isRealtime()) { %>checked<% } %>
                />
            </div>
            <div class="input-controls">
                <label for="add-layer-refreshrate"></label>
                <input
                    type="text"
                    id="add-layer-refreshrate"
                    class="add-layer-input long"
                    placeholder="<%= instance.getLocalization('admin').refreshRate %>"
                    <% if (model.getRefreshRate()) { %>value="<%= model.getRefreshRate() %>"<% } %>
                />
            </div>
        </div>
    </div>

    <% if(!model.getId() && !isSubLayer) { %>
    <!-- roles - only for new layers (not sublayers) -->
    <div class="add-class-record">
        <div class="add-class-label-area">
            <label for="add-layer-view-roles" class="add-class-label" title="<%= instance.getLocalization('admin').roles_for_admin %>"><%= instance.getLocalization('admin').viewingRightsRoles %></label>
        </div>
        <div class="add-class-input-area adjacent">
             <% for(var i = 0; i < roles.length; i++) { %>
             <div class="input-controls">
                <label><%= roles[i].name %>  <input type="checkbox" id="layer-view-roles-<%= roles[i].id %>"  class="add-class-input" placeholder="placeholder"  value="<%= roles[i].id %>" /></label>
             </div>
            <% } %>
        </div>
    </div>
    <% } %>

    <div class="add-layer-send">
        <div class="add-layer-button-area">
            <div class="input-controls">
                <% if(!readOnly) { %>
                <button class="add-layer-btn <%= isSubLayer ? 'admin-add-sublayer-ok' : 'admin-add-layer-ok' %>"
                        title="<%= instance.getLocalization('admin').addNewLayer %>" ><%= instance.getLocalization('add') %></button>
                <% } %>
                <% if(model.getId()) { %>
                <button class="add-layer-btn <%= isSubLayer ? 'admin-remove-sublayer' : 'admin-remove-layer' %>"
                        title="<%= instance.getLocalization('delete') %>"><%= instance.getLocalization('delete') %></button>
                <% } %>
                <button class="add-layer-btn <%= isSubLayer ? 'admin-add-sublayer-cancel' : 'admin-add-layer-cancel' %>"
                        title="<%= instance.getLocalization('cancel') %>"><%= instance.getLocalization('cancel') %></button>
            </div>
        </div>
    </div>

    <br style="clear: both;" />
</div>
