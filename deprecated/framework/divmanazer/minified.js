/*! jQuery UI - v1.9.1 - 2012-11-09
	 * http://jqueryui.com
	 * Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.slider.js, jquery.ui.tooltip.js
	 * Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */

/*
   * Original code (c) 2010 Nick Galbreath
   * http://code.google.com/p/stringencoders/source/browse/#svn/trunk/javascript
   *
   * jQuery port (c) 2010 Carlo Zottmann
   * http://github.com/carlo/jquery-base64
   *
   * Permission is hereby granted, free of charge, to any person
   * obtaining a copy of this software and associated documentation
   * files (the "Software"), to deal in the Software without
   * restriction, including without limitation the rights to use,
   * copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the
   * Software is furnished to do so, subject to the following
   * conditions:
   *
   * The above copyright notice and this permission notice shall be
   * included in all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
   * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
   * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
   * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
   * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
   * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
   * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
   * OTHER DEALINGS IN THE SOFTWARE.
   */

/* ===========================================================
 * bootstrap-tooltip.js v2.0.3 (with popover)
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/**
 * @class Oskari.userinterface.component.ProgressSpinner
 *
 * Adaptation of MIT licensed Spinner
 *
 *  http://fgnass.github.com/spin.js/
 *
 */

/**
             * Copyright (c) 2011 Felix Gnass [fgnass at neteye dot de]
             * Licensed under the MIT license
             */

(function(){function c(){return l}var e=this,t=!1,n=window.console!=null&&window.console.debug,s=function(e){if(!t)return;if(!n)return;window.console.debug(e)},o=function(){this.lang=null,this.localizations={}};o.prototype={setLocalization:function(e,t,n){this.localizations[e]||(this.localizations[e]={}),this.localizations[e][t]=n},setLang:function(e){this.lang=e},getLang:function(){return this.lang},getLocalization:function(e){return this.localizations[this.lang][e]}};var u=new o,a=!1,f="default",l=!0,h=function(){this.packages={},this.protocols={},this.inheritance={},this.aspects={},this.clazzcache={},this.globals={}};h.prototype={purge:function(){},protocol:function(){var e=arguments;if(e.length==0)throw"missing arguments";return this.protocols[e[0]]},pdefsp:function(e){var t=this.clazzcache[e],n=null,r=null,i=null;if(!t){var s=e.split("."),n=s[0],r=s[1],i=s.slice(2).join("."),o=this.packages[r];o||(o={},this.packages[r]=o),t=o[i],this.clazzcache[e]=t}return t},metadata:function(){var e=arguments;if(e.length==0)throw"missing arguments";var t=e[0],n=this.pdefsp(t);if(!n)throw"clazz "+t+" does not exist";return n._metadata},updateMetadata:function(e,t,n,r,i){r._metadata||(r._metadata={}),r._metadata.meta=i;var s=i.protocol;if(s)for(var o=0;o<s.length;o++){var u=s[o];this.protocols[u]||(this.protocols[u]={});var a=e+"."+t+"."+n;this.protocols[u][a]=r}},_super:function(){var e=arguments[0],t=arguments[1],n=this;return function(){return n._._superCategory[e][t].apply(n,arguments)}},define:function(){var e=arguments;if(e.length==0)throw"missing arguments";var t=e[0],n=t.split("."),r=n[0],i=n[1],s=n.slice(2).join("."),o=this.packages[i];o||(o={},this.packages[i]=o);var u=o[s];if(u){e[1]&&(u._constructor=e[1]);var a=e[2],f=u._class.prototype;for(p in a){var l=a[p];f[p]=l}var c=t;a&&(u._category[c]=a);if(e.length>3){var h=e[3].extend;for(var d=0;h&&d<h.length;d++){var v=this.lookup(h[d]);v._composition.subClazz||(v._composition.subClazz={}),v._composition.subClazz[h[d]]=u,u._composition.superClazz=v}this.updateMetadata(r,i,s,u,e[3])}return this.pullDown(u),this.pushDown(u),u}var m=function(){},g={clazzName:t,superClazz:null,subClazz:null};m.prototype={},u={_class:m,_constructor:e[1],_category:{},_composition:g},m.prototype._=u,m.prototype._super=this._super;var a=e[2],f=m.prototype;for(p in a){var l=a[p];f[p]=l}var c=t;a&&(u._category[c]=a),this.inheritance[t]=g,o[s]=u;if(e.length>3){var h=e[3].extend;for(var d=0;h&&d<h.length;d++){var v=this.lookup(h[d]);v._composition.subClazz||(v._composition.subClazz={}),v._composition.subClazz[t]=u,u._composition.superClazz=v}this.updateMetadata(r,i,s,u,e[3])}return this.pullDown(u),this.pushDown(u),u},category:function(){var e=arguments;if(e.length==0)throw"missing arguments";var t=e[0],n=t.split("."),r=n[0],i=n[1],s=n.slice(2).join("."),o=this.packages[i];o||(o={},this.packages[i]=o);var u=o[s];if(!u){var a=function(){},f={clazzName:t,superClazz:null,subClazz:null};a.prototype={},u={_class:a,_constructor:e[1],_category:{},_composition:f},a.prototype._=u,a.prototype._super=this._super,this.inheritance[t]=f,o[s]=u}var l=e[1],c=e[2],h=u._class.prototype;for(p in c){var d=c[p];h[p]=d}return c&&(u._category[l]=c),this.pullDown(u),this.pushDown(u),u},lookup:function(){var e=arguments;if(e.length==0)throw"missing arguments";var t=e[0],n=t.split("."),r=n[0],i=n[1],s=n.slice(2).join("."),o=this.packages[i];o||(o={},this.packages[i]=o);var u=o[s];if(!u){var a=function(){};a.prototype={};var f={clazzName:t,superClazz:null,subClazz:null};u={_class:a,_constructor:e[1],_category:{},_composition:f},this.inheritance[t]=f,o[s]=u}return u},extend:function(){var e=arguments,t=this.lookup(e[1]),n=this.lookup(e[0]);return t._composition.subClazz||(t._composition.subClazz={}),t._composition.subClazz[e[0]]=n,n._composition.superClazz=t,this.pullDown(n),n},composition:function(){var e=arguments[0],t=this.pdefsp(e);return t},pushDown:function(e){if(!e._composition.subClazz)return;for(var t in e._composition.subClazz){var n=e._composition.subClazz[t];this.pullDown(n),this.pushDown(n)}return e},pullDown:function(e){if(!e._composition.superClazz)return;var t=[];t.push(e);var n={},r=e;for(;;){r=r._composition.superClazz;if(!r)break;t.push(r)}var i=e._class.prototype,s=[],o={};for(var u=t.length-1;u>=0;u--){var a=t[u]._composition.clazzName,f=t[u]._constructor;s.push(f);var l={};for(var c in t[u]._category){var h=a+"#"+c,d=t[u]._category[c];for(p in d){var v=d[p];i[p]=v,l[p]=v}}o[a]=l}return e._constructors=s,e._superCategory=o,e},slicer:Array.prototype.slice,create:function(){var e=arguments;if(e.length==0)throw"missing arguments";var t=this.slicer.apply(arguments,[1]),n=e[0],r=this.pdefsp(n);if(!r)throw"clazz "+n+" does not exist";var i=new r._class,s=r._constructors;if(s)for(var o=0;o<s.length;o++)s[o].apply(i,t);else r._constructor.apply(i,t);return i},createWithPdefsp:function(){var e=arguments;if(e.length==0)throw"missing arguments";var t=arguments[1],n=e[0];if(!n)throw"clazz does not exist";var r=new n._class,i=n._constructors;if(i)for(var s=0;s<i.length;s++)i[s].apply(r,t);else n._constructor.apply(r,t);return r},construct:function(){var e=arguments;if(e.length!=2)throw"missing arguments";var t=e[0],n=e[1],r=this.pdefsp(t);if(!r)throw"clazz "+t+" does not exist";var i=new r._class,s=r._constructors;if(s)for(var o=0;o<s.length;o++)s[o].apply(i,instargs);else r._constructor.apply(i,instargs);return i},builder:function(){var e=arguments;if(e.length==0)throw"missing arguments";var t=e[0],n=this.pdefsp(t);if(!n)throw"clazz "+t+" does not exist";return n._builder?n._builder:(n._builder=function(){var e=arguments,t=new n._class,r=n._constructors;if(r)for(var i=0;i<r.length;i++)r[i].apply(t,e);else n._constructor.apply(t,e);return t},n._builder)},builderFromPdefsp:function(){var e=arguments;if(e.length==0)throw"missing arguments";var t=e[0];if(!t)throw"clazz does not exist";return t._builder?t._builder:(t._builder=function(){var e=arguments,n=new t._class,r=t._constructors;if(r)for(var i=0;i<r.length;i++)r[i].apply(n,e);else t._constructor.apply(n,e);return n},t._builder)},global:function(){if(arguments.length==0)return this.globals;var e=arguments[0];return arguments.length==2&&(this.globals[e]=arguments[1]),this.globals[e]}};var d=new h,v=d,m=function(e){this.manager=null;for(p in e)this[p]=e[p]};m.prototype={setState:function(e){return this.state=e,this.manager.postChange(this.bundle,this.instance,this.state),this.state},getState:function(){return this.state}};var g=function(e,t,n){this.config=e,this.callback=t,this.fired=!1,this.info=n};g.prototype={execute:function(e,t,n,r){var i=this;if(i.fired)return;for(p in i.config["Import-Bundle"]){var s=e.stateForBundleSources[p];if(!s||s.state!=1){e.log("trigger not fired due "+p+" for "+r||this.info);return}}i.fired=!0,e.log("posting trigger");var o=this.callback;window.setTimeout(function(){o(e)},0)}},v.define("Oskari.BundleManager",function(){this.serial=0,this.impls={},this.sources={},this.instances={},this.bundles={},this.stateForBundleDefinitions={},this.stateForBundleSources={},this.stateForBundles={},this.stateForBundleInstances={},this.triggers=[],this.loaderStateListeners=[]},{purge:function(){for(var e in this.sources)delete this.sources[e];for(var e in this.stateForBundleDefinitions)delete this.stateForBundleDefinitions[e].loader;for(var e in this.stateForBundleSources)delete this.stateForBundleSources[e].loader},notifyLoaderStateChanged:function(e,t){if(this.loaderStateListeners.length==0)return;for(var n=0;n<this.loaderStateListeners.length;n++){var r=this.loaderStateListeners[n];r(e,t)}},registerLoaderStateListener:function(e){this.loaderStateListeners.push(e)},alert:function(e){s(e)},log:function(e){s(e)},self:function(){return this},install:function(e,t,n,r){var i=this,s=e,o=i.stateForBundleDefinitions[s];o?(o.state=1,i.log("SETTING STATE FOR BUNDLEDEF "+s+" existing state to "+o.state)):(o={state:1},i.stateForBundleDefinitions[s]=o,i.log("SETTING STATE FOR BUNDLEDEF "+s+" NEW state to "+o.state)),o.metadata=r,i.impls[s]=t,i.sources[s]=n;var u=i.stateForBundleSources[s];u&&(u.state==-1?(i.log("triggering loadBundleSources for "+s+" at loadBundleDefinition"),window.setTimeout(function(){i.loadBundleSources(s)},0)):i.log("source state for "+s+" at loadBundleDefinition is "+u.state)),i.postChange(null,null,"bundle_definition_loaded")},installBundleClass:function(e,t){var n=v.metadata(t),r=v.builder(t),i=n.meta.source,s=n.meta.bundle;this.install(e,r,i,s)},installBundlePdefsp:function(e,t){var n=v.builderFromPdefsp(t),r=t._metadata,i={};this.install(e,n,i,r)},impl:function(e){return this.impls[e]},postChange:function(e,t,n){var r=this;r.update(e,t,n);for(bid in r.bundles){var s=r.bundles[bid];s.update(r,e,t,n)}for(i in r.instances){var s=r.instances[i];if(!s)continue;s.update(r,e,t,n)}},createBundle:function(e,t){var n=e,r=this,i=r.stateForBundleDefinitions[n];if(!i)throw"INVALID_STATE: for createBundle / definition not loaded "+e+"/"+t;var s=this.impls[e];if(!s){alert("this.impls["+e+"] is null!");return}var o=s(i);return this.bundles[t]=o,this.stateForBundles[t]={state:!0,bundlImpl:n},this.postChange(o,null,"bundle_created"),o},update:function(e,t,n){var r=this;r.log("update called with info "+n);for(var i=0;i<r.triggers.length;i++){var s=r.triggers[i];s.execute(r)}},bundle:function(e){return this.bundles[e]},destroyBundle:function(e){},uninstall:function(e){var t=this.impls[e];return t},createInstance:function(e){var t=this;if(!t.stateForBundles[e]||!t.stateForBundles[e].state)throw"INVALID_STATE: for createInstance / definition not loaded "+e;var n=""+ ++this.serial,r=this.bundles[e],i=r.create();return i.mediator=new m({bundleId:e,instanceid:n,state:"initial",bundle:r,instance:i,manager:this,clazz:v,requestMediator:{}}),this.instances[n]=i,this.stateForBundleInstances[n]={state:!0,bundleid:e},this.postChange(r,i,"instance_created"),i},instance:function(e){return this.instances[e]},destroyInstance:function(e){var t=this.instances[e],n=t.mediator;return n.bundle=null,n.manager=null,n.clazz=null,t.mediator=null,this.instances[e]=null,t=null,t},on:function(e,t,n){this.triggers.push(new g(e,t,n))}}),v.define("Oskari.BundleFacade",function(e){this.manager=e,this.bundles={},this.bundleInstances={},this.appSetup=null,this.bundlePath="",this.appConfig={}},{getBundleInstanceByName:function(e){var t=this;return t.bundleInstances[e]},getBundleInstanceConfigurationByName:function(e){var t=this;return t.appConfig[e]},setConfiguration:function(e){this.appConfig=e},getConfiguration:function(){return this.appConfig}});var y=v.create("Oskari.BundleManager");y.clazz=v;var b=v.create("Oskari.BundleFacade",y),w=v.global;v.define("Oskari.DomManager",function(e){this.$=e},{getEl:function(e){return this.$(e)},getElForPart:function(e){throw"N/A"},setElForPart:function(e,t){throw"N/A"},setElParts:function(e){throw"N/A"},getElParts:function(){throw"N/A"},pushLayout:function(e){throw"N/A"},popLayout:function(e){throw"N/A"},getLayout:function(){throw"N/A"}});var E=v.create("Oskari.DomManager"),S=0,x=0,T=0;v.define("Oskari.ClazzWrapper",function(e,t){this.cs=v,this.clazzInfo=e,this.clazzName=t},{slicer:Array.prototype.slice,category:function(e,t){var n=v.category(this.clazzName,t||["__",++x].join("_"),e);return this.clazzInfo=n,this},methods:function(e,t){var n=v.category(this.clazzName,t||["__",++x].join("_"),e);return this.clazzInfo=n,this},extend:function(e){var t=typeof e;if(t==="string"){var n=v.extend(this.clazzName,e.length?e:[e]);this.clazzInfo=n}else{if(t!=="object"||!e.length){var r=Oskari.cls();return r.extend(this.clazzName),e&&r.category(e),r}var n=v.extend(this.clazzName,e.length?e:[e]);this.clazzInfo=n}return this},create:function(){return v.createWithPdefsp(this.clazzInfo,arguments)},name:function(){return this.clazzName},metadata:function(){return v.metadata(this.clazzName)},events:function(e){var t=this;return t.category({eventHandlers:e,onEvent:function(e){var t=this.eventHandlers[e.getName()];if(!t)return;return t.apply(this,[e])}},"___events"),t},requests:function(e){var t=this;return t.category({requestHandlers:e,onRequest:function(e){var t=this.requestHandlers[e.getName()];if(!t)return;return t.apply(this,[e])}},"___requests"),t},builder:function(){return v.builderFromPdefsp(this.clazzInfo)}});var N={VERSION:"2.0.0",bundle_manager:y,bundle_facade:b,bundle_locale:u,app:b,clazz:v,$:function(){return w.apply(v,arguments)},run:function(e){e()},setLoaderMode:function(e){f=e},getLoaderMode:function(){return f},setDebugMode:function(e){t=e},setSupportBundleAsync:function(e){a=e},getSupportBundleAsync:function(){return a},setBundleBasePath:function(e){basePathForBundles=e},getBundleBasePath:function(){return basePathForBundles},setPreloaded:function(e){l=e},getPreloaded:function(){return l},registerLocalization:function(e){if(!e.length)return u.setLocalization(e.lang,e.key,e.value);for(var t=0;t<e.length;t++){var n=e[t];u.setLocalization(n.lang,n.key,n.value)}},getLocalization:function(e){return u.getLocalization(e)},getLang:function(){return u.getLang()},setLang:function(e){return u.setLang(e)},purge:function(){y.purge(),v.purge("Oskari")},getDomManager:function(){return E},setDomManager:function(e){E=e},getSandbox:function(e){return w.apply(v,[e||"sandbox"])},setSandbox:function(e,t){return w.apply(v,[e||"sandbox",t])},registerMimeTypeToPlugin:function(e,t){blMimeTypeToPlugin[e]=t},cls:function(e,t,n,r){var i=undefined;return e==undefined?e=["Oskari","_",++S].join("."):i=v.lookup(e),i&&i._constructor&&!t||(i=v.define(e,t||function(){},n,r||{})),v.create("Oskari.ClazzWrapper",i,e)},sandbox:function(e){var t={sandbox:w.apply(v,[e||"sandbox"])};return t.on=function(e){var t=this;if(e.eventHandlers)for(p in e.eventHandlers)t.sandbox.registerForEventByName(e,p);if(e.requestHandlers)for(r in e.requestHandlers)t.sandbox.addRequestHandler(r,reqHandlers[r])},t.off=function(e){if(e.eventHandlers)for(p in e.eventHandlers)me.sandbox.unregisterFromEventByName(e,p);if(e.requestHandlers)for(r in e.requestHandlers)me.sandbox.removeRequestHandler(r,reqHandlers[r])},t.slicer=Array.prototype.slice,t.notify=function(e){var t=this,n=t.sandbox,r=t.sandbox.getEventBuilder(e),i=t.slicer.apply(arguments,[1]),s=eventBuilder.apply(eventBuilder,i);return n.notifyAll(s)},t},loc:function(){return N.registerLocalization.apply(N,arguments)},setConfiguration:function(e){return b.setConfiguration(e)},getConfiguration:function(){return b.getConfiguration()}};N.eventCls=function(e,t,n){var r=["Oskari","event","registry",e].join("."),i=N.cls(r,t,n,{protocol:["Oskari.mapframework.event.Event"]});return i.category({getName:function(){return e}},"___event"),i.eventName=e,i},N.requestCls=function(e,t,n){var r=["Oskari","request","registry",e].join("."),i=N.cls(r,t,n,{protocol:["Oskari.mapframework.request.Request"]});return i.category({getName:function(){return e}},"___request"),i.requestName=e,i},N._baseClassFor={bundle:"Oskari.mapframework.bundle.extension.ExtensionBundle"},N.bundleCls=function(e,t){e||(e=["__",++T].join("_"));var n=N.cls(t,function(){},{update:function(){}},{protocol:["Oskari.bundle.Bundle",this._baseClassFor.bundle],manifest:{"Bundle-Identifier":e}});return y.installBundlePdefsp(e,n.clazzInfo),n.___bundleIdentifier=e,n.loc=function(e){return e.key=this.___bundleIdentifier,N.registerLocalization(e),n},n.start=function(e){var t=this.___bundleIdentifier;if(!b.bundles[t]){var n=y.createBundle(t,t);b.bundles[t]=n}var r=y.createInstance(t);b.bundleInstances[t]=r;var i=b.getBundleInstanceConfigurationByName(t);if(i)for(ip in i)r[ip]=i[ip];return r.start(),r},n.stop=function(){var e=this.___bundleIdentifier,t=b.bundleInstances[e];return t.stop()},n},w.apply(v,["Oskari",N]),e.Oskari=N,define("src/oskari/oskari",["exports"],function(e){return e.Oskari=N,N})})(),define("src/framework/divmanazer/extension/BaseExtension",["src/oskari/oskari"],function(e){var t=e.cls("Oskari.BaseExtension",function(e,t){this.sandbox=null,this.plugins={},this._localization=t,this.conf={name:e}},{getTitle:function(){return this.getLocalization("title")},getDescription:function(){return this.getLocalization("desc")},getSandbox:function(){return this.sandbox},update:function(){},setLocalization:function(e){this._localization=e},getLocalization:function(t){return this._localization||(this._localization=e.getLocalization(this.getName())),t?this._localization[t]:this._localization},start:function(){var t=this,n=this.conf,r=(n?n.sandbox:null)||"sandbox",i=e.getSandbox(r);t.sandbox=i,i.register(this),n&&n.stateful===!0&&i.registerAsStateful(this.mediator.bundleId,this)},stop:function(){var e=this.sandbox;e.unregisterStateful(this.mediator.bundleId),e.unregister(this),this.sandbox=null,this.started=!1},startExtension:function(){var e=this,t=e.sandbox;e.startPlugin();for(p in e.requestHandlers)t.addRequestHandler(p,this);for(p in e.eventHandlers)t.registerForEventByName(e,p)},startPlugin:function(){console.log("BASECLASS startPlugin called ",this)},stopPlugin:function(){console.log("BASECLASS stopPlugin called ",this)},stopExtension:function(){var e=this,t=e.sandbox;for(p in e.eventHandlers)t.unregisterFromEventByName(e,p);for(p in e.requestHandlers)t.removeRequestHandler(p,this);this.stopPlugin()},getPlugins:function(){return this.plugins},init:function(){return null},getName:function(){return this.conf.name},getConfiguration:function(){return this.conf},eventHandlers:{},requestHandlers:{},onEvent:function(e){var t=this,n=t.eventHandlers[e.getName()];if(!n)return;return n.apply(this,[e])},handleRequest:function(e,t){return this.onRequest(t)},onRequest:function(e){var t=this,n=t.requestHandlers[e.getName()];if(!n)return;return n.apply(this,[e])},getLang:function(){return e.getLang()},slicer:Array.prototype.slice,notify:function(e,t){return this.getSandbox().notifyAll(e,t)},request:function(e){return this.getSandbox().request(this,e)},issue:function(){var e=arguments[0],t=this.slicer.apply(arguments,[1]),n=this.getSandbox().getRequestBuilder(e),r=n.apply(n,t);return this.getSandbox().request(this.getExtension(),r)},notify:function(){var e=arguments[0],t=this.slicer.apply(arguments,[1]),n=this.getSandbox().getEventBuilder(e),r=n.apply(n,t);return this.getSandbox().notifyAll(r)}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension","Oskari.mapframework.core.RequestHandler"]});return t}),define("src/framework/divmanazer/extension/EnhancedExtension",["./BaseExtension"],function(e){var t=e.extend({getName:function(){return"Oskari.userinterface.extension.EnhancedExtension"},getTile:function(){return this.plugins["Oskari.userinterface.Tile"]},setTile:function(e){this.plugins["Oskari.userinterface.Tile"]=e},setDefaultTile:function(e){var t=Oskari.cls().extend("Oskari.userinterface.extension.DefaultTile"),n=t.create(this,{title:e||""});return this.plugins["Oskari.userinterface.Tile"]=n,n},getFlyout:function(){return this.plugins["Oskari.userinterface.Flyout"]},setFlyout:function(e){this.plugins["Oskari.userinterface.Flyout"]=e},start:function(){var e=this,t=this.conf,n=(t?t.sandbox:null)||"sandbox",r=Oskari.getSandbox(n);e.sandbox=r,r.register(this),t&&t.stateful===!0&&r.registerAsStateful(this.mediator.bundleId,this);var i=r.getRequestBuilder("userinterface.AddExtensionRequest")(this);r.request(this,i)},stop:function(){var e=this.sandbox,t=e.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);e.request(this,t),e.unregisterStateful(this.mediator.bundleId),e.unregister(this),this.sandbox=null,this.started=!1}});return t}),define("libraries/jquery/jquery-ui-1.9.1.custom-modified",["jquery"],function(e){(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=parseFloat(t[1],10)===6}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(e),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:u.widgetEventPrefix||t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){var r,i=this;n?(t=r=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element,r=this.widget()),e.each(n,function(n,s){function o(){if(i.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=n.match(/^(\w+)\s*(.*)$/),a=u[1]+i.eventNamespace,f=u[2];f?r.delegate(f,a,o):t.bind(a,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(e),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(e),function(t,n){function p(e,t,n){return[parseInt(e[0],10)*(c.test(e[0])?t/100:1),parseInt(e[1],10)*(c.test(e[1])?n/100:1)]}function d(e,n){return parseInt(t.css(e,n),10)||0}t.ui=t.ui||{};var r,i=Math.max,s=Math.abs,o=Math.round,u=/left|center|right/,a=/top|center|bottom/,f=/[\+\-]\d+%?/,l=/^\w+/,c=/%$/,h=t.fn.position;t.position={scrollbarWidth:function(){if(r!==n)return r;var e,i,s=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),e=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=s[0].clientWidth),s.remove(),r=e-i},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),r=e.isWindow?"":e.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&e.width<e.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&e.height<e.element[0].scrollHeight;return{width:i?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),r=t.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return h.apply(this,arguments);e=t.extend({},e);var n,r,c,v,m,g=t(e.of),y=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(y),w=g[0],E=(e.collision||"flip").split(" "),S={};return w.nodeType===9?(r=g.width(),c=g.height(),v={top:0,left:0}):t.isWindow(w)?(r=g.width(),c=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(e.at="left top",r=c=0,v={top:w.pageY,left:w.pageX}):(r=g.outerWidth(),c=g.outerHeight(),v=g.offset()),m=t.extend({},v),t.each(["my","at"],function(){var t=(e[this]||"").split(" "),n,r;t.length===1&&(t=u.test(t[0])?t.concat(["center"]):a.test(t[0])?["center"].concat(t):["center","center"]),t[0]=u.test(t[0])?t[0]:"center",t[1]=a.test(t[1])?t[1]:"center",n=f.exec(t[0]),r=f.exec(t[1]),S[this]=[n?n[0]:0,r?r[0]:0],e[this]=[l.exec(t[0])[0],l.exec(t[1])[0]]}),E.length===1&&(E[1]=E[0]),e.at[0]==="right"?m.left+=r:e.at[0]==="center"&&(m.left+=r/2),e.at[1]==="bottom"?m.top+=c:e.at[1]==="center"&&(m.top+=c/2),n=p(S.at,r,c),m.left+=n[0],m.top+=n[1],this.each(function(){var u,a,f=t(this),l=f.outerWidth(),h=f.outerHeight(),w=d(this,"marginLeft"),x=d(this,"marginTop"),T=l+w+d(this,"marginRight")+b.width,N=h+x+d(this,"marginBottom")+b.height,C=t.extend({},m),k=p(S.my,f.outerWidth(),f.outerHeight());e.my[0]==="right"?C.left-=l:e.my[0]==="center"&&(C.left-=l/2),e.my[1]==="bottom"?C.top-=h:e.my[1]==="center"&&(C.top-=h/2),C.left+=k[0],C.top+=k[1],t.support.offsetFractions||(C.left=o(C.left),C.top=o(C.top)),u={marginLeft:w,marginTop:x},t.each(["left","top"],function(i,s){t.ui.position[E[i]]&&t.ui.position[E[i]][s](C,{targetWidth:r,targetHeight:c,elemWidth:l,elemHeight:h,collisionPosition:u,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:e.my,at:e.at,within:y,elem:f})}),t.fn.bgiframe&&f.bgiframe(),e.using&&(a=function(t){var n=v.left-C.left,o=n+r-l,u=v.top-C.top,a=u+c-h,p={target:{element:g,left:v.left,top:v.top,width:r,height:c},element:{element:f,left:C.left,top:C.top,width:l,height:h},horizontal:o<0?"left":n>0?"right":"center",vertical:a<0?"top":u>0?"bottom":"middle"};r<l&&s(n+o)<r&&(p.horizontal="center"),c<h&&s(u+a)<c&&(p.vertical="middle"),i(s(n),s(o))>i(s(u),s(a))?p.important="horizontal":p.important="vertical",e.using.call(this,t,p)}),f.offset(t.extend(C,{using:a}))})},t.ui.position={fit:{left:function(e,t){var n=t.within,r=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=r-o,a=o+t.collisionWidth-s-r,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-r,e.left+=u-f):a>0&&u<=0?e.left=r:u>a?e.left=r+s-t.collisionWidth:e.left=r:u>0?e.left+=u:a>0?e.left-=a:e.left=i(e.left-o,e.left)},top:function(e,t){var n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=r-o,a=o+t.collisionHeight-s-r,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-r,e.top+=u-f):a>0&&u<=0?e.top=r:u>a?e.top=r+s-t.collisionHeight:e.top=r:u>0?e.top+=u:a>0?e.top-=a:e.top=i(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,i=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-i-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-i-r;if(p<0||p<s(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||s(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,i=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-i-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-i-r,e.top+c+h+p>a&&(v<0||v<s(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||s(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");e=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)e.style[s]=r[s];e.appendChild(u),n=o||document.documentElement,n.insertBefore(e,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=t(u).offset().left,t.support.offsetFractions=i>10&&i<11,e.innerHTML="",n.removeChild(e)}(),t.uiBackCompat!==!1&&function(e){var t=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return t.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),t.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:n}))}}(e)}(e),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(e),function(e,t){e.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(e),function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()}).mouseleave(function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")}).insertAfter(n),n.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,n=this.options,r={},i=this,s=this.originalMousePosition,o=this.axis,u=e.pageX-s.left||0,a=e.pageY-s.top||0,f=this._change[o];if(!f)return!1;var l=f.apply(this,[e,u,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey)l=this._updateRatio(l,e);return l=this._respectSize(l,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.ui.ie6?1:0,i=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-r+"px",top:this.elementOffset.top-r+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(e),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var a=o;o=i,i=a}if(s>u){var a=u;u=s,s=a}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!a||a.element==n.element[0])return;var f=!1;r.tolerance=="touch"?f=!(a.left>o||a.right<i||a.top>u||a.bottom<s):r.tolerance=="fit"&&(f=a.left>i&&a.right<o&&a.top>s&&a.bottom<u),f?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,n._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&((t.metaKey||t.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),n._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&!t.metaKey&&!t.ctrlKey&&!a.startselected&&(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,n._trigger("unselecting",t,{unselecting:a.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(e),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==r)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(s.instance!==this.currentContainer)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--){var o=e(i[s]);for(var u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}}for(var s=r.length-1;s>=0;s--){var f=r[s][1],l=r[s][0];for(var u=0,c=l.length;u<c;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){if(r&&!n.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else{var s=1e4,o=null,u=this.containers[r].floating?"left":"top",a=this.containers[r].floating?"width":"height",f=this.positionAbs[u]+this.offset.click[u];for(var l=this.items.length-1;l>=0;l--){if(!e.contains(this.containers[r].element[0],this.items[l].item[0]))continue;if(this.items[l].item[0]==this.currentItem[0])continue;var c=this.items[l].item.offset()[u],h=!1;Math.abs(c-f)>Math.abs(c+this.items[l][a]-f)&&(h=!0,c+=this.items[l][a]),Math.abs(c-f)<s&&(s=Math.abs(c-f),o=this.items[l],this.direction=h?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(e),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,r,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&i.values.length!==2&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(i.range==="min"||i.range==="max"?" ui-slider-range-"+i.range:""))),r=i.values&&i.values.length||1;for(t=s.length;t<r;t++)u.push(o);this.handles=s.add(e(u.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){i.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));i>n&&(i=n,s=e(this),o=t)}),c.range===!0&&this.values(1)===c.min&&(o+=1,s=e(this.handles[o])),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))}})}(e),function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.9.1",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length)return;if(this.options.track&&r.data("ui-tooltip-id")){this._find(r).position(e.extend({of:r},this.options.position)),this._off(this.document,"mousemove");return}r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t;e(this).data("tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),this.title&&(e(this).uniqueId(),n.parents[this.id]={element:this,title:this.title},this.title="")}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("tooltip-open"))return;i._delay(function(){this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.originalEvent.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(e,t){t.element.title=t.title,delete n.parents[e]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),e.fn.bgiframe&&i.bgiframe(),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})}(e)}),define("libraries/jquery/plugins/jquery.base64-modified",["jquery"],function(e){e.base64=function(e){function i(e,t){var r=n.indexOf(e.charAt(t));if(r===-1)throw"Cannot decode base64";return r}function s(e){var n=0,r,s,o=e.length,u=[];e=String(e);if(o===0)return e;if(o%4!==0)throw"Cannot decode base64";e.charAt(o-1)===t&&(n=1,e.charAt(o-2)===t&&(n=2),o-=4);for(r=0;r<o;r+=4)s=i(e,r)<<18|i(e,r+1)<<12|i(e,r+2)<<6|i(e,r+3),u.push(String.fromCharCode(s>>16,s>>8&255,s&255));switch(n){case 1:s=i(e,r)<<18|i(e,r+1)<<12|i(e,r+2)<<6,u.push(String.fromCharCode(s>>16,s>>8&255));break;case 2:s=i(e,r)<<18|i(e,r+1)<<12,u.push(String.fromCharCode(s>>16))}return u.join("")}function o(e,t){var n=e.charCodeAt(t);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n}function u(e){if(arguments.length!==1)throw"SyntaxError: exactly one argument required";e=String(e);var r,i,s=[],u=e.length-e.length%3;if(e.length===0)return e;for(r=0;r<u;r+=3)i=o(e,r)<<16|o(e,r+1)<<8|o(e,r+2),s.push(n.charAt(i>>18)),s.push(n.charAt(i>>12&63)),s.push(n.charAt(i>>6&63)),s.push(n.charAt(i&63));switch(e.length-u){case 1:i=o(e,r)<<16,s.push(n.charAt(i>>18)+n.charAt(i>>12&63)+t+t);break;case 2:i=o(e,r)<<16|o(e,r+1)<<8,s.push(n.charAt(i>>18)+n.charAt(i>>12&63)+n.charAt(i>>6&63)+t)}return s.join("")}var t="=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="1.0";return{decode:s,encode:u,VERSION:r}}(e)}),define("normalize",["require","module"],function(e,t){function o(e,t,n){if(e.indexOf("data:")===0)return e;e=r(e);if(e.match(/^\//)||e.match(s))return e;var i=n.match(s),o=t.match(s);return o&&(!i||i[1]!=o[1]||i[2]!=o[2])?u(e,t):a(u(e,t),n)}function u(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));var n=t.split("/"),r=e.split("/");n.pop();while(curPart=r.shift())curPart==".."?n.pop():n.push(curPart);return n.join("/")}function a(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var n=/([^:])\/+/g,r=function(e){return e.replace(n,"$1/")},s=/[^\:\/]*:\/\/([^\/])*/,f=function(e,t,n,i){t=r(t),n=r(n);var s=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,u,a,e;while(u=s.exec(e)){a=u[3]||u[2]||u[5]||u[6]||u[4];var f;i&&a.substr(0,1)=="/"?f=i+a:f=o(a,t,n);var l=u[5]||u[6]?1:0;e=e.substr(0,s.lastIndex-a.length-l-1)+f+e.substr(s.lastIndex-l-1),s.lastIndex=s.lastIndex+(f.length-a.length)}return e};return f.convertURIBase=o,f}),define("css",["./normalize"],function(e){function n(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var t=0;if(typeof window=="undefined")return{load:function(e,t,n){n()}};var r=!1,i=document.getElementsByTagName("head")[0],s=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/),o=!1;!s||(s[1]||s[7]?(o=parseInt(s[1])<6||parseInt(s[7])<=9,s="trident"):s[2]?(o=!0,s="webkit"):s[3]||(s[4]?(o=parseInt(s[4])<18,s="gecko"):r&&alert("Engine detection failed")));var u={},a=/^\/|([^\:\/]*:)/;u.pluginBuilder="./css-builder";var f=[],l={},c=[];u.addBuffer=function(e){if(n(f,e)!=-1)return;if(n(c,e)!=-1)return;f.push(e),c.push(e)},u.setBuffer=function(t,n){var r=window.location.pathname.split("/");r.pop(),r=r.join("/")+"/";var i=require.toUrl("base_url").split("/");i.pop();var s=i.join("/")+"/";s=e.convertURIBase(s,r,"/"),s.match(a)||(s="/"+s),s.substr(s.length-1,1)!="/"&&(s+="/"),u.inject(e(t,s,r));for(var o=0;o<f.length;o++)(n&&f[o].substr(f[o].length-5,5)==".less"||!n&&f[o].substr(f[o].length-4,4)==".css")&&(function(e){l[e]=l[e]||!0,setTimeout(function(){typeof l[e]=="function"&&l[e](),delete l[e]},7)}(f[o]),f.splice(o--,1))},u.attachBuffer=function(e,t){for(var r=0;r<f.length;r++)if(f[r]==e)return l[e]=t,!0;if(l[e]===!0)return l[e]=t,!0;if(n(c,e)!=-1)return t(),!0};var h=function(e,t){setTimeout(function(){for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n];if(r.href==e.href)return t()}h(e,t)},10)},p=function(e,t){setTimeout(function(){try{return e.sheet.cssRules,t()}catch(n){}p(e,t)},10)};if(s=="trident"&&o)var d=[],v=[],m=0,g=function(e,t){var n;v.push({url:e,cb:t}),n=d.shift(),!n&&m++<31&&(n=document.createElement("style"),i.appendChild(n)),n&&y(n)},y=function(e){var t=v.shift();if(!t){e.onload=w,d.push(e);return}e.onload=function(){t.cb(t.ss),y(e)};try{var n=e.styleSheet;t.ss=n.imports[n.addImport(t.url)]}catch(r){alert("Got Error:"+r)}};var b=function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t},w=function(){};u.linkLoad=function(e,t){var n=setTimeout(function(){r&&alert("timeout"),t()},A*1e3-100),u=function(){clearTimeout(n),a&&(a.onload=w),setTimeout(t,7)};if(!o){var a=b(e);a.onload=u,i.appendChild(a)}else if(s=="webkit"){var a=b(e);h(a,u),i.appendChild(a)}else if(s=="gecko"){var f=document.createElement("style");f.textContent='@import "'+e+'"',p(f,u),i.appendChild(f)}else s=="trident"&&g(e,u)};var E=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],S={},x=function(e,t,n){if(S[e]){t(S[e]);return}var r,i,s;if(typeof XMLHttpRequest!="undefined")r=new XMLHttpRequest;else if(typeof ActiveXObject!="undefined")for(i=0;i<3;i+=1){s=E[i];try{r=new ActiveXObject(s)}catch(o){}if(r){E=[s];break}}r.open("GET",e,requirejs.inlineRequire?!1:!0),r.onreadystatechange=function(i){var s,o;r.readyState===4&&(s=r.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=r,n(o)):(S[e]=r.responseText,t(r.responseText)))},r.send(null)},T=0,N;u.inject=function(e){T<31&&(N=document.createElement("style"),N.type="text/css",i.appendChild(N),T++),N.styleSheet?N.styleSheet.cssText+=e:N.appendChild(document.createTextNode(e))};var C=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g,k=window.location.pathname.split("/");k.pop(),k=k.join("/")+"/";var L=function(t,n,r){t.match(a)||(t="/"+e.convertURIBase(t,k,"/")),x(t,function(i){i=e(i,t,k);var s=[],o=[],u=[],a;while(a=C.exec(i)){var f=a[4]||a[5]||a[7]||a[8]||a[9];s.push(f),o.push(C.lastIndex-a[0].length),u.push(a[0].length)}var l=0;for(var c=0;c<s.length;c++)(function(e){L(s[e],function(t){i=i.substr(0,o[e])+t+i.substr(o[e]+u[e]);var r=t.length-u[e];for(var a=e+1;a<s.length;a++)o[a]+=r;l++,l==s.length&&n(i)},r)})(c);s.length==0&&n(i)},r)};u.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)};var A,O=!1;return u.load=function(e,t,n,i,s){A=A||i.waitSeconds||7;var a=e+(s?".less":".css");if(u.attachBuffer(a,n))return;var f=t.toUrl(a);!O&&r&&(alert(o?"hacking links":"not hacking"),O=!0),s?L(f,function(e){s&&(e=s(e,function(e){u.inject(e),setTimeout(n,7)}))}):u.linkLoad(f,n)},r&&(u.inspect=function(){if(stylesheet.styleSheet)return stylesheet.styleSheet.cssText;if(stylesheet.innerHTML)return stylesheet.innerHTML}),u}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/oskariui/css/jquery-ui-1.9.1.custom.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/oskariui/bootstrap-grid.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,Oskari.clazz.define("Oskari.framework.bundle.oskariui.DomManager",function(e,t){this.$=e,this.partsMap=t||{},this.layout=null,this.layouts=[]},{getEl:function(e){return this.$(e)},getElForPart:function(e){return this.$(this.partsMap[e])},setElForPart:function(e,t){this.partsMap[e]=this.$(t)},setElParts:function(e){this.partsMap=e},getElParts:function(){return this.partsMap},pushLayout:function(e){this.layout&&this.layout.removeLayout(this),this.layout=e,this.layouts.push(e),e.applyLayout(this)},popLayout:function(){var e=this.layouts.pop();e&&e.removeLayout(this);if(this.layouts.length===0){this.layout=null;return}e=this.layouts[this.layouts.length-1],this.layout=e,e.applyLayout(this)},getLayout:function(){return this.layout}},{protocol:["Oskari.dom.DomManager"]}),define("bundles/framework/bundle/oskariui/DomManager",function(){}),Oskari.clazz.define("Oskari.framework.bundle.oskariui.Layout",function(){},{applyLayout:function(e){},removeLayout:function(e){}},{protocol:["Oskari.dom.Layout"]}),define("bundles/framework/bundle/oskariui/Layout",function(){}),define("src/framework/oskariui/module",["src/oskari/oskari","jquery","libraries/jquery/jquery-ui-1.9.1.custom-modified","libraries/jquery/plugins/jquery.base64-modified","css!resources/framework/bundle/oskariui/css/jquery-ui-1.9.1.custom","css!resources/framework/bundle/oskariui/bootstrap-grid","bundles/framework/bundle/oskariui/DomManager","bundles/framework/bundle/oskariui/Layout"],function(e,t){return e.bundleCls("oskariui").category({create:function(){return this},update:function(e,t,n,r){},start:function(){var n=this.conf.partsMap||{},r=e.clazz.create("Oskari.framework.bundle.oskariui.DomManager",t,n);e.setDomManager(r)},stop:function(){}})}),define("src/framework/divmanazer/instance",["jquery"],function(e){Oskari.clazz.define("Oskari.userinterface.bundle.ui.UserInterfaceBundleInstance",function(){this.sandbox=null,this.requestHandlers={},this.extensions=[],this.extensionsByName={},this.compiledTemplates={},this.flyoutContainer=null,this.tileContainer=null,this.flyoutZIndexBase=1100,this.menubarContainerId="#menubar"},{getName:function(){return"userinterface.DivManazer"},init:function(e){},getExtensionByName:function(e){return this.extensionsByName[e]},getSandbox:function(){return this.sandbox},start:function(){this.compileTemplates();var t=this.conf,n=(t?t.sandbox:null)||"sandbox",r=Oskari.getSandbox(n),i,s,o,u,a;this.sandbox=r,this.flyoutContainer=e(document.body),this.tileContainer=e(this.menubarContainerId),this.tileContainer.addClass("oskari-tile-container"),this.sandbox.register(this),this.requestHandlers.add=Oskari.clazz.create("Oskari.userinterface.bundle.ui.request.AddExtensionRequestHandler",this),this.requestHandlers.remove=Oskari.clazz.create("Oskari.userinterface.bundle.ui.request.RemoveExtensionRequestHandler",this),this.requestHandlers.update=Oskari.clazz.create("Oskari.userinterface.bundle.ui.request.UpdateExtensionRequestHandler",this),r.addRequestHandler("userinterface.AddExtensionRequest",this.requestHandlers.add),r.addRequestHandler("userinterface.RemoveExtensionRequest",this.requestHandlers.remove),r.addRequestHandler("userinterface.UpdateExtensionRequest",this.requestHandlers.update),this.requestHandlers.modal=Oskari.clazz.create("Oskari.userinterface.bundle.ui.request.ModalDialogRequestHandler",this),r.addRequestHandler("userinterface.ModalDialogRequest",this.requestHandlers.modal);if(e.browser.msie&&e.browser.version<"9.0"){i=this.compiledTemplates["Oskari.userinterface.Flyout"].children(".oskari-flyoutcontentcontainer"),s=this.flyoutContainer.height(),o=this.ieFixClasses;for(u=0;u<o.length;u+=1){a=o[u];if(s>=a.min&&s<=a.max){i.addClass(a.cls);break}}}},update:function(){},stop:function(){sandbox.removeRequestHandler("userinterface.UpdateExtensionRequest",this.requestHandlers.update),sandbox.removeRequestHandler("userinterface.RemoveExtensionRequest",this.requestHandlers.remove),sandbox.removeRequestHandler("userinterface.AddExtensionRequest",this.requestHandlers.add),sandbox.removeRequestHandler("userinterface.ModalDialogRequest",this.requestHandlers.modal),this.sandbox.unregister(this),this.started=!1},templates:{"Oskari.userinterface.Tile":'<div class="oskari-tile oskari-tile-closed"><div class="oskari-tile-title"></div><div class="oskari-tile-status"></div></div>',"Oskari.userinterface.Flyout":'<div class="oskari-flyout oskari-closed"><div class="oskari-flyouttoolbar"><div class="oskari-flyoutheading"></div><div class="oskari-flyout-title"><p></p></div><div class="oskari-flyouttools"><div class="oskari-flyouttool-help"></div><div class="oskari-flyouttool-attach"></div><div class="oskari-flyouttool-detach"></div><div class="oskari-flyouttool-minimize"></div><div class="oskari-flyouttool-restore"></div><div class="oskari-flyouttool-close icon-close icon-close:hover"></div></div></div><div class="oskari-flyoutcontentcontainer"><div class="oskari-flyoutcontent"></div></div></div>',"Oskari.userinterface.View":'<div class="oskari-view"></div>'},compileTemplates:function(){var t=this,n;t.compiledTemplates["Oskari.userinterface.Tile"]=e(this.templates["Oskari.userinterface.Tile"]),n=e(t.templates["Oskari.userinterface.Flyout"]),n.css("left",t.defaults.attach.left),n.css("top",t.defaults.attach.top),t.compiledTemplates["Oskari.userinterface.Flyout"]=n,t.compiledTemplates["Oskari.userinterface.View"]=e(this.templates["Oskari.userinterface.View"])},addExtension:function(e){var t=this,n,r,i,s,o,u,a,f,l,c,h,p,d,v;return e.startExtension(),n=e.getPlugins(),r=t.extensions,i=t.extensionsByName,s={state:"close",extension:e,draggable:null,draggableTarget:null,draggableHandle:null,viewState:{},extensionUpdatedEvent:null},s.extensionUpdatedEvent=t.sandbox.getEventBuilder("userinterface.ExtensionUpdatedEvent")(e,s.state),o=r.length,u=e.getName(),a=n["Oskari.userinterface.Flyout"],f=null,l=null,a!==null&&a!==undefined&&(f=t.createFlyout(e,a,o,s),t._applyDraggableToFlyout(f,s,".oskari-flyouttoolbar"),c=f.children(".oskari-flyoutcontentcontainer"),l=c.children(".oskari-flyoutcontent"),a.setEl(l.get()),t.flyoutContainer.append(f),a.startPlugin()),h=n["Oskari.userinterface.Tile"],p=null,h!==null&&h!==undefined&&(p=t.createTile(e,h,o,s),h.startPlugin(),p.fadeIn(200),t.tileContainer.append(p)),d=n["Oskari.userinterface.View"],v=null,d!==null&&d!==undefined&&(v=t.createView(e,d,o,s),l=v,d.setEl(l.get()),d.startPlugin()),s.plugins={},h&&(s.plugins["Oskari.userinterface.Tile"]={plugin:h,el:p}),a&&(s.plugins["Oskari.userinterface.Flyout"]={plugin:a,el:f}),d&&(s.plugins["Oskari.userinterface.View"]={plugin:d,el:v}),r.push(s),i[u]=s,s},_applyDraggableToFlyout:function(t,n,r){var i=this,s=t.children(r).get()[0],o=t.get()[0],u=!1,a;n.draggableHandle=s,n.draggableTarget=o,n.draggable=e(t).draggable({handle:e(s),helper:u?function(){return a=e("<div />"),a.css("width",t.css("width")),a.css("height",t.css("height")),a.css("border","2px solid rgba(0,0,0,.5)"),a.css("z-index",t.css("z-index")),a}:null,scroll:!1,stack:".oskari-flyout",create:function(n,r){e.browser.msie&&e.browser.version[0]==="9"&&t.css("width",t.width()+"px")},start:function(){u&&t.css("display","none")},drag:function(){},stop:function(e,r){var s;u&&(t.css("top",r.helper.css("top")),t.css("left",r.helper.css("left"))),i.shuffleZIndices(t),u&&t.css("display",""),s=i.getFlyoutViewState(t,"detach"),n.viewState=s,i.notifyExtensionViewStateChange(n)}})},createTile:function(e,t,n,r){var i=this,s=this.compiledTemplates["Oskari.userinterface.Tile"].clone(!0,!0),o=s.children(".oskari-tile-title");return o.append(t.getTitle()),s.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"toggle"])}),t.setEl(s.get()),s},createFlyout:function(e,t,n,r){var i=this,s=this.compiledTemplates["Oskari.userinterface.Flyout"].clone(!0,!0),o,u;return s.find(".oskari-flyout-title p").append(t.getTitle()),o=s.children(".oskari-flyouttoolbar").children(".oskari-flyouttools"),u={attach:o.children(".oskari-flyouttool-attach"),detach:o.children(".oskari-flyouttool-detach"),minimize:o.children(".oskari-flyouttool-minimize"),restore:o.children(".oskari-flyouttool-restore"),close:o.children(".oskari-flyouttool-close"),help:o.children(".oskari-flyouttool-help")},u.detach.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"detach"])}),u.attach.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"attach"])}),u.minimize.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"minimize"])}),u.restore.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"restore"])}),u.close.click(function(){i.getSandbox().postRequestByName("userinterface.UpdateExtensionRequest",[e,"close"])}),u.help.click(function(){i.getSandbox().postRequestByName("userguide.ShowUserGuideRequest",[{placement:"bottom",el:u.help,extension:e.getName(),toggle:!0}])}),s},createView:function(e,t,n,r){var i=this,s=i.compiledTemplates["Oskari.userinterface.View"].clone(!0,!0);return s},removeExtension:function(e){var t=this,n=t.extensions,r=this.extensionsByName,i=r[e.getName()],s=i.plugins["Oskari.userinterface.Flyout"],o,u,a,f,l,c,h,p,d;s&&(o=s.plugin,u=s.el,a=this.flyoutOps,f=a.close,f.apply(this,[u,o,i]),u.remove()),l=i.plugins["Oskari.userinterface.Tile"],l&&(c=l.el,c.remove()),r[e.getName()]=null,h=[];for(p=0,d=n.length;p<d;p+=1)n[p]!==i&&h.push(n[p]);t.extensions=h,e.stopExtension()},updateExtension:function(t,n){var r=this,i=r.extensions,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O;if(!t){for(s=0;s<i.length;s+=1)this.updateExtension(i[s].extension,n);return}o=this.extensionsByName,u=o[t.getName()],a=u.state,f=n.getState(),f==="toggle"&&(a==="close"?f="attach":a==="attach"?f="close":a==="detach"?f="minimize":a==="minimize"?f="restore":a==="restore"&&(f="minimize")),h=u.plugins["Oskari.userinterface.Flyout"];if(f==="attach"&&h){var M=null,_=null;if(n.getExtensionLocation().top||n.getExtensionLocation().left)r.origExtensionLocation={};var D=function(t,n,r){n.origExtensionLocation&&(t.getExtensionLocation()[r]?(n.origExtensionLocation[r]=e(h.el).css(r),e(h.el).css(r,t.getExtensionLocation()[r]+"px")):n.origExtensionLocation[r]&&e(h.el).css(r,n.origExtensionLocation[r]))};D(n,r,"top"),D(n,r,"left"),l=r.flyoutOps,p=l.close;for(d=0,O=i.length;d<O;d+=1){v=i[d];if(v===u)continue;if(v.state!=="attach")continue;m="close",g=v.plugins,y=g["Oskari.userinterface.Flyout"];if(!y)continue;b=y.plugin,w=y.el,v.state=m,p.apply(this,[w,b,v]),r.notifyExtensionViewStateChange(v),E=g["Oskari.userinterface.Tile"],E&&(S=E.el,r.applyTransition(S,m,r.tileTransitions))}}h&&(x=h.plugin,T=h.el,l=r.flyoutOps,c=l[f],c.apply(this,[T,x,u,i])),N=u.plugins["Oskari.userinterface.Tile"],N&&(C=N.el,r.applyTransition(C,f,r.tileTransitions)),k=u.plugins["Oskari.userinterface.View"],k&&(L=k.plugin,A=k.el,l=r.viewOps,c=l[f],c&&c.apply(this,[A,L,u,i])),u.state=f,r.notifyExtensionViewStateChange(u)},notifyExtensionViewStateChange:function(e){var t=e.extensionUpdatedEvent;t.setViewState(e.state),t.setViewInfo(e.viewState),this.sandbox.notifyAll(t,!0)},validStates:{attach:{attach:!0,detach:!1,close:!1,minimize:!1,restore:!1,drawer:!1,sidebar:!1},detach:{attach:!1,detach:!0,close:!1,minimize:!1,restore:!1,drawer:!1,sidebar:!1},minimize:{attach:!0,detach:!0,close:!1,minimize:!0,restore:!1,drawer:!1,sidebar:!1},restore:{attach:!1,detach:!0,close:!1,minimize:!1,restore:!0,drawer:!1,sidebar:!1},close:{attach:!1,detach:!1,close:!0,minimize:!1,restore:!1,drawer:!1,sidebar:!1},drawer:{attach:!1,detach:!1,close:!1,minimize:!1,restore:!1,drawer:!0,sidebar:!1},sidebar:{attach:!1,detach:!1,close:!1,minimize:!1,restore:!1,drawer:!1,sidebar:!0}},defaults:{detach:{left:"212px",top:"50px"},attach:{left:"192px",top:"30px"}},tileTransitions:{attach:{"oskari-tile-attached":!0,"oskari-tile-detached":!1,"oskari-tile-closed":!1},detach:{"oskari-tile-attached":!1,"oskari-tile-detached":!0,"oskari-tile-minimized":!1,"oskari-tile-closed":!1},minimize:{"oskari-tile-minimized":!0,"oskari-tile-closed":!1,"oskari-tile-detached":!1},restore:{"oskari-tile-minimized":!1,"oskari-tile-detached":!0},close:{"oskari-tile-closed":!0,"oskari-tile-attached":!1,"oskari-tile-detached":!1}},flyoutTransitions:{attach:{"oskari-attached":!0,"oskari-detached":!1,"oskari-closed":!1},detach:{"oskari-attached":!1,"oskari-detached":!0,"oskari-closed":!1},minimize:{"oskari-minimized":!0,"oskari-closed":!1,"oskari-detached":!1},restore:{"oskari-minimized":!1,"oskari-closed":!1,"oskari-detached":!0,"oskari-attached":!1},close:{"oskari-closed":!0,"oskari-minimized":!1,"oskari-detached":!1,"oskari-attached":!1}},applyTransition:function(e,t,n){var r=n[t],i;if(!r)return;for(i in r)r.hasOwnProperty(i)&&(r[i]?e.addClass(i):e.removeClass(i))},getFlyoutViewState:function(e,t){var n={left:e.css("left"),top:e.css("top"),width:e.width(),height:e.height(),"z-index":e.css("z-index"),viewState:t};return n},flyoutOps:{detach:function(e,t,n,r){var i=this,s;if(!n.viewState.left||!n.viewState.top||n.viewState.left===i.defaults.attach.left&&n.viewState.top===i.defaults.attach.top)n.viewState.left=i.defaults.detach.left,n.viewState.top=i.defaults.detach.top;i.shuffleZIndices(e),i.applyTransition(e,"detach",i.flyoutTransitions),s=i.getFlyoutViewState(e,"detach"),n.viewState=s},attach:function(e,t,n,r){var i=this,s;i.shuffleZIndices(e),i.applyTransition(e,"attach",i.flyoutTransitions),s=i.getFlyoutViewState(e,"attach"),n.viewState=s},minimize:function(e,t,n){var r=this,i=r.getFlyoutViewState(e,"minimize");r.applyTransition(e,"minimize",r.flyoutTransitions),n.viewState=i},restore:function(e,t,n){var r=this;r.applyTransition(e,"restore",r.flyoutTransitions)},close:function(e,t,n){var r=this;n.viewState={viewState:"close"},r.applyTransition(e,"close",r.flyoutTransitions)}},viewOps:{view:function(e,t,n,r){},close:function(e,t,n){}},setState:function(e){var t=this,n=e,r,i,s;if(!n)return;for(r in t.extensionsByName)t.extensionsByName.hasOwnProperty(r)&&(i=t.extensionsByName[r],s=n.extensionStatesByName[r],s&&(i.state=s.state,i.viewState=s.viewState||{}))},getState:function(){var e=this,t,n,r;e.refreshExtensionViewStates(),t={extensionStatesByName:{}};for(n in e.extensionsByName)e.extensionsByName.hasOwnProperty(n)&&(r=e.extensionsByName[n],t.extensionStatesByName[n]={state:r.state,viewState:r.viewState});return t},applyState:function(){var e=this;e.restoreExtensionViewStates()},refreshExtensionViewStates:function(){var e=this,t,n,r,i,s;for(t in e.extensionsByName)e.extensionsByName.hasOwnProperty(t)&&(n=e.extensionsByName[t],r=n.plugins["Oskari.userinterface.Flyout"],r&&(i=r.el,s=e.getFlyoutViewState(i,n.state),n.viewState=s))},restoreExtensionViewStates:function(){var e=this,t=e.flyoutOps,n=e.extensions,r,i,s,o,u,a,f,l,c;for(r in e.extensionsByName)e.extensionsByName.hasOwnProperty(r)&&(i=e.extensionsByName[r],s=i.plugins["Oskari.userinterface.Flyout"],s&&(o=s.plugin,u=s.el,a=i.viewState,u.removeAttr("style"),u.css("left",a.left),u.css("top",a.top),u.width(a.width),u.height(a.height),u.css("z-index",a["z-index"]),f=t[i.state],f.apply(e,[u,o,i,n])),l=i.plugins["Oskari.userinterface.Tile"],l&&(c=l.el,e.applyTransition(c,i.state,e.tileTransitions)))},_toggleMapWindowFullScreen:function(){var e=this,t=e.sandbox.getRequestBuilder("MapFull.MapWindowFullScreenRequest");t&&e.sandbox.request(e.getName(),t())},shuffleZIndices:function(e){var t=this,n=[],r={},i={},s={},o=1100,u,a,f,l,c,h,p;for(a in t.extensionsByName)t.extensionsByName.hasOwnProperty(a)&&(f=t.extensionsByName[a],l=f.plugins["Oskari.userinterface.Flyout"],l&&(c=l.el,h=c.css("z-index"),n.push(h),u=String(h),r[u]=h,s[u]=c,i[u]=f));n.sort();for(p=0;p<n.length;p+=1)u=n[p],r[u]=o+p,s[u].css("z-index",r[n[p]]);e.css("z-index",o+n.length+2)},ieFixClasses:[{min:400,max:599,cls:"oskari-flyoutcontentcontainer_IE_400_599"},{min:600,max:799,cls:"oskari-flyoutcontentcontainer_IE_600_799"},{min:800,max:999,cls:"oskari-flyoutcontentcontainer_IE_800_999"},{min:1e3,max:1199,cls:"oskari-flyoutcontentcontainer_IE_1000_1199"},{min:1200,max:1399,cls:"oskari-flyoutcontentcontainer_IE_1200_1399"},{min:1400,max:9999,cls:"oskari-flyoutcontentcontainer_IE_1400"}]},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Stateful"]})}),Oskari.clazz.define("Oskari.userinterface.request.AddExtensionRequest",function(e){this._extension=e},{__name:"userinterface.AddExtensionRequest",getName:function(){return this.__name},getExtension:function(){return this._extension}},{protocol:["Oskari.mapframework.request.Request"]}),define("bundles/framework/bundle/divmanazer/request/AddExtensionRequest",function(){}),Oskari.clazz.define("Oskari.userinterface.bundle.ui.request.AddExtensionRequestHandler",function(e){this.ui=e},{handleRequest:function(e,t){var n=t.getExtension();this.ui.addExtension(n)}},{protocol:["Oskari.mapframework.core.RequestHandler"]}),define("bundles/framework/bundle/divmanazer/request/AddExtensionRequestHandler",function(){}),Oskari.clazz.define("Oskari.userinterface.request.RemoveExtensionRequest",function(e){this._extension=e},{__name:"userinterface.RemoveExtensionRequest",getName:function(){return this.__name},getExtension:function(){return this._extension}},{protocol:["Oskari.mapframework.request.Request"]}),define("bundles/framework/bundle/divmanazer/request/RemoveExtensionRequest",function(){}),Oskari.clazz.define("Oskari.userinterface.bundle.ui.request.RemoveExtensionRequestHandler",function(e){this.ui=e},{handleRequest:function(e,t){var n=t.getExtension();this.ui.removeExtension(n)}},{protocol:["Oskari.mapframework.core.RequestHandler"]}),define("bundles/framework/bundle/divmanazer/request/RemoveExtensionRequestHandler",function(){}),Oskari.clazz.define("Oskari.userinterface.request.UpdateExtensionRequest",function(e,t,n,r,i){this._extension=e,this._state=t,this._extensionName=n,this._location={},this._location.top=r,this._location.left=i},{__name:"userinterface.UpdateExtensionRequest",getName:function(){return this.__name},getExtension:function(){return this._extension},getState:function(){return this._state},getExtensionName:function(){return this._extensionName},getExtensionLocation:function(){return this._location}},{protocol:["Oskari.mapframework.request.Request"]}),define("bundles/framework/bundle/divmanazer/request/UpdateExtensionRequest",function(){}),Oskari.clazz.define("Oskari.userinterface.bundle.ui.request.UpdateExtensionRequestHandler",function(e){this.ui=e},{handleRequest:function(e,t){var n=t.getExtension(),r=t.getExtensionName();if(!n&&r&&r!="*"){var i=this.ui.getExtensionByName(r);if(!i)return;n=i.extension}this.ui.updateExtension(n,t)}},{protocol:["Oskari.mapframework.core.RequestHandler"]}),define("bundles/framework/bundle/divmanazer/request/UpdateExtensionRequestHandler",function(){}),Oskari.clazz.define("Oskari.userinterface.request.ModalDialogRequest",function(e,t,n,r){this._title=e?e:"Untitled",this._message=t?t:"Lorem ipsum",this._buttons=n?n:{},this._parent=parent?parent:jQuery("#mapdiv"),this._onshow=r?r:null},{__name:"userinterface.ModalDialogRequest",getName:function(){return this.__name},getTitle:function(){return this._title},getMessage:function(){return this._message},getButtons:function(){return this._buttons},getGeom:function(){return this._geom},getParent:function(){return this._parent},getOnShow:function(){return this._onshow}},{protocol:["Oskari.mapframework.request.Request"]}),define("bundles/framework/bundle/divmanazer/request/ModalDialogRequest",function(){}),Oskari.clazz.define("Oskari.userinterface.bundle.ui.request.ModalDialogRequestHandler",function(e){this._ui=e,this._tpl={},this._tpl.modal=jQuery('<div id="modaldialog" class="modaldialog">  <div class="modaltitle"></div>  <div class="modalmessage"></div>  <div class="modalbuttons"></div> </div>'),this._tpl.button=jQuery('<div class="modalbutton"><input type="button" /></input></div>'),this._buttons={},this._args={closeClass:"modalclose",overlayId:"modaloverlay",overlayCss:{"background-color":"lightgrey",cursor:"wait"},containerId:"modalcontainer",containerCss:{"background-color":"white"},onClose:function(){this.close()},zIndex:80130}},{handleRequest:function(e,t){var n=this._tpl.modal.clone();n.find(".modaltitle").append(t.getTitle()),n.find(".modalmessage").append(t.getMessage());var r=t.getButtons(),i=n.find(".modalbuttons");for(var s in r){if(!r[s].name)continue;var o=r[s],u=this._tpl.button.clone(),a=u.find("input");a.attr("name",o.name),a.attr("text",o.text),a.attr("value",o.text),a.bind("click",o.onclick),o.close!==!1&&a.addClass(this._args.closeClass),i.append(u)}t.onshow&&(this._args.onShow=onshow),$.modal=n.modal(this._args)}},{protocol:["Oskari.mapframework.core.RequestHandler"]}),define("bundles/framework/bundle/divmanazer/request/ModalDialogRequestHandler",function(){}),Oskari.clazz.define("Oskari.userinterface.event.ExtensionUpdatedEvent",function(e,t,n){this._creator=null,this._extension=e,this.viewstate=t,this.viewinfo=n},{__name:"userinterface.ExtensionUpdatedEvent",getName:function(){return this.__name},getExtension:function(){return this._extension},getViewState:function(){return this.viewstate},setViewState:function(e){this.viewstate=e},getViewInfo:function(){return this.viewinfo},setViewInfo:function(e){this.viewinfo=e}},{protocol:["Oskari.mapframework.event.Event"]}),define("bundles/framework/bundle/divmanazer/event/ExtensionUpdatedEvent",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Accordion",function(){this.template=jQuery('<div class="accordion"></div>'),this.templateMsg=jQuery('<div class="accordionmsg"></div>'),this.panels=[],this.ui=this.template.clone()},{addPanel:function(e){this.removeMessage(),this.panels.push(e),e.insertTo(this.ui)},removePanel:function(e){var t=null,n;for(n=0;n<this.panels.length;n+=1)if(this.panels[n]===e){t=this.panels[n],this.panels.splice(n,1);break}return t?(t.destroy(),!0):!1},removeAllPanels:function(){this.ui.empty(),this.panels=[]},removeMessage:function(){var e=this.ui.find("div.accordionmsg");e.length>0&&e.remove()},showMessage:function(e){this.removeMessage();var t=this.templateMsg.clone();t.append(e),this.ui.append(t)},showPanels:function(){var e=0;for(e=0;e<this.panels.length;e+=1)this.panels[e].setVisible(!0)},hidePanels:function(){var e=0;for(e=0;e<this.panels.length;e+=1)this.panels[e].setVisible(!1)},insertTo:function(e){e.append(this.ui)},getContainer:function(){return this.ui}}),define("bundles/framework/bundle/divmanazer/component/Accordion",function(){}),Oskari.clazz.define("Oskari.userinterface.component.AccordionPanel",function(){this.template=jQuery('<div class="accordion_panel"><div class="header"><div class="headerIcon icon-arrow-right"></div><div class="headerText"></div></div><div class="content"></div></div>'),this.title=null,this.content=null,this.html=this.template.clone();var e=this,t=e.html.find("div.header");t.click(function(){e.isOpen()?e.close():e.open()}),this.html.find("div.content").hide()},{setVisible:function(e){e===!0?this.html.show():this.html.hide()},isVisible:function(){return this.html.is(":visible")},isOpen:function(){return this.html.hasClass("open")},open:function(){this.html.addClass("open");var e=this.html.find("div.header div.headerIcon");e.removeClass("icon-arrow-right"),e.addClass("icon-arrow-down"),this.html.find("div.content").show()},close:function(){this.html.removeClass("open");var e=this.html.find("div.header div.headerIcon");e.removeClass("icon-arrow-down"),e.addClass("icon-arrow-right"),this.html.find("div.content").hide()},setTitle:function(e){this.title=e;var t=this.html.find("div.header div.headerText");t.html(this.title)},getTitle:function(){return this.title},setContent:function(e){this.content=e;var t=this.html.find("div.content");t.append(this.content)},destroy:function(){this.html.remove()},getContainer:function(){return this.html.find("div.content")},insertTo:function(e){e.append(this.html)}}),define("bundles/framework/bundle/divmanazer/component/AccordionPanel",function(){}),Oskari.clazz.define("Oskari.userinterface.component.TabContainer",function(e){this.panels=[],this.tabChangeListeners=[],e?this.emptyMsg=e:this.emptyMsg="No content",this.template=jQuery('<div class="oskariTabs">'+this.emptyMsg+"</div>"),this.templateTabs=jQuery('<div class="tabsHeader"><ul class="tabsItem"></ul></div><br clear="all"/><div class="tabsContent tabsContentItem"></div>'),this.ui=this.template.clone()},{addPanel:function(e,t){var n=this,r,i,s,o;this.panels.length===0&&(r=this.templateTabs.clone(),this.ui.html(r)),i=this.ui.find("ul.tabsItem"),s=e.getHeader(),t?(i.prepend(s),this.select(e)):i.append(s),e.insertTo(this.ui.find("div.tabsContentItem")),this.panels.push(e),this.panels.length===1&&this.select(e),o=s.find("a"),o.bind("click",function(){return n.select(e),!1})},addTabChangeListener:function(e){this.tabChangeListeners.push(e)},select:function(e){var t=null,n,r,i;for(n=0;n<this.panels.length;n+=1)if(this.isSelected(this.panels[n])){t=this.panels[n],t.handleSelection(!1);break}r=this.ui.find("ul"),r.find("li").removeClass("active"),i=this.ui.children().children("div.tab-content"),i.hide(),e.getHeader().addClass("active"),e.getContainer().show(),e.handleSelection(!0);for(n=0;n<this.tabChangeListeners.length;n+=1)this.tabChangeListeners[n](t,e)},isSelected:function(e){return e.getHeader().hasClass("active")},removePanel:function(e){var t=null,n;for(n=0;n<this.panels.length;n+=1)if(this.panels[n]===e){t=this.panels[n],this.panels.splice(n,1);break}if(this.panels.length===0){this.ui.html(this.emptyMsg);for(n=0;n<this.tabChangeListeners.length;n+=1)this.tabChangeListeners[n](e)}else this.select(this.panels[0]);return t?(t.destroy(),!0):!1},insertTo:function(e){e.append(this.ui)}}),define("bundles/framework/bundle/divmanazer/component/TabContainer",function(){}),Oskari.clazz.define("Oskari.userinterface.component.TabDropdownContainer",function(e){this.panels=[],this.tabChangeListeners=[],e?this.emptyMsg=e:this.emptyMsg="No content",this.template=jQuery('<div class="oskariTabs">'+this.emptyMsg+"</div>"),this.templateTabOption=jQuery("<option></option>"),this.templateTabs=jQuery('<div class="tabsHeader"><ul><li><select name="tabs"></select></li></ul></div><br clear="all"/><div class="tabsContent"></div>'),this.ui=this.template.clone()},{addPanel:function(e){var t=this;if(this.panels.length===0){var n=this.templateTabs.clone();this.ui.html(n)}var r=this.ui.find("ul li select"),i=this.templateTabOption.clone();i.attr("id","layer-id-"+e.getId()),i.append(e.getTitle()),r.append(i),e.setHeader(i),e.insertTo(this.ui.find("div.tabsContent")),this.panels.push(e),this.panels.length===1&&(this.select(e),r.bind("change",function(){t.select(t.panels[this.selectedIndex])}))},updatePanel:function(e){var t=this,n=t.ui.find("ul li select"),r,i;for(r=0;r<n.find("option").length;r++)i=jQuery(n.find("option")[r]),i.attr("id")==="layer-id-"+e.getId()&&i.html(e.getTitle())},addTabChangeListener:function(e){this.tabChangeListeners.push(e)},select:function(e){var t=null,n;if(this.tabChangeListeners.length>0)for(n=0;n<this.panels.length;n++)if(this.isSelected(this.panels[n])){t=this.panels[n];break}var r=this.ui.children().children("div.tab-content");r.hide();var i=this.ui.find("ul li select"),s=i.find("option");s.removeAttr("selected");var o=this._getPanelIndex(e);jQuery(s[o]).attr("selected","selected"),e.getContainer().show();for(n=0;n<this.tabChangeListeners.length;n++)this.tabChangeListeners[n](t,e)},isSelected:function(e){var t=this.ui.find("ul li select :selected");return t.index()===this._getPanelIndex(e)},_getPanelIndex:function(e){var t;for(t=0;t<this.panels.length;t++)if(this.panels[t].getId()===e.getId())return t;return-1},removePanel:function(e){var t=null,n,r;for(n=0;n<this.panels.length;n++)if(this.panels[n].getId()===e.getId()){t=this.panels[n],this.panels.splice(n,1);break}var i=this.ui.find("ul li select :selected");for(n=0;n<i.length;n++)r=jQuery(i[n]),r.attr("id")==="layer-id-"+t.getId()&&r.remove();if(this.panels.length===0){this.ui.html(this.emptyMsg);for(n=0;n<this.tabChangeListeners.length;n++)this.tabChangeListeners[n](e)}else this.select(this.panels[0]);return t?(t.destroy(),!0):!1},insertTo:function(e){e.append(this.ui)}}),define("bundles/framework/bundle/divmanazer/component/TabDropdownContainer",function(){}),Oskari.clazz.define("Oskari.userinterface.component.TabPanel",function(){this.template=jQuery('<div class="tab-content"></div>'),this.templateTabHeader=jQuery('<li><a href="JavaScript:void(0);"></a></li>'),this.id=null,this.title=null,this.content=null,this.header=null,this.selectionHandler=null,this.html=this.template.clone(),this.html.hide()},{setId:function(e){this.id=e},getId:function(){return this.id},setTitle:function(e){var t,n;this.title=e,t=this.templateTabHeader.clone(),this.header=t,n=t.find("a"),n.html(this.getTitle())},getTitle:function(){return this.title},setHeader:function(e){this.header=e},getHeader:function(){return this.header},setContent:function(e){this.content=e,this.html.html(this.content)},destroy:function(){this.header.remove(),this.html.remove()},getContainer:function(){return this.html},setSelectionHandler:function(e){this.selectionHandler=e},handleSelection:function(e){this.selectionHandler&&this.selectionHandler(e===!0)},insertTo:function(e){e.append(this.html)}}),define("bundles/framework/bundle/divmanazer/component/TabPanel",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Badge",function(){this.compiledTemplates={},this.compileTemplates(),this.ui=null,this.container=null},{templates:{"default":'<span class="oskari-badge"></span>',success:'<span class="oskari-badge oskari-badge-success"></span>',warning:'<span class="oskari-badge oskari-badge-warning"></span>',important:'<span class="oskari-badge oskari-badge-important"></span>',info:'<span class="oskari-badge oskari-badge-info"></span>',inverse:'<span class="oskari-badge oskari-badge-inverse"></span>'},compileTemplates:function(){var e;for(e in this.templates)this.templates.hasOwnProperty(e)&&(this.compiledTemplates[e]=jQuery(this.templates[e]))},insertTo:function(e){this.container=e},setContent:function(e,t){this.ui&&(this.ui.remove(),this.ui=null);var n=this.compiledTemplates[t||"default"].clone();n.append(e),this.container.append(n),this.ui=n},hide:function(){this.ui&&(this.ui.remove(),this.ui=null)}}),define("bundles/framework/bundle/divmanazer/component/Badge",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Alert",function(){this.compiledTemplates={},this.compileTemplates(),this.ui=null,this.container=null},{templates:{"default":'<div class="oskari-alert"><div class="oskari-alert-icon-close"><div class="icon-close"></div></div></div>',success:'<div class="oskari-alert oskari-alert-success"><div class="oskari-alert-icon-close"><div class="icon-close"></div></div></div>',error:'<div class="oskari-alert oskari-alert-error"><div class="oskari-alert-icon-close"><div class="icon-close"></div></div></div>',info:'<div class="oskari-alert oskari-alert-info"><div class="oskari-alert-icon-close"><div class="icon-close"></div></div></div>'},compileTemplates:function(){var e;for(e in this.templates)this.templates.hasOwnProperty(e)&&(this.compiledTemplates[e]=jQuery(this.templates[e]))},insertTo:function(e){this.container=e},setContent:function(e,t,n){this.ui&&(this.ui.remove(),this.ui=null);var r=this,i=r.compiledTemplates[t||"default"].clone(),s=!n;i.append(e),r.container.prepend(i),r.ui=i,s?i.children(".oskari-alert-icon-close").click(function(){r.hide()}):i.children(".oskari-alert-icon-close").remove()},hide:function(){this.ui&&(this.ui.remove(),this.ui=null)}}),define("bundles/framework/bundle/divmanazer/component/Alert",function(){}),define("src/framework/divmanazer/component/Popup",["jquery"],function(e){Oskari.clazz.define("Oskari.userinterface.component.Popup",function(){this.template=e('<div class="divmanazerpopup"><h3 class="popupHeader"></h3><div class="content"></div><div class="actions"></div></div>'),this.templateButton=e('<div class="button"><a href="JavaScript:void(0);"></a></div>'),this.dialog=this.template.clone(),this.overlay=null},{show:function(t,n,r){var i=this,s=this.dialog.find("div.content"),o,u,a,f;this.dialog.find("h3").html(t),s.html(n);if(r&&r.length>0){o=this.dialog.find("div.actions"),o.empty();for(u=0;u<r.length;u+=1)r[u].insertTo(o)}else this.dialog.bind("click",function(){i.close(!0)});e("body").append(this.dialog),a=s.height(),f=e(document).height()*.6,a>f&&(s.height(f),s.css("overflow-y","auto")),this.dialog.css("margin-left",-(this.dialog.width()/2)+"px"),this.dialog.css("margin-top",-(this.dialog.height()/2)+"px")},fadeout:function(e){var t=this,n=3e3;e&&(n=e),setTimeout(function(){t.close()},n)},addClass:function(e){this.dialog.addClass(e)},createCloseButton:function(e){var t=this,n=Oskari.clazz.create("Oskari.userinterface.component.Button");return n.setTitle(e),n.setHandler(function(){t.close(!0)}),n},close:function(e){var t=this;this.overlay&&this.overlay.close(),e?t.dialog.remove():(t.dialog.animate({opacity:0},500),setTimeout(function(){t.dialog.remove()},500))},alignment:["left","right","top","bottom"],moveTo:function(t,n){var r=this,i="right",s=e(t),o=s.offset();if(!s||s.length===0||!o)return;var u=s.outerWidth(),a=s.outerHeight(),f=r.dialog.outerWidth(),l=r.dialog.outerHeight(),c=o.left,h=o.top;n&&e.inArray(n,this.alignment)!==-1&&(i=n),i==="right"?(c=c+u+5,h=h+a/2-l/2):i==="left"?(c=c-f-5,h=h+a/2-l/2):i==="top"?(h=h-l-5,c=c+u/2-f/2):i==="bottom"&&(h=h+a+5,c=c+u/2-f/2),c<0&&(c=0),h<0&&(h=0),r.dialog.addClass("arrow"),r.dialog.addClass(n),r.dialog.css({left:c+"px",top:h+"px","margin-left":0,"margin-top":0})},resetPosition:function(){var e;this.dialog.removeClass("arrow");for(e=0;e<this.alignment.length;e+=1)this.dialog.removeClass(this.alignment[e]);this.dialog.removeAttr("style")},makeModal:function(){var e=Oskari.clazz.create("Oskari.userinterface.component.Overlay");e.overlay("body"),this.overlay=e,e.followResizing(!0)},setContent:function(e){var t=this.dialog.find("div.content");t.empty(),t.append(e)},getContent:function(){return this.dialog.find("div.content")[0].textContent},getJqueryContent:function(){return this.dialog.find("div.content")},makeDraggable:function(){var e=this;e.dialog.css("position","absolute"),e.dialog.draggable({scroll:!1})}})}),Oskari.clazz.define("Oskari.userinterface.component.Overlay",function(){this.template=jQuery('<div class="oskarioverlay transparent"></div>'),this._overlay=null,this._targetSelector=null,this._resizingWorkaround=null},{overlay:function(e){var t=this,n;t._overlay=this.template.clone(),t._targetSelector=e,this._targetSelector||(this._targetSelector="body"),n=jQuery(this._targetSelector),n.append(this._overlay),t._setupSizeAndLocation(),t._overlay.bind("click",function(e){e.preventDefault()})},_setupSizeAndLocation:function(){var e=this,t=jQuery(this._targetSelector);e._overlay.css({left:"0px",top:"0px",width:t.width()+"px",height:t.height()+"px"})},resize:function(){var e=jQuery(this._targetSelector);this._overlay.height(e.height()),this._overlay.width(e.width())},followResizing:function(e){var t=this;e?jQuery(window).resize(function(){t.resize()}):this._resizingWorkaround=setTimeout(function(){t.resize(),t.followResizing()},500)},close:function(){this._overlay.remove(),this._resizingWorkaround&&clearTimeout(this._resizingWorkaround)},bindClickToClose:function(){var e=this;e._overlay.bind("click",function(){e.close()})}}),define("bundles/framework/bundle/divmanazer/component/Overlay",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Button",function(){this.template=jQuery('<input type="button"/>'),this.title=null,this.ui=this.template.clone(),this.handler=null},{setTitle:function(e){this.title=e,this.ui&&this.ui.attr("value",e)},addClass:function(e){this.ui.addClass(e)},setEnabled:function(e){e===!0?this.ui.removeAttr("disabled"):this.ui.attr("disabled","disabled")},getTitle:function(){return this.title},setHandler:function(e){this.handler&&this.ui.unbind("click",this.handler),this.handler=e,this.ui.bind("click",this.handler)},destroy:function(){this.ui.remove()},insertTo:function(e){e.append(this.ui)},getButton:function(){return this.ui}}),define("bundles/framework/bundle/divmanazer/component/Button",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Form",function(){this.template=jQuery('<div class="oskariform"></div>'),this._form=this.template.clone(),this.fields=[]},{addField:function(e){this.fields.push(e)},getForm:function(e){var t;this._form=this.template.clone();for(t=0;t<this.fields.length;t+=1)this._form.append(this.fields[t].getField());return this._form},validate:function(e){var t=[],n;for(n=0;n<this.fields.length;n+=1)t=t.concat(this.fields[n].validate());return t},showErrors:function(){var e,t;for(e=0;e<this.fields.length;e+=1)t=this.fields[e].validate(),this.fields[e].showErrors(t)},clearErrors:function(){var e;for(e=0;e<this.fields.length;e+=1)this.fields[e].clearErrors()}}),define("bundles/framework/bundle/divmanazer/component/Form",function(){}),Oskari.clazz.define("Oskari.userinterface.component.UIHelper",function(e){this.sandbox=e},{processHelpLinks:function(e,t,n,r){if(!t)return;var i=this,s;s=function(t){return function(i,s){var o=Oskari.clazz.create("Oskari.userinterface.component.Popup"),u=o.createCloseButton("OK");u.addClass("primary"),i?(o.show(e,s.static,[u]),o.moveTo(t,"bottom")):o.show(n,r,[u])}},t.find("[helptags]").each(function(e,t){var n=jQuery(t),r=n.attr("helptags");n.bind("click",function(){i.getHelpArticle(r,s(n))})})},getHelpArticle:function(e,t){var n=this;jQuery.ajax({url:n.sandbox.getAjaxUrl()+"action_route=GetArticlesByTag",data:{tags:e},type:"GET",dataType:"json",beforeSend:function(e){e&&e.overrideMimeType&&e.overrideMimeType("application/j-son;charset=UTF-8")},success:function(e){e&&e.articles[0]&&e.articles[0].content?t(!0,e.articles[0].content):t(!1)},error:function(){t(!1)}})}}),define("bundles/framework/bundle/divmanazer/component/UIHelper",function(){}),Oskari.clazz.define("Oskari.userinterface.component.FormInput",function(e,t){var n=t||Oskari.getSandbox(),r,i;this.sandbox=n,this.template=jQuery('<div class="oskarifield"><label></label><input type="text" autofocus/></div>'),this.templateErrors=jQuery('<div class="error"></div>'),this.templateTooltip=jQuery('<div class="icon-info"></div>'),this.templateClearButton=jQuery('<div class="icon-close"></div>'),this._field=this.template.clone(),r=this._field.find("label"),r.attr("for",e),i=this._field.find("input").focus(),i.attr("name",e),this._name=e,this._validator=null,this._required=!1,this._requiredMsg="required",this._contentCheck=!1,this._contentCheckMsg="illegal characters",this._bindFocusAndBlur(),this._regExp=/[\s\w\d\.\,\?\!\-äöåÄÖÅ]*/,this._colorRegExp=/^([A-Fa-f0-9]{6})$/},{setLabel:function(e){var t=this._field.find("label");t.html(e)},setTooltip:function(e,t){var n=this.templateTooltip.clone(),r;n.attr("title",e),t&&(n.addClass("help"),n.attr("helptags",t)),r=this._field.find("label"),r.before(n)},setPlaceholder:function(e){var t=this._field.find("input");t.attr("placeholder",e)},setRequired:function(e,t){this._required=e===!0,t&&(this._requiredMsg=t)},setContentCheck:function(e,t,n){this._contentCheck=e===!0,n&&(this._regExp=n),t&&(this._contentCheckMsg=t)},showErrors:function(e){this.clearErrors();var t=this.templateErrors.clone(),n;for(n=0;n<e.length;n+=1)t.append(e[n].error+"<br/>");this._field.append(t)},clearErrors:function(){var e=this._field.find("div.error");e.remove()},getField:function(){return this._field},getValue:function(e){var t=this._field.find("input").val();return e&&(t=t.match(this._regExp)),String(t)},setValue:function(e){this._field.find("input").attr("value",e)},getName:function(){return this._name},setEnabled:function(e){e===!0?this._field.find("input").removeAttr("disabled"):this._field.find("input").attr("disabled","disabled")},setRegExp:function(e){this._regExp=e},setValidator:function(e){this._validator=e},validate:function(){var e=[],t;return this._validator&&(e=this._validator(this)),t=this.getValue(),this._required&&(this.checkLength(t,1)||e.push({field:this.getName(),error:this._requiredMsg})),this._contentCheck&&(this.checkValue()||e.push({field:this.getName(),error:this._contentCheckMsg})),e},checkLength:function(e,t,n){if(e){var r=jQuery.trim(e.toString());return t&&r.length<t?!1:n&&r.length>n?!1:!0}return!1},checkValue:function(){var e=this.getValue(),t=this.getValue(!0);return e===t},validateNumberRange:function(e,t,n){return isNaN(parseInt(e,10))?!1:isFinite(e)?e<t||e>n?!1:!0:!1},validateHexColor:function(e){return this._colorRegExp.test(e)},bindEnterKey:function(e){var t=this,n=this._field.find("input");n.keypress(function(n){t._isEnterPress(n)&&e(n)})},bindUpKey:function(e){var t=this,n=this._field.find("input");n.keydown(function(n){t._isUpPress(n)&&(n.preventDefault(),e(n))})},bindDownKey:function(e){var t=this,n=this._field.find("input");n.keydown(function(n){t._isDownPress(n)&&(n.preventDefault(),e(n))})},bindOnBlur:function(e){var t=this._field.find("input");t.blur(function(){e()})},bindChange:function(e,t){var n=this._field.find("input");t?n.keyup(e):n.on("change",e)},addClearButton:function(){var e=this.templateClearButton.clone(),t=this._field.find("input");e.bind("click",function(){t.val(""),t.trigger("change"),t.trigger("keyup")}),t.after(e)},_bindFocusAndBlur:function(){var e=this.sandbox,t,n,r;if(!e)return;t=e.getRequestBuilder("EnableMapKeyboardMovementRequest"),n=e.getRequestBuilder("DisableMapKeyboardMovementRequest");if(!t||!n)return;r=this._field.find("input"),r.focus(function(){e.postRequestByName("DisableMapKeyboardMovementRequest")}),r.blur(function(){e.postRequestByName("EnableMapKeyboardMovementRequest")})},_isEnterPress:function(e){var t=e.which;return t===13},_isDownPress:function(e){var t=e.which;return t===40},_isUpPress:function(e){var t=e.which;return t===38}}),define("bundles/framework/bundle/divmanazer/component/FormInput",function(){}),!function(e){var t=function(e,t){this.init("oskariTooltip",e,t)},n=function(e,t){this.init("oskariPopover",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger!=="manual"&&(i=this.options.trigger==="hover"?"mouseenter":"focus",s=this.options.trigger==="hover"?"mouseleave":"blur",this.$element.on(i,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState==="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.hide)return n.hide();clearTimeout(this.timeout),n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState==="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=this.options.placement.apply(this.options.scope),t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o).addClass(s).addClass("in")}},isHTML:function(e){return typeof e!="string"||e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(e)},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".oskari-tooltip-inner")[this.isHTML(t)?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function n(){var n=setTimeout(function(){t.off(e.support.transition.end).remove()},500);t.one(e.support.transition.end,function(){clearTimeout(n),t.remove()})}var t=this.tip();t.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?n():t.remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){return this.options.title.apply(this.options.scope)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},attach:function(e){this.$element=e}},e.fn.oskariTooltip=function(n){return this.each(function(){var r=e(this),i=r.data("oskariTooltip"),s=typeof n=="object"&&n;i||r.data("oskariTooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.oskariTooltip.Constructor=t,e.fn.oskariTooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="oskari-tooltip"><div class="oskari-tooltip-arrow"></div><div class="oskari-tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0},n.prototype=e.extend({},e.fn.oskariTooltip.Constructor.prototype,{constructor:n,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".oskari-popover-title")[this.isHTML(t)?"html":"text"](t),e.find(".oskari-popover-content > *")[this.isHTML(n)?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){return this.options.content.apply(this.options.scope)},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip}}),e.fn.oskariPopover=function(t){return this.each(function(){var r=e(this),i=r.data("oskariPopover"),s=typeof t=="object"&&t;i||r.data("oskariPopover",i=new n(this,s)),typeof t=="string"&&i[t]()})},e.fn.oskariPopover.Constructor=n,e.fn.oskariPopover.defaults=e.extend({},e.fn.oskariTooltip.defaults,{placement:"right",content:"",template:'<div class="oskari-popover"><div class="oskari-arrow"></div><div class="oskari-popover-inner"><h3 class="oskari-popover-title"></h3><div class="oskari-popover-content"><p></p></div></div></div>'}),Oskari.clazz.define("Oskari.userinterface.component.Popover",function(e,t){this.title=e,this.content=t,this.$container=null,this.data=null,this.shown=!1,this.placement="bottom"},{templates:{container:'<div class="oskari-popover-container"/>'},hide:function(){if(!this.shown)return;this.shown=!1;if(!this.data)return;this.data.hide()},show:function(){if(this.shown)return;if(!this.data)return;this.data.show(),this.shown=!0},attachTo:function(t){var r=this;r.$container=e(t),r.data?r.data.attach(r.$container):r.data=new n(t,{scope:r,title:r.getTitle,content:r.getContent,trigger:"manual",placement:r.getPlacement}),r.$container.data("oskariPopover",r.data)},getTitle:function(){return this.title},getContent:function(){return this.content},setContent:function(e,t){var n=this;n.hide(),n.content=e,t&&(n.title=t),n.show()},setTitle:function(e,t){var n=this;n.hide(),n.title=e,t&&(n.content=t),n.show()},setPlacement:function(e){this.placement=e},getPlacement:function(){return this.placement}})}(window.jQuery),define("bundles/framework/bundle/divmanazer/component/Popover",function(){}),Oskari.clazz.define("Oskari.userinterface.component.Grid",function(e){this.model=null;var t="";e!==null&&e!==undefined&&(t=e),this.template=jQuery('<table class="oskari-grid"><thead><tr></tr></thead><tbody></tbody></table>'),this.templateTableHeader=jQuery('<th><a href="JavaScript:void(0);"></a></th>'),this.templateDiv=jQuery("<div></div>"),this.templateRow=jQuery("<tr></tr>"),this.templateCell=jQuery("<td></td>"),this.templatePopupLink=jQuery('<a href="JavaScript: void(0);"></a>'),this.templateColumnSelectorButtonWrapper=jQuery("<div/>",{}),this.templateColumnSelectorButton=jQuery("<div/>",{title:t}),this.templateColumnSelector=jQuery("<div/>",{}),this.templateColumnSelectorList=jQuery("<ul/>",{}),this.templateColumnSelectorListItem=jQuery('<li><div><input type="checkbox"/><label></label></div></li>'),this.templateColumnSelectorClose=jQuery('<div class="icon-close close-selector-button"></div>'),this.table=null,this.fieldNames=[],this.selectionListeners=[],this.additionalDataHandler=null,this.visibleColumnSelector=null,this.showColumnSelector=!1,this.resizableColumns=!1,this.uiNames={},this.valueRenderer={},this.lastSort=null},{setDataModel:function(e){this.model=e},getDataModel:function(){return this.model},setColumnSelector:function(e){this.showColumnSelector=e},setResizableColumns:function(e){this.resizableColumns=e},setColumnUIName:function(e,t){this.uiNames[e]=t},setColumnValueRenderer:function(e,t){this.valueRenderer[e]=t},setVisibleFields:function(e){this.fieldNames=e},addSelectionListener:function(e){this.selectionListeners.push(e)},setAdditionalDataHandler:function(e,t){this.additionalDataHandler={title:e,handler:t}},_createAdditionalDataField:function(e){var t=this,n=this._renderAdditionalData(e),r;return!e.size&&this.additionalDataHandler?(r=this.templatePopupLink.clone(),r.append(this.additionalDataHandler.title),r.bind("click",function(){return t.additionalDataHandler.handler(r,n),!1}),r):n},_renderAdditionalData:function(e){var t=this.template.clone(),n=t.find("tbody"),r,i,s,o,u,a,f,l;if(e.size){r="";for(f=0;f<e.size();f+=1)f!==0&&(r+=", "),r+=e[f];return r}if(jQuery.isArray(e)){var c=this.templateDiv.clone();for(f=0;f<e.length;++f)a=this._renderAdditionalData(e[f]),c.append(a);return c}for(l in e)if(e.hasOwnProperty(l)){i=this.templateRow.clone(),s=this.templateCell.clone(),o=this.templateCell.clone(),r=e[l],s.append(l),i.append(s);try{u=typeof r,u==="object"?(a=this._renderAdditionalData(r),o.append(a)):u!=="function"&&o.append(r),i.append(o)}catch(h){}n.append(i)}return t},_renderHeader:function(e,t){var n=this,r=e.find("thead tr"),i=e.find("tbody"),s,o,u,a,f,l;l=function(s){return function(){var o=jQuery(this),u=n.getSelection(),a=!1,f,l;i.empty(),n.lastSort&&n.lastSort.attr===s&&(a=!n.lastSort.descending),n._sortBy(s,a),n._renderBody(e,t),r.find("th").removeClass("asc"),r.find("th").removeClass("desc"),a?o.parent().addClass("desc"):o.parent().addClass("asc"),f=n.model.getIdField();for(l=0;l<u.length;l+=1)n.select(u[l][f],!0);return!1}};for(s=0;s<t.length;s+=1)o=this.templateTableHeader.clone(),u=o.find("a"),a=t[s],f=this.uiNames[a],f||(f=a),u.append(f),n.lastSort&&a===n.lastSort.attr&&(n.lastSort.descending?o.addClass("desc"):o.addClass("asc")),u.bind("click",l(t[s])),r.append(o)},_renderBody:function(e,t){var n=this,r=e.find("tbody"),i=this.model.getData(),s,o,u,a,f,l,c,h,p,d;for(s=0;s<i.length;s+=1){o=this.templateRow.clone(),u=i[s],o.attr("data-id",u[this.model.getIdField()]);for(a=0;a<t.length;a+=1)f=t[a],l=u[f],c=this.templateCell.clone(),typeof l=="object"?c.append(this._createAdditionalDataField(l)):(h=this.valueRenderer[f],h&&(l=h(l,u)),c.append(l)),o.append(c);r.append(o)}p=e.find("tbody tr"),d=function(){n._dataSelected(jQuery(this).attr("data-id"))},p.bind("click",d),p.find("a").hover(function(){jQuery(this).parents("tr").unbind("click")},function(){jQuery(this).parents("tr").bind("click",d)})},_renderColumnSelector:function(e,t){this.visibleColumnSelector=this.templateColumnSelectorButtonWrapper.clone();var n=this,r=this.templateColumnSelectorButton.clone(),i=this.templateColumnSelector.clone(),s=this.templateColumnSelectorList.clone(),o=this.templateColumnSelectorClose.clone(),u,a,f,l,c,h;this.visibleColumnSelector.addClass("column-selector-placeholder"),r.addClass("icon-menu"),i.addClass("column-selector"),this.visibleColumnSelector.append(r),this.visibleColumnSelector.append(i),jQuery("input.column-selector-list-item").remove(),r.click(function(){i.css("visibility")!=="hidden"?i.css("visibility","hidden"):i.css("visibility","visible")}),o.click(function(e){e.stopPropagation(),i.css("visibility","hidden")}),u=this.model.getFields();for(f=0;f<u.length;f+=1){a=!1;for(l=0;l<t.length;l+=1)if(u[f]===t[l]){a=!0;break}c=this.templateColumnSelectorListItem.clone(),c.addClass("column-selector-list-item"),h=c.find("input"),h.attr("checked",a),h.addClass("column-selector-list-item"),h.attr("id",u[f]),c.find("label").attr({"for":u[f],"class":"column-label"}).html(u[f]),c.css({margin:"5px"}),h.change(function(){var e=jQuery("input.column-selector-list-item"),t=n.model.getFields(),r=[],i,s;for(i=0;i<t.length;i+=1)for(s=0;s<e.length;s+=1)if(t[i]===e[s].id){e[s].checked&&r.push(t[i]);break}r.length>0&&n.setVisibleFields(r),n.renderTo(n.visibleColumnSelector.parent(),{columnSelector:"open"})}),s.append(c)}s.attr("class","column-selector-list"),i.append(s,o),o.click(function(e){e.stopPropagation(),i.css("visibility","hidden")})},_enableColumnResizer:function(){var e=!1,t,n,r,i=jQuery("table.oskari-grid th");i.css("cursor","e-resize"),i.mousedown(function(i){t=jQuery(this),e=!0,n=i.pageX,r=jQuery(this).width(),jQuery(t).addClass("resizing"),jQuery(document).attr("unselectable","on").css("user-select","none").on("selectstart",!1)}),jQuery(document).mousemove(function(i){e&&jQuery(t).width(r+(i.pageX-n))}),jQuery(document).mouseup(function(){e&&(jQuery(t).removeClass("resizing"),e=!1)})},renderTo:function(e,t){e.empty();var n=this.fieldNames,r=this.template.clone();n.length===0&&(n=this.model.getFields()),this.table=r,this._renderHeader(r,n),this.lastSort&&this._sortBy(this.lastSort.attr,this.lastSort.descending),this._renderBody(r,n),this.showColumnSelector&&(this._renderColumnSelector(r,n),e.append(this.visibleColumnSelector),t!==null&&t!==undefined&&t.columnSelector==="open"&&this.visibleColumnSelector.find(".column-selector").css("visibility","visible")),e.append(r),this.resizableColumns&&this._enableColumnResizer()},_dataSelected:function(e){var t;for(t=0;t<this.selectionListeners.length;t+=1)this.selectionListeners[t](this,e)},select:function(e,t){var n=this.model.getIdField(),r=this.model.getData(),i,s,o;for(i=0;i<r.length;i+=1){o=r[i];if(o[n]===e)break}s=this.table.find("tbody tr"),t!==!0&&s.removeClass("selected"),jQuery(s[i]).addClass("selected")},removeSelections:function(){var e=this.table.find("tbody tr");e.removeClass("selected")},getSelection:function(){var e=this.model.getData(),t=[],n=this.table.find("tbody tr"),r,i;for(r=0;r<n.length;r+=1)i=jQuery(n[r]),i.hasClass("selected")&&t.push(e[r]);return t},getTable:function(){return this.table},_sortBy:function(e,t){var n=this,r=n.model.getData();if(r.length===0)return;this.lastSort={attr:e,descending:t},r.sort(function(r,i){return n._sortComparator(r,i,e,t)})},_sortComparator:function(e,t,n,r){var i,s,o;return typeof e[n]=="object"||typeof t[n]=="object"?0:(i=e[n],i?i.toLowerCase&&(i=i.toLowerCase()):i="",s=t[n],s?s.toLowerCase&&(s=s.toLowerCase()):s="",o=0,i<s?o=-1:i>s&&(o=1),r&&(o*=-1),o)}}),define("bundles/framework/bundle/divmanazer/component/Grid",function(){}),Oskari.clazz.define("Oskari.userinterface.component.GridModel",function(){this.fields=[],this.data=[],this.idField=null},{_addField:function(e){this.idField||(this.idField=e),this.fields.push(e)},getFields:function(){return this.fields},setIdField:function(e){this.idField=e},getIdField:function(){return this.idField},addData:function(e){var t;if(this.fields.length===0)for(t in e)e.hasOwnProperty(t)&&this._addField(t);this.data.push(e)},getData:function(){return this.data}}),define("bundles/framework/bundle/divmanazer/component/GridModel",function(){}),Oskari.clazz.define("Oskari.userinterface.component.ProgressSpinner",function(){this.container=undefined,this.opts=undefined},{__opts:{lines:15,length:0,width:5,radius:16,corners:0,rotate:0,color:"#000",speed:.6,trail:59,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},insertTo:function(e,t){this.container=e,this.opts=t||this.__opts},start:function(){var e=this.container,t=$(e),n=t.data(),r=this._Spinner,i=this.opts;n.spinner&&(n.spinner.stop(),delete n.spinner),i!==!1&&(n.spinner=(new r($.extend({color:t.css("color")},i))).spin(t.get()[0]))},stop:function(){var e=this.container,t,n;if(!e)return;t=$(e),n=t.data(),n.spinner&&(n.spinner.stop(),delete n.spinner)},_Spinner:function(e,t){function u(e,n){var r=t.createElement(e||"div"),i;for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r}function a(e){var t,n;for(t=1,n=arguments.length;t<n;t+=1)e.appendChild(arguments[t]);return e}function f(e,t,n,o){var u=["opacity",t,~~(e*100),n,o].join("-"),a=.01+n/o*100,f=Math.max(1-(1-e)/t*(100-a),e),l=i.substring(0,i.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return r[u]||(s.insertRule("@"+c+"keyframes "+u+"{"+"0%{opacity:"+f+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",s.cssRules.length),r[u]=1),u}function l(e,t){var r=e.style,i,s;if(r[t]!==undefined)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(s=0;s<n.length;s+=1){i=n[s]+t;if(r[i]!==undefined)return i}}function c(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e.style[l(e,n)||n]=t[n]);return e}function h(e){var t,n,r;for(r=1;r<arguments.length;r+=1){t=arguments[r];for(n in t)t.hasOwnProperty(n)&&e[n]===undefined&&(e[n]=t[n])}return e}function p(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function d(e){if(!this.spin)return new d(e);this.opts=h(e||{},d.defaults,o)}var n=["webkit","Moz","ms","O"],r={},i,s,o={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};return s=function(){var e=u("style",{type:"text/css"});return a(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),d.defaults={},h(d.prototype,{spin:function(e){this.stop();var t=this,n=t.opts,r=t.el=c(u(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),s=n.radius+n.length+n.width,o,a,f,l,h,d,v;return e&&(e.insertBefore(r,e.firstChild||null),a=p(e),o=p(r),c(r,{left:(n.left==="auto"?a.x-o.x+(e.offsetWidth>>1):parseInt(n.left,10)+s)+"px",top:(n.top==="auto"?a.y-o.y+(e.offsetHeight>>1):parseInt(n.top,10)+s)+"px"})),r.setAttribute("aria-role","progressbar"),t.lines(r,t.opts),i||(f=0,l=n.fps,h=l/n.speed,d=(1-n.opacity)/(h*n.trail/100),v=h/n.lines,function m(){var e,i;f+=1;for(e=n.lines;e;e-=1)i=Math.max(1-(f+e*v)%h*d,n.opacity),t.opacity(r,n.lines-e,i,n);t.timeout=t.el&&setTimeout(m,~~(1e3/l))}()),t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=undefined),this},lines:function(e,t){function s(e,r){return c(u(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*n+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var n,r;for(n=0;n<t.lines;n+=1)r=c(u(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:i&&f(t.opacity,t.trail,n,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&a(r,c(s("#000","0 0 4px #000"),{top:"2px"})),a(e,a(r,s(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),function(){function e(e,t){return u("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=c(u("group"),{behavior:"url(#default#VML)"});!l(t,"transform")&&t.adj?(s.addRule(".spin-vml","behavior:url(#default#VML)"),d.prototype.lines=function(t,n){function f(){return c(e("group",{coordsize:i+" "+i,coordorigin:-r+" "+ -r}),{width:i,height:i})}function l(t,i,s){a(o,a(c(f(),{rotation:360/n.lines*t+"deg",left:~~i}),a(c(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:s}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,i=2*r,s,o,u;s=-(n.width+n.length)*2+"px",o=c(f(),{position:"absolute",top:s,left:s});if(n.shadow)for(u=1;u<=n.lines;u+=1)l(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=n.lines;u+=1)l(u);return a(t,o)},d.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}):i=l(t,"animation")}(),d}(window,document)}),define("bundles/framework/bundle/divmanazer/component/ProgressSpinner",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.DefaultTile",function(e,t){this.locale=t,this.instance=e,this.container=null,this.template=null},{getName:function(){return"Oskari.userinterface.extension.DefaultTile"},setEl:function(e,t,n){this.container=$(e)},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.description},getOptions:function(){},setState:function(e){this.state=e},getState:function(e){return this.state}},{protocol:["Oskari.userinterface.Tile"]}),define("bundles/framework/bundle/divmanazer/extension/DefaultTile",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.DefaultFlyout",function(e,t){this.instance=e,this.locale=t,this.container=null},{getName:function(){return"Oskari.userinterface.extension.DefaultFlyout"},setEl:function(e){this.container=jQuery(e)},getEl:function(){return this.container},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.description},setState:function(e){this.state=e},getState:function(){return this.state},getLocalization:function(){return this.locale}},{protocol:["Oskari.userinterface.Flyout"]}),define("bundles/framework/bundle/divmanazer/extension/DefaultFlyout",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.DefaultExtension",function(e,t,n,r){this.sandbox=null,this.plugins={},this._localization=null,this.conf={name:e,tileClazz:n||"Oskari.userinterface.extension.DefaultTile",flyoutClazz:t||"Oskari.userinterface.extension.DefaultFlyout",viewClazz:r}},{getTitle:function(){return this.getLocalization("title")},getDescription:function(){return this.getLocalization("desc")},getSandbox:function(){return this.sandbox},update:function(){},getLocalization:function(e){return this._localization||(this._localization=Oskari.getLocalization(this.getName())),e?this._localization[e]:this._localization},start:function(){var e=this,t=this.conf,n=(t?t.sandbox:null)||"sandbox",r=Oskari.getSandbox(n),i;e.sandbox=r,r.register(this),t&&t.stateful===!0&&r.registerAsStateful(this.mediator.bundleId,this),i=r.getRequestBuilder("userinterface.AddExtensionRequest")(this),r.request(this,i)},stop:function(){var e=this.sandbox,t=e.getRequestBuilder("userinterface.RemoveExtensionRequest")(this);e.request(this,t),e.unregisterStateful(this.mediator.bundleId),e.unregister(this),this.sandbox=null,this.started=!1},startExtension:function(){var e=this,t=e.sandbox,n,r,i,s;for(n in e.eventHandlers)e.eventHandlers.hasOwnProperty(n)&&t.registerForEventByName(e,n);r=e.getLocalization("flyout"),r&&e.conf.flyoutClazz&&(e.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create(e.conf.flyoutClazz,e,r)),i=e.getLocalization("tile"),i&&e.conf.tileClazz&&(e.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create(e.conf.tileClazz,e,i)),s=e.getLocalization("view"),s&&e.conf.viewClazz&&(e.plugins["Oskari.userinterface.View"]=Oskari.clazz.create(e.conf.viewClazz,e,s))},stopExtension:function(){var e=this,t=e.sandbox,n,r;for(n in e.eventHandlers)e.eventHandlers.hasOwnProperty(n)&&t.unregisterFromEventByName(e,n);for(r in e.plugins)e.plugins.hasOwnProperty(r)&&r&&(e.plugins[r]=null)},getPlugins:function(){return this.plugins},init:function(){return null},getName:function(){return this.conf.name},getConfiguration:function(){return this.conf},eventHandlers:{},onEvent:function(e){var t=this,n=t.eventHandlers[e.getName()];if(!n)return;return n.apply(this,[e])},getLang:function(){return Oskari.getLang()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]}),define("bundles/framework/bundle/divmanazer/extension/DefaultExtension",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.DefaultView",function(e,t){this.instance=e,this.locale=t,this.container=null},{getName:function(){return"Oskari.userinterface.extension.DefaultView"},setEl:function(e){this.container=jQuery(e)},getEl:function(){return this.container},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.description},setState:function(e){this.state=e},getState:function(){return this.state},getLocalization:function(){return this.locale}},{protocol:["Oskari.userinterface.View"]}),define("bundles/framework/bundle/divmanazer/extension/DefaultView",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.DefaultLayout",function(e,t){this.instance=e,this.locale=t,this.container=null},{getName:function(){return"Oskari.userinterface.extension.DefaultLayout"},setEl:function(e){this.container=jQuery(e)},getEl:function(){return this.container},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.description},setState:function(e){this.state=e},getState:function(){return this.state},getLocalization:function(){return this.locale}},{protocol:["Oskari.userinterface.Layout"]}),define("bundles/framework/bundle/divmanazer/extension/DefaultLayout",function(){}),Oskari.clazz.define("Oskari.userinterface.component.visualization-form.AreaForm",function(e,t,n){this.creator=e,this.loc=t,this.defaultValues=n,this.values={lineWidth:this.defaultValues.line.width,lineCorner:this.defaultValues.line.corner,lineStyle:this.defaultValues.line.style,lineColor:this.defaultValues.line.color,fillColor:this.defaultValues.fill.color,fillStyle:this.defaultValues.fill.style},this.styleButtonNames=["icon-line-basic","icon-line-dashed","icon-double-line"],this.cornerButtonNames=["icon-corner-sharp","icon-corner-round"],this.colorTypes=["line","fill"],this.basicColors=["#ffffff","#666666","#ffde00","#f8931f","#ff3334","#bf2652","#000000","#cccccc","#652d90","#3233ff","#26bf4b","#00ff01"],this.activeColorCell=[-1,-1];var r,i;for(r=0;r<this.basicColors.length;r++)for(i=0;i<this.basicColors.length;i++)if(this.basicColors[i]==="#"+this.values.fillColor[r]){this.activeColorCell[r]=i;break}this.fillButtonNames=["icon-line-thin-diagonal","icon-line-wide-diagonal","icon-line-thin-horizontal","icon-line-wide-horizontal"],this.templateAreaStyleDialogContent=jQuery('<div class="areaform"><div class="container"><div class="column1"><label>'+this.loc.linestyle.label+"</label>"+'<div class="style icon-buttons"></div>'+"<label>"+this.loc.linecorner.label+"</label>"+'<div class="corner icon-buttons"></div>'+"<label>"+this.loc.linewidth.label+"</label><br>"+'<div class="width"></div>'+"</div>"+'<div class="column2">'+'<div class="column21">'+"<label>"+this.loc.linecolor.label+"</label>"+'<div class="color-grid">'+'<div class="color-rectangle line"></div>'+"</div>"+'<div class="color-label">'+"<label>"+this.loc.linecolor.labelOr+"</label>"+"</div>"+'<div class="color-source-selector-line">'+"<label>"+this.loc.linecolor.labelCustom+"</label>"+"</div>"+'<div class="custom-colors-line"></div>'+"</div>"+'<div class="column22">'+'<div class="column221">'+"<label>"+this.loc.color.label+"</label>"+'<div class="color-grid">'+'<div class="color-rectangle fill"></div>'+"</div>"+'<div class="color-label">'+"<label>"+this.loc.color.labelOr+"</label>"+"</div>"+'<div class="color-source-selector-fill">'+"<label>"+this.loc.color.labelCustom+"</label>"+"</div>"+'<div class="custom-colors-fill"></div>'+"<label>"+this.loc.fill.label+"</label>"+'<div class="fill icon-buttons"></div>'+"</div>"+'<div class="column222">'+"<label>"+this.loc.preview.label+"</label>"+'<div class="preview"></div>'+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"),this.templateButton=jQuery('<div class="icon-button"></div>'),this.templateColorCell=jQuery('<div class="color-cell"></div>'),this.templateCustomColor=jQuery('<div class="custom-color-editor"><div class="colorcontainer"><div class="colorcolumn1"></div><div class="colorcolumn2"><div class="colorcolumn21"></div><div class="colorcolumn22"></div></div></div>'),this.templateColorSource=jQuery('<input type="checkbox" name="colorInput" value = "custom" class="color-source">'),this.templateColorValue=jQuery('<label class="color-label"></label><br><input type="text" name="color-input" value="0" disabled="disabled" class="custom-color">'),this.minWidth=1,this.maxWidth=5,this.templateWidthValue=jQuery('<input type="number" name="width" class="linewidth" min="'+this.minWidth+'" max="'+this.maxWidth+'" step=1 value="'+this.values.lineWidth+'">'),this.previewSize=50,this.selectColor="#dddddd"},{getValues:function(){var e=this.values.lineCorner,t=this.values.lineStyle;return typeof e=="number"&&(e=this.creator.lineCornerMap[e]),typeof t=="number"&&(t=this.creator.lineStyleMap[t]),{lineWidth:this.values.lineWidth,lineCorner:e,lineStyle:t,lineColor:this.values.lineColor,fillColor:this.values.fillColor,fillStyle:this.values.fillStyle}},setValues:function(e){var t;if(e!==null&&e!==undefined){for(t=0;t<this.creator.lineCornerMap.length;t++)e.lineCorner===this.creator.lineCornerMap[t]&&(e.lineCorner=t);for(t=0;t<this.creator.lineStyleMap.length;t++)e.lineStyle===this.creator.lineStyleMap[t]&&(e.lineStyle=t);jQuery.extend(!0,this.values,e)}},showForm:function(e,t){var n=this;t!==null&&t!==undefined&&jQuery.extend(!0,n.values,t.area);var r=Oskari.clazz.create("Oskari.userinterface.component.Popup");r.addClass("renderdialog"),r.addClass("areavisualization");var i=n.loc.title,s=n.templateAreaStyleDialogContent.clone(),o=s.find("div.style"),u,a,f,l;n.values.lineStyle.length===0&&(n.values.lineStyle=0);for(u=0;u<n.styleButtonNames.length;u++)a=n.templateButton.clone(),a.addClass(n.styleButtonNames[u]),a.attr("id",u+"linestyle"),u===n.values.lineStyle&&this._styleSelectedButton(a),a.click(function(){f=parseInt(jQuery(this).attr("id").charAt(0),10),n._selectButton("lineStyle",f),n.values.lineStyle=f,n._updatePreview(s)}),o.append(a);o=s.find("div.corner");for(u=0;u<n.cornerButtonNames.length;u++)l=n.templateButton.clone(),l.addClass(n.cornerButtonNames[u]),l.attr("id",u+"linecorner"),u===n.values.lineCorner&&this._styleSelectedButton(l),l.click(function(){f=parseInt(jQuery(this).attr("id").charAt(0),10),n._selectButton("lineCorner",f),n.values.lineCorner=f,n._updatePreview(s)}),o.append(l);o=s.find("div.width");var c=n.templateWidthValue.clone();c.val(n.values.lineWidth!==null&&n.values.lineWidth!==undefined?n.values.lineWidth:1),c.change(function(){var e=parseInt(c.val(),10);isNaN(e)||(n.values.lineWidth=e,n._updatePreview())}),o.append(c);var h,p,d,v,m,g,y,b,w,E,S,x,T,N,C;for(h=0;h<2;h++){p=!1,d=h===0?"lineColor":"fillColor",o=s.find(".color-rectangle."+n.colorTypes[h]);for(u=0;u<n.basicColors.length;u++)v=n.templateColorCell.clone(),v.css("background-color",n.basicColors[u]),m="ColorCell",g=u.toString()+h.toString()+m,g.length===m.length+2&&(g="0"+g),v.attr("id",g),v.click(function(){var e=parseInt(this.id.substring(0,2),10),t=parseInt(this.id.substring(2,3),10);if(jQuery("#"+t+"color-checkbox").prop("checked"))return;if(e===n.activeColorCell[t])return;if(n.activeColorCell[t]>-1){var r=n.activeColorCell[t].toString();n.activeColorCell[t]<10&&(r="0"+r),jQuery("#"+r+t+"ColorCell").css("border","1px solid #000000")}n.values[t===0?"lineColor":"fillColor"]=n.creator.rgbToHex(this.style.backgroundColor),n.activeColorCell[t]=e,e<10&&(e="0"+e.toString()),jQuery("#"+e+t+"ColorCell").css("border","3px solid #ffffff"),n._updatePreview(s)}),"#"+n.values[d]===n.basicColors[u]&&(v.css("border","3px solid #ffffff"),n.activeColorCell[h]=u,p=!0),o.append(v);o=s.find(".color-source-selector-"+n.colorTypes[h]),y=n.templateColorSource.clone(),y.attr("id",h+"color-checkbox"),n.activeColorCell[h]===-1&&y.attr("checked",!0),y.change(function(){var e=this.id.substring(0,1),t=e==="0"?"lineColor":"fillColor";jQuery("input.custom-color."+n.colorTypes[e]).prop("disabled",!this.checked);var r=n.activeColorCell[e].toString();n.activeColorCell[e]<10&&(r="0"+r);var i=jQuery("#"+r+e+"ColorCell");this.checked&&(i.css("border","1px solid #000000"),jQuery(".custom-red-value."+n.colorTypes[e]).val(parseInt(n.values[t].substring(0,2),16)),jQuery(".custom-green-value."+n.colorTypes[e]).val(parseInt(n.values[t].substring(2,4),16)),jQuery(".custom-blue-value."+n.colorTypes[e]).val(parseInt(n.values[t].substring(4),16)),n.activeColorCell[e]=-1),n._updatePreview(s)}),o.prepend(y),p||(y.checked=!0,o.find("input.color-source").prop("disabled",!1).attr("checked","checked")),o=s.find(".custom-colors-"+n.colorTypes[h]),S=this.templateCustomColor.clone(),S.addClass(n.colorTypes[h]),o.append(S),x=n.templateColorValue.clone(),x.addClass("custom-red-value"),x.addClass(n.colorTypes[h]),n.activeColorCell[h]===-1&&(x.val(parseInt(n.values.lineColor.substring(0,2),16)),x.prop("disabled",!1)),o.find(".colorcolumn1").append(x),o.find("label.custom-red-value").text("R"),o.find("input.custom-red-value").attr("id",h+"red-value"),T=n.templateColorValue.clone(),T.addClass("custom-green-value"),T.addClass(n.colorTypes[h]),n.activeColorCell[h]===-1&&(T.val(parseInt(n.values[d].substring(2,4),16)),T.prop("disabled",!1)),o.find(".colorcolumn21").append(T),o.find("label.custom-green-value").text("G"),o.find("input.custom-green-value").attr("id",h+"green-value"),N=n.templateColorValue.clone(),N.addClass("custom-blue-value"),N.addClass(n.colorTypes[h]),n.activeColorCell[h]===-1&&(N.val(parseInt(n.values[d].substring(4),16)),N.prop("disabled",!1)),o.find(".colorcolumn22").append(N),o.find("label.custom-blue-value").text("B"),o.find("input.custom-blue-value").attr("id",h+"blue-value"),p||(C=n.creator.hexToRgb(n.values[d]),o.find("input.custom-color.custom-red-value").val(C.r),o.find("input.custom-color.custom-green-value").val(C.g),o.find("input.custom-color.custom-blue-value").val(C.b),s.find("input#"+h.toString()+"red-value.custom-color").prop("disabled",!1),s.find("input#"+h.toString()+"green-value.custom-color").prop("disabled",!1),s.find("input#"+h.toString()+"blue-value.custom-color").prop("disabled",!1)),o.find(".custom-color").change(function(){var e=this.id.substring(0,1),t=[],r,i;t[0]=jQuery("input#"+e+"red-value").val(),t[1]=jQuery("input#"+e+"green-value").val(),t[2]=jQuery("input#"+e+"blue-value").val();for(r=0;r<3;r++){i=parseInt(t[r]);if(i<0||i>255)return;t[r]=i.toString(16),t[r].length===1&&(t[r]="0"+t[r])}n.values[e==="0"?"lineColor":"fillColor"]=t.join(""),n._updatePreview()})}o=s.find("div.fill.icon-buttons");for(u=0;u<n.fillButtonNames.length;u++){var k=n.templateButton.clone();k.addClass(n.fillButtonNames[u]),k.attr("id",u+"fillstyle"),u===n.values.fillStyle&&this._styleSelectedButton(k),k.click(function(){var e=parseInt(jQuery(this).attr("id").charAt(0));n.values.fillStyle===e?(n.values.fillStyle=-1,n._styleUnselectedButton(jQuery("div#"+e+"fillstyle.icon-button"))):(n.values.fillStyle!==-1&&n._styleUnselectedButton(jQuery("div#"+n.values.fillStyle+"fillstyle.icon-button")),n._styleSelectedButton(jQuery("div#"+e+"fillstyle.icon-button")),n.values.fillStyle=e),n._updatePreview(s)}),o.append(k)}this._supportsSVG()&&this._updatePreview(s);var L=Oskari.clazz.create("Oskari.userinterface.component.Button");L.setTitle(n.loc.buttons.save),L.addClass("primary showSelection"),L.setHandler(function(){r.close()});var A=Oskari.clazz.create("Oskari.userinterface.component.Button");return A.setTitle(n.loc.buttons.cancel),A.setHandler(function(){n.values.lineWidth=n.defaultValues.line.width,n.values.lineCorner=n.defaultValues.line.corner,n.values.lineStyle=n.defaultValues.line.style,n.values.lineColor=n.defaultValues.line.color,n.values.fillColor=n.defaultValues.fill.color,n.values.fillStyle=n.defaultValues.fill.style,r.close()}),r.show(i,s,[L,A]),r.moveTo(e,"top"),r},_selectButton:function(e,t){var n=e.substring(4).toLowerCase();this._styleUnselectedButton(jQuery("div#"+this.values[e]+"line"+n+".icon-button")),this._styleSelectedButton(jQuery("div#"+t+"line"+n+".icon-button"))},_updatePreview:function(e){var t=this,n=e===undefined||e===null?jQuery(".areaform"):e,r=n.find(".preview");r.svg("destroy"),r.svg({onLoad:function(e){var n=e.createPath(),r=t.values.fillStyle<0?"#"+t.values.fillColor:"url(#"+t.fillButtonNames[t.values.fillStyle]+")",i=e.group({stroke:"#"+t.values.lineColor,fill:r,strokeWidth:t.values.lineWidth,strokeLineJoin:t.values.lineCorner===0?"miter":"round",strokeDashArray:t.values.lineStyle===1?[3,2+.25*t.values.lineWidth]:null});if(t.values.fillStyle>=0){var s=null,o=e.createPath();switch(t.values.fillStyle){case 0:s=e.pattern(t.fillButtonNames[t.values.fillStyle],0,0,4,4,0,0,4,4,{patternUnits:"userSpaceOnUse"}),e.path(s,o.move(0,4,!1).line([[4,0]]),{strokeWidth:1,stroke:"#"+t.values.fillColor,fill:"none"});break;case 1:s=e.pattern(t.fillButtonNames[t.values.fillStyle],0,0,6,6,0,0,6,6,{patternUnits:"userSpaceOnUse"}),e.path(s,o.move(-1,1,!1).line([[1,-1]]).move(0,6,!1).line([[6,0]]).move(5,7,!1).line([[7,5]]),{strokeWidth:2,stroke:"#"+t.values.fillColor,fill:"none"});break;case 2:s=e.pattern(t.fillButtonNames[t.values.fillStyle],0,4,4,4,0,0,4,4,{patternUnits:"userSpaceOnUse"}),e.path(s,o.move(0,.5,!1).line([[4,.5]]),{strokeWidth:1,stroke:"#"+t.values.fillColor,fill:"none"});break;case 3:s=e.pattern(t.fillButtonNames[t.values.fillStyle],0,0,5,5,0,0,5,5,{patternUnits:"userSpaceOnUse"}),e.path(s,o.move(0,2,!1).line([[5,2]]),{strokeWidth:2,stroke:"#"+t.values.fillColor,fill:"none"})}}var u=[10,17],a=[40,12],f=[29,40];e.path(i,n.move(u[0],u[1],!1).line([a,f]).close());if(t.values.lineStyle===2){var l=2*(2+t.values.lineWidth),c=Math.atan(Math.abs((a[1]-u[1])/(a[0]-u[0]))),h=[u[0]+l*Math.sin(Math.PI/3+c),u[1]+l*Math.cos(Math.PI/3+c)],p=Math.atan(Math.abs((f[1]-a[1])/(f[0]-a[0]))),d=[a[0]-l*Math.sin(Math.PI/3+p),a[1]-l*Math.cos(Math.PI/3+p)],v=Math.atan(Math.abs((u[1]-f[1])/(u[0]-f[0]))),m=[f[0]-l*Math.cos(Math.PI/6+v),f[1]-l*Math.sin(Math.PI/6+v)];e.path(i,n.move(h[0],h[1],!1).line([d,m]).close())}}})},_getOnScreenForm:function(){return jQuery("div.renderdialog")},_styleSelectedButton:function(e){e.css("border","2px solid"),e.css("background-color",this.selectColor)},_styleUnselectedButton:function(e){e.css("border","1px solid"),e.css("background-color","transparent")},_supportsSVG:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}}),define("bundles/framework/bundle/divmanazer/component/visualization-form/AreaForm",function(){}),Oskari.clazz.define("Oskari.userinterface.component.visualization-form.LineForm",function(e,t,n){this.creator=e,this.loc=t,this.defaultValues=n,this.values={style:this.defaultValues.style,cap:this.defaultValues.cap,corner:this.defaultValues.corner,width:this.defaultValues.width,color:this.defaultValues.color},this.styleButtonNames=["icon-line-basic","icon-line-dashed","icon-double-line"],this.capButtonNames=["icon-line-flat_cap","icon-line-round_cap"],this.cornerButtonNames=["icon-corner-sharp","icon-corner-round"],this.basicColors=["#ffffff","#666666","#ffde00","#f8931f","#ff3334","#bf2652","#000000","#cccccc","#652d90","#3233ff","#26bf4b","#00ff01"],this.activeColorCell=-1;var r;for(r=0;r<this.basicColors.length;r++)if(this.basicColors[r]==="#"+this.values.color){this.activeColorCell=r;break}this.templateLineStyleDialogContent=jQuery('<div class="lineform"><div class="container"><div class="column1"><label>'+this.loc.style.label+"</label>"+'<div class="style icon-buttons"></div>'+"<label>"+this.loc.cap.label+"</label>"+'<div class="cap icon-buttons"></div>'+"<label>"+this.loc.corner.label+"</label>"+'<div class="corner icon-buttons"></div>'+"<label>"+this.loc.width.label+"</label><br>"+'<div class="width"></div>'+"</div>"+'<div class="column2">'+'<div class="column21">'+"<label>"+this.loc.color.label+"</label>"+'<div class="color-grid">'+'<div class="color-rectangle"></div>'+"</div>"+'<div class="color-label">'+"<label>"+this.loc.color.labelOr+"</label>"+"</div>"+'<div class="color-source-selector">'+"<label>"+this.loc.color.labelCustom+"</label>"+"</div>"+'<div class="custom-colors"></div>'+"</div>"+'<div class="column22">'+"<label>"+this.loc.preview.label+"</label>"+'<div class="preview"></div>'+"</div>"+"</div>"+"</div>"+"</div>"),this.templateButton=jQuery('<div class="icon-button"></div>'),this.templateColorCell=jQuery('<div class="color-cell"></div>'),this.templateCustomColor=jQuery('<div class="custom-color-editor"><div class="colorcontainer"><div class="colorcolumn1"></div><div class="colorcolumn2"><div class="colorcolumn21"></div><div class="colorcolumn22"></div></div></div>'),this.templateColorSource=jQuery('<input type="checkbox" name="colorInput" value = "custom" class="color-source">'),this.templateColorValue=jQuery('<label class="color-label"></label><br><input type="text" name="color-input" value="0" disabled="disabled" class="custom-color">'),this.minWidth=1,this.maxWidth=10,this.templateWidthValue=jQuery('<input type="number" name="width" class="linewidth" min="'+this.minWidth+'" max="'+this.maxWidth+'" step=1 value="'+this.values.width+'">'),this.previewSize=50,this.selectColor="#dddddd"},{getValues:function(){var e=this.values.cap,t=this.values.corner,n=this.values.style;return typeof e=="number"&&(e=this.creator.lineCapMap[e]),typeof t=="number"&&(t=this.creator.lineCornerMap[t]),typeof n=="number"&&(n=this.creator.lineStyleMap[n]),{width:this.values.width,color:this.values.color,cap:e,corner:t,style:n}},setValues:function(e){var t;if(e!==null&&e!==undefined){for(t=0;t<this.creator.lineCapMap.length;t++)e.cap===this.creator.lineCapMap[t]&&(e.cap=t);for(t=0;t<this.creator.lineCornerMap.length;t++)e.corner===this.creator.lineCornerMap[t]&&(e.corner=t);for(t=0;t<this.creator.lineStyleMap.length;t++)e.style===this.creator.lineStyleMap[t]&&(e.style=t);jQuery.extend(!0,this.values,e)}},showForm:function(e,t){var n=this;t!==null&&t!==undefined&&(jQuery.extend(!0,n.values,t.line),n.values.width=Number(n.values.size));var r=Oskari.clazz.create("Oskari.userinterface.component.Popup");r.addClass("renderdialog"),r.addClass("linevisualization");var i=n.loc.title,s=n.templateLineStyleDialogContent.clone(),o=s.find("div.style"),u,a,f,l,c;n.values.style.length===0&&(n.values.style=0);for(u=0;u<n.styleButtonNames.length;u++)f=n.templateButton.clone(),f.addClass(n.styleButtonNames[u]),f.attr("id",u+"linestyle"),u===n.values.style&&this._styleSelectedButton(f),f.click(function(){c=parseInt(jQuery(this).attr("id").charAt(0)),n._selectButton("style",c),n.values.style=c,n._updatePreview(s)}),o.append(f);o=s.find("div.cap");for(u=0;u<n.capButtonNames.length;u++)l=n.templateButton.clone(),l.addClass(n.capButtonNames[u]),l.attr("id",u+"linecap"),u===n.values.cap&&this._styleSelectedButton(l),l.click(function(){c=parseInt(jQuery(this).attr("id").charAt(0)),n._selectButton("cap",c),n.values.cap=c,n._updatePreview(s)}),o.append(l);o=s.find("div.corner");for(u=0;u<n.cornerButtonNames.length;u++)a=n.templateButton.clone(),a.addClass(n.cornerButtonNames[u]),a.attr("id",u+"linecorner"),u===n.values.corner&&this._styleSelectedButton(a),a.click(function(){c=parseInt(jQuery(this).attr("id").charAt(0)),n._selectButton("corner",c),n.values.corner=c,n._updatePreview(s)}),o.append(a);o=s.find("div.width");var h=n.templateWidthValue.clone();h.change(function(){var e=parseInt(h.val(),10);isNaN(e)||(n.values.width=e,n._updatePreview())}),h.val(n.values.size!==null&&n.values.size!==undefined?n.values.size:1),o.append(h);var p=!1,d,v,m,g,y;o=s.find(".color-rectangle");for(u=0;u<n.basicColors.length;u++)d=n.templateColorCell.clone(),d.css("background-color",n.basicColors[u]),v="ColorCell",m=u+v,m.length===v.length+1&&(m="0"+m),d.attr("id",m),d.click(function(){if(jQuery(".color-source").prop("checked"))return;g=parseInt(this.id.substring(0,2),10);if(g===n.activeColorCell)return;n.activeColorCell>-1&&(y=n.activeColorCell.toString(),n.activeColorCell<10&&(y="0"+y),jQuery("#"+y+"ColorCell").css("border","1px solid #000000")),n.values.color=n.creator.rgbToHex(this.style.backgroundColor),n.activeColorCell=g,g<10&&(g="0"+g.toString()),jQuery("#"+g+"ColorCell").css("border","3px solid #ffffff"),n._updatePreview(s)}),"#"+n.values.color===n.basicColors[u]&&(d.css("border","3px solid #ffffff"),n.activeColorCell=u,p=!0),o.append(d);o=s.find(".color-source-selector");var b=n.templateColorSource.clone();n.activeColorCell===-1&&b.attr("checked",!0),b.change(function(){jQuery("input.custom-color").prop("disabled",!this.checked);var e=n.activeColorCell.toString();n.activeColorCell<10&&(e="0"+e);var t=jQuery("#"+e+"ColorCell");this.checked&&(t.css("border","1px solid #000000"),jQuery(".custom-red-value").val(parseInt(n.values.color.substring(0,2),16)),jQuery(".custom-green-value").val(parseInt(n.values.color.substring(2,4),16)),jQuery(".custom-blue-value").val(parseInt(n.values.color.substring(4),16)),n.activeColorCell=-1),n._updatePreview(s)}),o.prepend(b),p||(b.checked=!0,o.find("input.color-source").prop("disabled",!1).attr("checked","checked")),o=s.find(".custom-colors");var w=this.templateCustomColor.clone();o.append(w);var E=n.templateColorValue.clone();E.addClass("custom-red-value"),n.activeColorCell===-1&&(E.val(parseInt(n.values.color.substring(0,2),16)),E.prop("disabled",!1)),s.find(".colorcolumn1").append(E),s.find("label.custom-red-value").text("R");var S=n.templateColorValue.clone();S.addClass("custom-green-value"),n.activeColorCell===-1&&(S.val(parseInt(n.values.color.substring(2,4),16)),S.prop("disabled",!1)),s.find(".colorcolumn21").append(S),s.find("label.custom-green-value").text("G");var x=n.templateColorValue.clone();x.addClass("custom-blue-value"),n.activeColorCell===-1&&(x.val(parseInt(n.values.color.substring(4),16)),x.prop("disabled",!1)),s.find(".colorcolumn22").append(x),s.find("label.custom-blue-value").text("B");if(!p){var T=n.creator.hexToRgb(n.values.color);s.find("input.custom-color.custom-red-value").val(T.r),s.find("input.custom-color.custom-green-value").val(T.g),s.find("input.custom-color.custom-blue-value").val(T.b),s.find("input.custom-color").prop("disabled",!1)}s.find(".custom-color").change(function(){var e=[],t,r;e[0]=jQuery("input.custom-color.custom-red-value").val(),e[1]=jQuery("input.custom-color.custom-green-value").val(),e[2]=jQuery("input.custom-color.custom-blue-value").val();for(t=0;t<3;t++){r=parseInt(e[t]);if(r<0||r>255)return;e[t]=r.toString(16),e[t].length===1&&(e[t]="0"+e[t])}n.values.color=e.join(""),n._updatePreview()}),this._supportsSVG()&&this._updatePreview(s);var N=Oskari.clazz.create("Oskari.userinterface.component.Button");N.setTitle(n.loc.buttons.save),N.addClass("primary showSelection"),N.setHandler(function(){r.close()});var C=Oskari.clazz.create("Oskari.userinterface.component.Button");return C.setTitle(n.loc.buttons.cancel),C.setHandler(function(){n.values.size=n.defaultValues.size,n.values.color=n.defaultValues.color,n.values.shape=n.defaultValues.shape,r.close()}),r.show(i,s,[N,C]),r.moveTo(e,"top"),n._updatePreview(),r},_selectButton:function(e,t){this._styleUnselectedButton(jQuery("div#"+this.values[e]+"line"+e+".icon-button")),this._styleSelectedButton(jQuery("div#"+t+"line"+e+".icon-button"))},_updatePreview:function(e){var t=this,n=e===undefined||e===null?jQuery(".lineform"):e,r=n.find(".preview");r.svg("destroy"),r.svg({onLoad:function(e){var n=e.createPath(),r=e.group({stroke:"#"+t.values.color,fill:"none",strokeWidth:t.values.width,strokeLineJoin:t.values.corner===0?"miter":"round",strokeLineCap:t.values.cap===0?"butt":"round",strokeDashArray:t.values.style===1?[3,2+.25*t.values.width]:null}),i=[10,15],s=[20,35],o=[40,25];if(t.values.style!==2)e.path(r,n.move(i[0],i[1],!1).line([s,o]));else{var u=1.5+.5*t.values.width,a=[i[0]+2*u/Math.sqrt(5),i[1]-u/Math.sqrt(5)],f=[i[0]-2*u/Math.sqrt(5),i[1]+u/Math.sqrt(5)],l=[];l[0]=s[0]+.5*u*(Math.sqrt(3)-1),l[1]=s[1]-.5*u*(Math.sqrt(3)+1);var c=[];c[0]=s[0]-.5*u*(Math.sqrt(3)-1),c[1]=s[1]+.5*u*(Math.sqrt(3)+1);var h=[o[0]-u/Math.sqrt(5),o[1]-2*u/Math.sqrt(5)],p=[o[0]+u/Math.sqrt(5),o[1]+2*u/Math.sqrt(5)];e.path(r,n.move(a[0],a[1],!1).line([l,h]).move(f[0],f[1],!1).line([c,p]))}}})},_getOnScreenForm:function(){return jQuery("div.renderdialog")},_styleSelectedButton:function(e){e.css("border","2px solid"),e.css("background-color",this.selectColor)},_styleUnselectedButton:function(e){e.css("border","1px solid"),e.css("background-color","transparent")},_supportsSVG:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}}),define("bundles/framework/bundle/divmanazer/component/visualization-form/LineForm",function(){}),Oskari.clazz.define("Oskari.userinterface.component.visualization-form.PointForm",function(e,t,n){this.creator=e,this.loc=t,this.defaultValues=n,this.values={size:this.defaultValues.size,color:this.defaultValues.color,shape:this.defaultValues.shape},this.defaultValues.dotMinSize!==null&&this.defaultValues.dotMinSize!==undefined?this.minSize=this.defaultValues.dotMinSize:this.minSize=1,this.defaultValues.dotMaxSize?this.maxSize=this.defaultValues.dotMaxSize:this.maxSize=5,this.basicColors=["#ffffff","#666666","#ffde00","#f8931f","#ff3334","#bf2652","#000000","#cccccc","#652d90","#3233ff","#26bf4b","#00ff01"],this.activeColorCell=6,this.symbolButtons={square:{iconCls:"marker-square",iconId:1,shape:{data:{paths:[],polygons:[[[310,68],[112,68],[112,266],[166.615,266],[210.583,335.832],[254.551,266],[310,266]]],circles:[]},offset:[210.583,335.832]}},dot:{iconCls:"marker-dot",iconId:5,shape:{data:{paths:[],polygons:[],circles:[{cx:195.782,cy:185.718,r:93.782}]},offset:[195.782,185.718]}},arrow:{iconCls:"marker-arrow",iconId:6,shape:{data:{paths:[],polygons:[[[249,214],[249,69],[162,69],[162,214],[101.123,214],[205.25,331.832],[309.377,214]]],circles:[]},offset:[205.25,331.832]}},pin:{iconCls:"marker-pin",iconId:3,shape:{data:{paths:[],polygons:[[[183.893,323],[210.506,212.198],[191.684,208.229],[164.713,323]]],circles:[{cx:217.199,cy:131,r:68}]},offset:[174.303,323]}},pin2:{iconCls:"marker-pin2",iconId:2,shape:{data:{paths:[[["move",[197.282,57.936],!1],["curveC",[-51.795,0,-93.782,41.988,-93.782,93.782],!0],["curveC",[0,51.795,93.782,174.782,93.782,174.782],!0],["smoothC",[93.782,-122.987,93.782,-174.782],!0],["curveC",[291.064,99.923,249.076,57.936,197.282,57.936],!1],["close","",""]],[["move",[197.5,190.5],!1],["curveC",[-21.263,0,-38.5,-17.236,-38.5,-38.5],!0],["smoothC",[17.237,-38.5,38.5,-38.5],!0],["smoothC",[236,130.736,236,152],!1],["smoothC",[218.763,190.5,197.5,190.5],!1],["close","",""]]],polygons:[],circles:[]},offset:[197.282,57.936]}},stud:{iconCls:"marker-stud",iconId:0,shape:{data:{paths:[[["move",[228.465,61.808],!1],["curveC",[-34.129,-6.2,-74.84,2.725,-67.242,18.748],!0],["curveC",[10.313,21.754,18.316,38.636,24.535,51.754],!0],["curveC",[-13.525,13.08,-32.082,31.028,-57.578,55.687],!0],["curveC",[-15.447,14.94,26.929,42.415,68.291,49.929],!0],["curveC",[41.36,7.514,90.696,-3.301,81.49,-22.719],!0],["curveC",[-15.194,-32.051,-26.254,-55.379,-34.314,-72.38],!0],["curveC",[10.436,-10.093,23.865,-23.081,41.171,-39.818],!0],["curveC",[297.564,90.681,262.596,68.009,228.465,61.808],!1],["close","",""]]],polygons:[[[187.893,328],[201.506,253.198],[182.684,249.229],[168.713,328]]],circles:[]},offset:[178.303,328]}},flag:{iconCls:"marker-flag",iconId:4,shape:{data:{paths:[],polygons:[[[270.732,341],[333.817,76.259],[313.429,76.248],[250.647,341]],[[117.579,76],[144.322,145.722],[85,215],[265.541,215],[298.314,76]]],circles:[]},offset:[260.6895,341]}}},this.templateSymbolDialogContent=jQuery('<div class="pointform"><div class="container"><div class="column1"><label>'+this.loc.symbol.label+"</label>"+'<div class="symbols icon-buttons"></div>'+"<label>"+this.loc.size.label+"</label><br>"+'<div class="sizer-values"></div>'+'<div class="sizer"></div>'+"</div>"+'<div class="column2">'+'<div class="column21">'+"<label>"+this.loc.color.label+"</label>"+'<div class="color-grid">'+'<div class="color-rectangle"></div>'+"</div>"+'<div class="color-label">'+"<label>"+this.loc.color.labelOr+"</label>"+"</div>"+'<div class="color-source-selector">'+"<label>"+this.loc.color.labelCustom+"</label>"+"</div>"+'<div class="custom-colors"></div>'+"</div>"+'<div class="column22">'+"<label>"+this.loc.preview.label+"</label>"+'<div class="preview"></div>'+"</div>"+"</div>"+"</div>"+"</div>"),this.templateSymbolButton=jQuery('<div class="icon-button"></div>'),this.templateColorCell=jQuery('<div class="color-cell"></div>'),this.templateCustomColor=jQuery('<div class="custom-color-editor"><div class="colorcontainer"><div class="colorcolumn1"></div><div class="colorcolumn2"><div class="colorcolumn21"></div><div class="colorcolumn22"></div></div></div>'),this.templateColorSource=jQuery('<input type="checkbox" name="colorInput" value = "custom" class="color-source">'),this.templateColorValue=jQuery('<label class="color-label"></label><br><input type="text" name="color-input" value="0" disabled="disabled" class="custom-color">'),this.templateSizerValue=jQuery('<div class="sizer-value"></div>'),this.previewSize=50},{getValues:function(){return{size:this.values.size,color:this.values.color,shape:this.values.shape}},setValues:function(e){e!==null&&e!==undefined&&jQuery.extend(!0,this.values,e)},showForm:function(e,t){var n=this;t!==null&&t!==undefined&&jQuery.extend(!0,n.values,t.dot);var r=Oskari.clazz.create("Oskari.userinterface.component.Popup");r.addClass("renderdialog"),r.addClass("pointvisualization");var i=n.loc.title,s=n.templateSymbolDialogContent.clone(),o=s.find("div.symbols"),u,a,f;for(u in this.symbolButtons)this.symbolButtons.hasOwnProperty(u)&&(a=this.templateSymbolButton.clone(),f=this.symbolButtons[u],a.addClass(f.iconCls),a.attr("id",f.iconId+"marker"),f.iconId===n.values.shape&&a.css("border","2px solid"),a.click(function(){n.values.shape=parseInt(jQuery(this).attr("id").charAt(0)),n._selectButton(n.values.shape),n._updatePreview(s)}),o.append(a));var l=10,c=110,h=n.maxSize-n.minSize,p=c/h,d=0,v,m,g;o=s.find(".sizer-values");for(v=1;v<=l;v++)m=n.templateSizerValue.clone(),m.html(v),m.addClass("value"+v),v<n.minSize||v>n.maxSize?m.hide():(g=d*p.toString()+"px",m.css("left",g),m.show(),d+=1),o.append(m);o=s.find(".sizer"),o.slider({range:"min",min:n.minSize,max:n.maxSize,value:this.values.size,slide:function(e,t){n.values.size=t.value,n._updatePreview(s)}});var y=!1,b,w,E,S,x;o=s.find(".color-rectangle");for(v=0;v<n.basicColors.length;v++)b=n.templateColorCell.clone(),b.css("background-color",n.basicColors[v]),w="ColorCell",E=v+w,E.length===w.length+1&&(E="0"+E),b.attr("id",E),b.click(function(){if(jQuery(".color-source").prop("checked"))return;S=parseInt(this.id.substring(0,2),10);if(S===n.activeColorCell)return;n.activeColorCell>-1&&(x=n.activeColorCell.toString(),n.activeColorCell<10&&(x="0"+x),jQuery("#"+x+"ColorCell").css("border","1px solid #000000")),n.values.color=n.creator.rgbToHex(this.style.backgroundColor),n.activeColorCell=S,S<10&&(S="0"+S.toString()),jQuery("#"+S+"ColorCell").css("border","3px solid #ffffff"),n._updatePreview(s)}),"#"+n.values.color===n.basicColors[v]&&(b.css("border","3px solid #ffffff"),n.activeColorCell=v,y=!0),o.append(b);o=s.find(".color-source-selector");var T=n.templateColorSource.clone();T.change(function(){jQuery("input.custom-color").prop("disabled",!this.checked);var e=jQuery("#"+n.activeColorCell+"ColorCell");this.checked?e.css("border","1px solid #000000"):e.css("border","3px solid #ffffff"),n._updatePreview(s)}),o.prepend(T),y||(T.checked=!0,o.find("input.color-source").prop("disabled",!1).attr("checked","checked")),o=s.find(".custom-colors");var N=this.templateCustomColor.clone();o.append(N);var C=n.templateColorValue.clone();C.addClass("custom-red-value"),s.find(".colorcolumn1").append(C),s.find("label.custom-red-value").text("R");var k=n.templateColorValue.clone();k.addClass("custom-green-value"),s.find(".colorcolumn21").append(k),s.find("label.custom-green-value").text("G");var L=n.templateColorValue.clone();L.addClass("custom-blue-value"),s.find(".colorcolumn22").append(L),s.find("label.custom-blue-value").text("B");if(!y){var A=n.creator.hexToRgb(n.values.color);s.find("input.custom-color.custom-red-value").val(A.r),s.find("input.custom-color.custom-green-value").val(A.g),s.find("input.custom-color.custom-blue-value").val(A.b),s.find("input.custom-color").prop("disabled",!1)}s.find(".custom-color").change(function(){var e=[],t,r;e[0]=jQuery("input.custom-color.custom-red-value").val(),e[1]=jQuery("input.custom-color.custom-green-value").val(),e[2]=jQuery("input.custom-color.custom-blue-value").val();for(t=0;t<3;t++){r=parseInt(e[t]);if(r<0||r>255)return;e[t]=r.toString(16),e[t].length===1&&(e[t]="0"+e[t])}n.values.color=e.join(""),n._updatePreview()}),this._supportsSVG()&&this._updatePreview(s);var O=Oskari.clazz.create("Oskari.userinterface.component.Button");O.setTitle(n.loc.buttons.save),O.addClass("primary showSelection"),O.setHandler(function(){r.close()});var M=Oskari.clazz.create("Oskari.userinterface.component.Button");return M.setTitle(n.loc.buttons.cancel),M.setHandler(function(){n.values.size=n.defaultValues.size,n.values.color=n.defaultValues.color,n.values.shape=n.defaultValues.shape,r.close()}),r.show(i,s,[O,M]),r.moveTo(e,"top"),r},_selectButton:function(e){var t,n,r;for(t in this.symbolButtons)this.symbolButtons.hasOwnProperty(t)&&(n=this.symbolButtons[t],r=jQuery("div#"+n.iconId+"marker.icon-button"),n.iconId.toString()===e.toString()?r.css("border","2px solid"):r.css("border","1px solid"))},_updatePreview:function(e){var t=this,n=e===undefined||e===null?jQuery(".pointform"):e,r=n.find(".preview"),i=t.values.size/35,s=400,o=s*i,u=.5*(t.previewSize-o),a={fill:"#"+t.values.color},f=[];r.svg("destroy"),r.svg({onLoad:function(e){var n=null,r,s,o,l,c,h,p,d,v,m,g;for(r in t.symbolButtons)if(t.symbolButtons.hasOwnProperty(r)){s=t.symbolButtons[r];if(s.iconId.toString()===t.values.shape.toString()){n=s.shape.data;break}}for(o=0;o<n.polygons.length;o++){f=[];for(l=0;l<n.polygons[o].length;l++){f.push([]);for(c=0;c<2;c++)f[l][c]=i*n.polygons[o][l][c]+u}e.polygon(f,a)}for(o=0;o<n.circles.length;o++)h=i*n.circles[o].cx+u,p=i*n.circles[o].cy+u,d=i*n.circles[o].r,e.circle(h,p,d,a);if(n.paths.length>0){v=e.createPath(),m=v.move(0,0,!1);for(o=0;o<n.paths.length;o++)for(l=0;l<n.paths[o].length;l++){g=n.paths[o][l],f=[];for(c=0;c<g[1].length;c++)f[c]=i*g[1][c],g[2]||(f[c]=f[c]+u);switch(g[0]){case"move":m.move(f[0],f[1],g[2]);break;case"curveC":m.curveC(f[0],f[1],f[2],f[3],f[4],f[5],g[2]);break;case"smoothC":m.smoothC(f[0],f[1],f[2],f[3],g[2]);break;case"close":m.close()}}e.path(m,a)}}})},_getOnScreenForm:function(){return jQuery("div.renderdialog")},_supportsSVG:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}}),define("bundles/framework/bundle/divmanazer/component/visualization-form/PointForm",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.EnhancedTile",function(){},{getName:function(){return"Oskari.userinterface.extension.EnhancedTile"}},{protocol:["Oskari.userinterface.Tile"],extend:["Oskari.userinterface.extension.DefaultTile"]}),define("src/framework/divmanazer/extension/EnhancedTile",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.EnhancedFlyout",function(e,t){this.instance=e,this.locale=t,this.container=null},{getName:function(){return"Oskari.userinterface.extension.DefaultFlyout"},setEl:function(e){this.container=jQuery(e)},getEl:function(){return this.container},startPlugin:function(){},stopPlugin:function(){},getTitle:function(){return this.locale.title},getDescription:function(){return this.locale.description},setState:function(e){this.state=e},getState:function(){return this.state},getLocalization:function(){return this.locale?this.locale:this.instance?this.instance.getLocalization().flyout:undefined},getSandbox:function(){return this.instance.getSandbox()},getExtension:function(){return this.instance},slicer:Array.prototype.slice,issue:function(){var e=arguments[0],t=this.slicer.apply(arguments,[1]),n=this.getSandbox().getRequestBuilder(e),r=n.apply(n,t);return this.getSandbox().request(this.getExtension(),r)},notify:function(){var e=arguments[0],t=this.slicer.apply(arguments,[1]),n=this.getSandbox().getEventBuilder(e),r=n.apply(n,t);return this.getSandbox().notifyAll(r)}},{protocol:["Oskari.userinterface.Flyout"]}),define("src/framework/divmanazer/extension/EnhancedFlyout",function(){}),Oskari.clazz.define("Oskari.userinterface.extension.EnhancedView",function(){},{getName:function(){return"Oskari.userinterface.extension.EnhancedView"}},{protocol:["Oskari.userinterface.View"],extend:["Oskari.userinterface.extension.DefaultView"]}),define("src/framework/divmanazer/extension/EnhancedView",function(){}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/divman.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/accordion.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/tab.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/modal.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/badge.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/alert.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/forminput.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/grid.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/popup.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/button.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/overlay.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/divmanazer/css/popover.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,define("src/framework/divmanazer/module",["oskari","src/framework/divmanazer/extension/EnhancedExtension","jquery","src/framework/oskariui/module","./instance","bundles/framework/bundle/divmanazer/request/AddExtensionRequest","bundles/framework/bundle/divmanazer/request/AddExtensionRequestHandler","bundles/framework/bundle/divmanazer/request/RemoveExtensionRequest","bundles/framework/bundle/divmanazer/request/RemoveExtensionRequestHandler","bundles/framework/bundle/divmanazer/request/UpdateExtensionRequest","bundles/framework/bundle/divmanazer/request/UpdateExtensionRequestHandler","bundles/framework/bundle/divmanazer/request/ModalDialogRequest","bundles/framework/bundle/divmanazer/request/ModalDialogRequestHandler","bundles/framework/bundle/divmanazer/event/ExtensionUpdatedEvent","bundles/framework/bundle/divmanazer/component/Accordion","bundles/framework/bundle/divmanazer/component/AccordionPanel","bundles/framework/bundle/divmanazer/component/TabContainer","bundles/framework/bundle/divmanazer/component/TabDropdownContainer","bundles/framework/bundle/divmanazer/component/TabPanel","bundles/framework/bundle/divmanazer/component/Badge","bundles/framework/bundle/divmanazer/component/Alert","./component/Popup","bundles/framework/bundle/divmanazer/component/Overlay","bundles/framework/bundle/divmanazer/component/Button","bundles/framework/bundle/divmanazer/component/Form","bundles/framework/bundle/divmanazer/component/UIHelper","bundles/framework/bundle/divmanazer/component/FormInput","bundles/framework/bundle/divmanazer/component/Popover","bundles/framework/bundle/divmanazer/component/Grid","bundles/framework/bundle/divmanazer/component/GridModel","bundles/framework/bundle/divmanazer/component/ProgressSpinner","bundles/framework/bundle/divmanazer/extension/DefaultTile","bundles/framework/bundle/divmanazer/extension/DefaultFlyout","bundles/framework/bundle/divmanazer/extension/DefaultExtension","bundles/framework/bundle/divmanazer/extension/DefaultView","bundles/framework/bundle/divmanazer/extension/DefaultLayout","bundles/framework/bundle/divmanazer/component/visualization-form/AreaForm","bundles/framework/bundle/divmanazer/component/visualization-form/LineForm","bundles/framework/bundle/divmanazer/component/visualization-form/PointForm","src/framework/divmanazer/extension/EnhancedTile","src/framework/divmanazer/extension/EnhancedFlyout","src/framework/divmanazer/extension/EnhancedView","css!resources/framework/bundle/divmanazer/css/divman.css","css!resources/framework/bundle/divmanazer/css/accordion.css","css!resources/framework/bundle/divmanazer/css/tab.css","css!resources/framework/bundle/divmanazer/css/modal.css","css!resources/framework/bundle/divmanazer/css/badge.css","css!resources/framework/bundle/divmanazer/css/alert.css","css!resources/framework/bundle/divmanazer/css/forminput.css","css!resources/framework/bundle/divmanazer/css/grid.css","css!resources/framework/bundle/divmanazer/css/popup.css","css!resources/framework/bundle/divmanazer/css/button.css","css!resources/framework/bundle/divmanazer/css/overlay.css","css!resources/framework/bundle/divmanazer/css/popover.css"],function(e,t,n){return e.ui={},this._baseClassFor={extension:"Oskari.userinterface.extension.EnhancedExtension",tile:"Oskari.userinterface.extension.EnhancedTile",flyout:"Oskari.userinterface.extension.EnhancedFlyout",view:"Oskari.userinterface.extension.EnhancedView"},e.ui.Tile=e.cls("Oskari.Tile").extend(this._baseClassFor.tile),e.ui.Flyout=e.cls("Oskari.Flyout").extend(this._baseClassFor.flyout),e.ui.Extension=t,e.ui.View=e.cls("Oskari.View").extend(this._baseClassFor.view),e.bundleCls("divmanazer").category({create:function(){return e.clazz.create("Oskari.userinterface.bundle.ui.UserInterfaceBundleInstance")},update:function(e,t,n,r){}})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer('/*! jQuery UI - v1.9.1 - 2012-11-09\r\n* http://jqueryui.com\r\n* Includes: jquery.ui.core.css, jquery.ui.resizable.css, jquery.ui.selectable.css, jquery.ui.slider.css, jquery.ui.tooltip.css\r\n* To view and modify this theme, visit http://jqueryui.com/themeroller/?ffDefault=Segoe%20UI%2CArial%2Csans-serif&fwDefault=bold&fsDefault=1.1em&cornerRadius=6px&bgColorHeader=333333&bgTextureHeader=12_gloss_wave.png&bgImgOpacityHeader=25&borderColorHeader=333333&fcHeader=ffffff&iconColorHeader=ffffff&bgColorContent=000000&bgTextureContent=05_inset_soft.png&bgImgOpacityContent=25&borderColorContent=666666&fcContent=ffffff&iconColorContent=cccccc&bgColorDefault=555555&bgTextureDefault=02_glass.png&bgImgOpacityDefault=20&borderColorDefault=666666&fcDefault=eeeeee&iconColorDefault=cccccc&bgColorHover=0078a3&bgTextureHover=02_glass.png&bgImgOpacityHover=40&borderColorHover=59b4d4&fcHover=ffffff&iconColorHover=ffffff&bgColorActive=f58400&bgTextureActive=05_inset_soft.png&bgImgOpacityActive=30&borderColorActive=ffaf0f&fcActive=ffffff&iconColorActive=222222&bgColorHighlight=eeeeee&bgTextureHighlight=03_highlight_soft.png&bgImgOpacityHighlight=80&borderColorHighlight=cccccc&fcHighlight=2e7db2&iconColorHighlight=4b8e0b&bgColorError=ffc73d&bgTextureError=02_glass.png&bgImgOpacityError=40&borderColorError=ffb73d&fcError=111111&iconColorError=a83300&bgColorOverlay=5c5c5c&bgTextureOverlay=01_flat.png&bgImgOpacityOverlay=50&opacityOverlay=80&bgColorShadow=cccccc&bgTextureShadow=01_flat.png&bgImgOpacityShadow=30&opacityShadow=60&thicknessShadow=7px&offsetTopShadow=-7px&offsetLeftShadow=-7px&cornerRadiusShadow=8px\r\n* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */\r\n\r\n/* Layout helpers\r\n----------------------------------*/\r\n.oskariui .ui-helper-hidden { display: none; }\r\n.oskariui .ui-helper-hidden-accessible { position: absolute !important; clip: rect(1px,1px,1px,1px); clip: rect(1px,1px,1px,1px); }\r\n.oskariui .ui-helper-reset { margin: 0; padding: 0; border: 0; outline: 0; line-height: 1.3; text-decoration: none; font-size: 100%; list-style: none; }\r\n.oskariui .ui-helper-clearfix:before, .ui-helper-clearfix:after { content: ""; display: table; }\r\n.oskariui .ui-helper-clearfix:after { clear: both; }\r\n.oskariui .ui-helper-clearfix { zoom: 1; }\r\n.oskariui .ui-helper-zfix { width: 100%; height: 100%; top: 0; left: 0; position: absolute; opacity: 0; filter:Alpha(Opacity=0); }\r\n\r\n\r\n/* Interaction Cues\r\n----------------------------------*/\r\n.oskariui .ui-state-disabled { cursor: default !important; }\r\n\r\n\r\n/* Icons\r\n----------------------------------*/\r\n\r\n/* states and images */\r\n.oskariui .ui-icon { display: block; text-indent: -99999px; overflow: hidden; background-repeat: no-repeat; }\r\n\r\n\r\n/* Misc visuals\r\n----------------------------------*/\r\n\r\n/* Overlays */\r\n.oskariui .ui-widget-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }\r\n.oskariui .ui-resizable { position: relative;}\r\n.oskariui .ui-resizable-handle { position: absolute;font-size: 0.1px; display: block; }\r\n.oskariui .ui-resizable-disabled .ui-resizable-handle, .ui-resizable-autohide .ui-resizable-handle { display: none; }\r\n.oskariui .ui-resizable-n { cursor: n-resize; height: 7px; width: 100%; top: -5px; left: 0; }\r\n.oskariui .ui-resizable-s { cursor: s-resize; height: 7px; width: 100%; bottom: -5px; left: 0; }\r\n.oskariui .ui-resizable-e { cursor: e-resize; width: 7px; right: -5px; top: 0; height: 100%; }\r\n.oskariui .ui-resizable-w { cursor: w-resize; width: 7px; left: -5px; top: 0; height: 100%; }\r\n.oskariui .ui-resizable-se { cursor: se-resize; width: 12px; height: 12px; right: 1px; bottom: 1px; }\r\n.oskariui .ui-resizable-sw { cursor: sw-resize; width: 9px; height: 9px; left: -5px; bottom: -5px; }\r\n.oskariui .ui-resizable-nw { cursor: nw-resize; width: 9px; height: 9px; left: -5px; top: -5px; }\r\n.oskariui .ui-resizable-ne { cursor: ne-resize; width: 9px; height: 9px; right: -5px; top: -5px;}.ui-selectable-helper { position: absolute; border:1px dotted black; }\r\n\r\n.oskariui .ui-slider { position: relative; text-align: left; }\r\n.oskariui .ui-slider .ui-slider-handle { position: absolute; width: 16px; height: 17px; cursor: default; }\r\n.oskariui .ui-slider .ui-slider-range { position: absolute; font-size: .7em; display: block; border: 0; background-position: 0 0; }\r\n\r\n.oskariui .ui-slider-horizontal { height: 14px; }\r\n.oskariui .ui-slider-horizontal .ui-slider-handle { background-image: url(\'/Oskari/resources/framework/bundle/oskariui/images/horizontal_handle.png\'); background-repeat: no-repeat;}\r\n\r\n.oskariui .ui-slider-horizontal .ui-slider-range { top: 0; height: 100%; }\r\n.oskariui .ui-slider-horizontal .ui-slider-range-min { left: 0; }\r\n.oskariui .ui-slider-horizontal .ui-slider-range-max { right: 0; }\r\n\r\n.oskariui .ui-slider-vertical { margin-left: 2px; width: 24px; background-image: url(\'/Oskari/resources/framework/bundle/oskariui/images/zoombar_part.png\'); background-repeat: repeat-y; }\r\n.oskariui .ui-slider-vertical .ui-slider-handle { margin-left: 0; background-image: url(\'/Oskari/resources/framework/bundle/oskariui/images/zoombar_cursor.png\'); background-repeat: no-repeat;}\r\n.oskariui .ui-slider-vertical .ui-slider-range { left: 0; width: 100%; }\r\n.oskariui .ui-slider-vertical .ui-slider-range-min { bottom: 0; }\r\n.oskariui .ui-slider-vertical .ui-slider-range-max { top: 0; }.ui-tooltip {\r\n	padding: 8px;\r\n	position: absolute;\r\n	z-index: 9999;\r\n	max-width: 300px;\r\n	-webkit-box-shadow: 0 0 5px #aaa;\r\n	box-shadow: 0 0 5px #aaa;\r\n}\r\n/* Fades and background-images don\'t work well together in IE6, drop the image */\r\n* html .ui-tooltip {\r\n	background-image: none;\r\n}\r\nbody .oskariui .ui-tooltip { border-width: 2px; }\r\n\r\n/* Component containers\r\n----------------------------------*/\r\n.oskariui .ui-widget { font-family: Segoe UI,Arial,sans-serif; font-size: 1.1em; }\r\n.oskariui .ui-widget .ui-widget { font-size: 1em; }\r\n.oskariui .ui-widget input, .oskariui .ui-widget select, .oskariui .ui-widget textarea, .oskariui .ui-widget button { font-family: Segoe UI,Arial,sans-serif; font-size: 1em; }\r\n.oskariui .ui-widget-content {  }\r\n.oskariui .ui-widget-content a {  }\r\n.oskariui .ui-widget-header {  }\r\n.oskariui .ui-widget-header a {  }\r\n\r\n/* Interaction states\r\n----------------------------------*/\r\n.oskariui .ui-state-default, .oskariui .ui-widget-content .ui-state-default, .oskariui .ui-widget-header .ui-state-default {  }\r\n.oskariui .ui-state-default a, .oskariui .ui-state-default a:link, .oskariui .ui-state-default a:visited {  }\r\n.oskariui .ui-state-hover, .oskariui .ui-widget-content .ui-state-hover, .oskariui .ui-widget-header .ui-state-hover, .oskariui .ui-state-focus, .oskariui .ui-widget-content .ui-state-focus, .oskariui .ui-widget-header .ui-state-focus {  }\r\n.oskariui .ui-state-hover a, .oskariui .ui-state-hover a:hover, .oskariui .ui-state-hover a:link, .oskariui .ui-state-hover a:visited { }\r\n.oskariui .ui-state-active, .oskariui .ui-widget-content .ui-state-active, .oskariui .ui-widget-header .ui-state-active {  }\r\n.oskariui .ui-state-active a, .oskariui .ui-state-active a:link, .oskariui .ui-state-active a:visited {  }\r\n\r\n/* Interaction Cues\r\n----------------------------------*/\r\n.oskariui .ui-state-highlight, .oskariui .ui-widget-content .ui-state-highlight, .oskariui .ui-widget-header .ui-state-highlight  { }\r\n.oskariui .ui-state-highlight a, .oskariui .ui-widget-content .ui-state-highlight a,.oskariui .ui-widget-header .ui-state-highlight a { }\r\n.oskariui .ui-state-error, .oskariui .ui-widget-content .ui-state-error, .oskariui .ui-widget-header .ui-state-error { }\r\n.oskariui .ui-state-error a, .oskariui .ui-widget-content .ui-state-error a, .oskariui .ui-widget-header .ui-state-error a { }\r\n.oskariui .ui-state-error-text, .oskariui .ui-widget-content .ui-state-error-text, .oskariui .ui-widget-header .ui-state-error-text {  }\r\n.oskariui .ui-priority-primary, .oskariui .ui-widget-content .ui-priority-primary, .oskariui .ui-widget-header .ui-priority-primary {  }\r\n.oskariui .ui-priority-secondary, .oskariui .ui-widget-content .ui-priority-secondary,  .oskariui .ui-widget-header .ui-priority-secondary { }\r\n.oskariui .ui-state-disabled, .oskariui .ui-widget-content .ui-state-disabled, .oskariui .ui-widget-header .ui-state-disabled {  }\r\n.oskariui .ui-state-disabled .ui-icon { filter:Alpha(Opacity=35); } /* For IE8 - See #6059 */\r\n\r\n/* Icons\r\n----------------------------------*/\r\n\r\n/* states and images */\r\n.oskariui .ui-icon { width: 16px; height: 16px; }\r\n.oskariui .ui-widget-content .ui-icon { }\r\n.oskariui .ui-widget-header .ui-icon { }\r\n.oskariui .ui-state-default .ui-icon {  }\r\n.oskariui .ui-state-hover .ui-icon, .oskariui .ui-state-focus .ui-icon {}\r\n.oskariui .ui-state-active .ui-icon { }\r\n.oskariui .ui-state-highlight .ui-icon { }\r\n.oskariui .ui-state-error .ui-icon, .oskariui .ui-state-error-text .ui-icon { }\r\n\r\n\r\n/* Misc visuals\r\n----------------------------------*/\r\n\r\n/* Corner radius */\r\n.oskariui .ui-corner-all, .oskariui .ui-corner-top, .oskariui .ui-corner-left, .oskariui .ui-corner-tl { -moz-border-radius-topleft: 6px; -webkit-border-top-left-radius: 6px; -khtml-border-top-left-radius: 6px; border-top-left-radius: 6px; }\r\n.oskariui .ui-corner-all, .oskariui .ui-corner-top, .oskariui .ui-corner-right, .oskariui .ui-corner-tr { -moz-border-radius-topright: 6px; -webkit-border-top-right-radius: 6px; -khtml-border-top-right-radius: 6px; border-top-right-radius: 6px; }\r\n.oskariui .ui-corner-all, .oskariui .ui-corner-bottom, .oskariui .ui-corner-left, .oskariui .ui-corner-bl { -moz-border-radius-bottomleft: 6px; -webkit-border-bottom-left-radius: 6px; -khtml-border-bottom-left-radius: 6px; border-bottom-left-radius: 6px; }\r\n.oskariui .ui-corner-all, .oskariui .ui-corner-bottom, .oskariui .ui-corner-right, .oskariui .ui-corner-br { -moz-border-radius-bottomright: 6px; -webkit-border-bottom-right-radius: 6px; -khtml-border-bottom-right-radius: 6px; border-bottom-right-radius: 6px; }\r\n\r\n/* Overlays */\r\n.oskariui .ui-widget-overlay { background: #5c5c5c url(resources/framework/bundle/oskariui/css/images/ui-bg_flat_50_5c5c5c_40x100.png) 50% 50% repeat-x; opacity: .8;filter:Alpha(Opacity=80); }\r\n.oskariui .ui-widget-shadow { margin: -7px 0 0 -7px; padding: 7px; background: #cccccc url(resources/framework/bundle/oskariui/css/images/ui-bg_flat_30_cccccc_40x100.png) 50% 50% repeat-x; opacity: .6;filter:Alpha(Opacity=60); -moz-border-radius: 8px; -khtml-border-radius: 8px; -webkit-border-radius: 8px; border-radius: 8px; }\r\n/*!\r\n * Bootstrap v2.3.1\r\n *\r\n * Copyright 2012 Twitter, Inc\r\n * Licensed under the Apache License v2.0\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Designed and built with all the love in the world @twitter by @mdo and @fat.\r\n */\r\n.oskariui .clearfix {\r\n  *zoom: 1;\r\n}\r\n.oskariui .clearfix:before,\r\n.oskariui .clearfix:after {\r\n  display: table;\r\n  content: "";\r\n  line-height: 0;\r\n}\r\n.oskariui .clearfix:after {\r\n  clear: both;\r\n}\r\n.oskariui .hide-text {\r\n  font: 0/0 a;\r\n  color: transparent;\r\n  text-shadow: none;\r\n  background-color: transparent;\r\n  border: 0;\r\n}\r\n.oskariui .input-block-level {\r\n  display: block;\r\n  width: 100%;\r\n  min-height: 30px;\r\n  -webkit-box-sizing: border-box;\r\n  -moz-box-sizing: border-box;\r\n  box-sizing: border-box;\r\n}\r\n.oskariui .row {\r\n  margin-left: -20px;\r\n  *zoom: 1;\r\n}\r\n.oskariui .row:before,\r\n.oskariui .row:after {\r\n  display: table;\r\n  content: "";\r\n  line-height: 0;\r\n}\r\n.oskariui .row:after {\r\n  clear: both;\r\n}\r\n[class*="span"] {\r\n  float: left;\r\n  min-height: 1px;\r\n  margin-left: 20px;\r\n}\r\n.oskariui .container,\r\n.oskariui .navbar-static-top .container,\r\n.oskariui .navbar-fixed-top .container,\r\n.oskariui .navbar-fixed-bottom .container {\r\n  width: 940px;\r\n}\r\n.oskariui .span12 {\r\n  width: 940px;\r\n}\r\n.oskariui .span11 {\r\n  width: 860px;\r\n}\r\n.oskariui .span10 {\r\n  width: 780px;\r\n}\r\n.oskariui .span9 {\r\n  width: 700px;\r\n}\r\n.oskariui .span8 {\r\n  width: 620px;\r\n}\r\n.oskariui .span7 {\r\n  width: 540px;\r\n}\r\n.oskariui .span6 {\r\n  width: 460px;\r\n}\r\n.oskariui .span5 {\r\n  width: 380px;\r\n}\r\n.oskariui .span4 {\r\n  width: 300px;\r\n}\r\n.oskariui .span3 {\r\n  width: 220px;\r\n}\r\n.oskariui .span2 {\r\n  width: 140px;\r\n}\r\n.oskariui .span1 {\r\n  width: 60px;\r\n}\r\n.oskariui .offset12 {\r\n  margin-left: 980px;\r\n}\r\n.oskariui .offset11 {\r\n  margin-left: 900px;\r\n}\r\n.oskariui .offset10 {\r\n  margin-left: 820px;\r\n}\r\n.oskariui .offset9 {\r\n  margin-left: 740px;\r\n}\r\n.oskariui .offset8 {\r\n  margin-left: 660px;\r\n}\r\n.oskariui .offset7 {\r\n  margin-left: 580px;\r\n}\r\n.oskariui .offset6 {\r\n  margin-left: 500px;\r\n}\r\n.oskariui .offset5 {\r\n  margin-left: 420px;\r\n}\r\n.oskariui .offset4 {\r\n  margin-left: 340px;\r\n}\r\n.oskariui .offset3 {\r\n  margin-left: 260px;\r\n}\r\n.oskariui .offset2 {\r\n  margin-left: 180px;\r\n}\r\n.oskariui .offset1 {\r\n  margin-left: 100px;\r\n}\r\n.oskariui .row-fluid {\r\n  width: 100%;\r\n  *zoom: 1;\r\n}\r\n.oskariui .row-fluid:before,\r\n.oskariui .row-fluid:after {\r\n  display: table;\r\n  content: "";\r\n  line-height: 0;\r\n}\r\n.oskariui .row-fluid:after {\r\n  clear: both;\r\n}\r\n.oskariui .row-fluid [class*="span"] {\r\n  display: block;\r\n  width: 100%;\r\n  min-height: 30px;\r\n  -webkit-box-sizing: border-box;\r\n  -moz-box-sizing: border-box;\r\n  box-sizing: border-box;\r\n  float: left;\r\n  margin-left: 2.127659574468085%;\r\n  *margin-left: 2.074468085106383%;\r\n}\r\n.oskariui .row-fluid [class*="span"]:first-child {\r\n  margin-left: 0;\r\n}\r\n.oskariui .row-fluid .controls-row [class*="span"] + [class*="span"] {\r\n  margin-left: 2.127659574468085%;\r\n}\r\n.oskariui .row-fluid .span12 {\r\n  width: 100%;\r\n  *width: 99.94680851063829%;\r\n}\r\n.oskariui .row-fluid .span11 {\r\n  width: 91.48936170212765%;\r\n  *width: 91.43617021276594%;\r\n}\r\n.oskariui .row-fluid .span10 {\r\n  width: 82.97872340425532%;\r\n  *width: 82.92553191489361%;\r\n}\r\n.oskariui .row-fluid .span9 {\r\n  width: 74.46808510638297%;\r\n  *width: 74.41489361702126%;\r\n}\r\n.oskariui .row-fluid .span8 {\r\n  width: 65.95744680851064%;\r\n  *width: 65.90425531914893%;\r\n}\r\n.oskariui .row-fluid .span7 {\r\n  width: 57.44680851063829%;\r\n  *width: 57.39361702127659%;\r\n}\r\n.oskariui .row-fluid .span6 {\r\n  width: 48.93617021276595%;\r\n  *width: 48.88297872340425%;\r\n}\r\n.oskariui .row-fluid .span5 {\r\n  width: 40.42553191489362%;\r\n  *width: 40.37234042553192%;\r\n}\r\n.oskariui .row-fluid .span4 {\r\n  width: 31.914893617021278%;\r\n  *width: 31.861702127659576%;\r\n}\r\n.oskariui .row-fluid .span3 {\r\n  width: 23.404255319148934%;\r\n  *width: 23.351063829787233%;\r\n}\r\n.oskariui .row-fluid .span2 {\r\n  width: 14.893617021276595%;\r\n  *width: 14.840425531914894%;\r\n}\r\n.oskariui .row-fluid .span1 {\r\n  width: 6.382978723404255%;\r\n  *width: 6.329787234042553%;\r\n}\r\n.oskariui .row-fluid .offset12 {\r\n  margin-left: 104.25531914893617%;\r\n  *margin-left: 104.14893617021275%;\r\n}\r\n.oskariui .row-fluid .offset12:first-child {\r\n  margin-left: 102.12765957446808%;\r\n  *margin-left: 102.02127659574467%;\r\n}\r\n.oskariui .row-fluid .offset11 {\r\n  margin-left: 95.74468085106382%;\r\n  *margin-left: 95.6382978723404%;\r\n}\r\n.oskariui .row-fluid .offset11:first-child {\r\n  margin-left: 93.61702127659574%;\r\n  *margin-left: 93.51063829787232%;\r\n}\r\n.oskariui .row-fluid .offset10 {\r\n  margin-left: 87.23404255319149%;\r\n  *margin-left: 87.12765957446807%;\r\n}\r\n.oskariui .row-fluid .offset10:first-child {\r\n  margin-left: 85.1063829787234%;\r\n  *margin-left: 84.99999999999999%;\r\n}\r\n.oskariui .row-fluid .offset9 {\r\n  margin-left: 78.72340425531914%;\r\n  *margin-left: 78.61702127659572%;\r\n}\r\n.oskariui .row-fluid .offset9:first-child {\r\n  margin-left: 76.59574468085106%;\r\n  *margin-left: 76.48936170212764%;\r\n}\r\n.oskariui .row-fluid .offset8 {\r\n  margin-left: 70.2127659574468%;\r\n  *margin-left: 70.10638297872339%;\r\n}\r\n.oskariui .row-fluid .offset8:first-child {\r\n  margin-left: 68.08510638297872%;\r\n  *margin-left: 67.9787234042553%;\r\n}\r\n.oskariui .row-fluid .offset7 {\r\n  margin-left: 61.70212765957446%;\r\n  *margin-left: 61.59574468085106%;\r\n}\r\n.oskariui .row-fluid .offset7:first-child {\r\n  margin-left: 59.574468085106375%;\r\n  *margin-left: 59.46808510638297%;\r\n}\r\n.oskariui .row-fluid .offset6 {\r\n  margin-left: 53.191489361702125%;\r\n  *margin-left: 53.085106382978715%;\r\n}\r\n.oskariui .row-fluid .offset6:first-child {\r\n  margin-left: 51.063829787234035%;\r\n  *margin-left: 50.95744680851063%;\r\n}\r\n.oskariui .row-fluid .offset5 {\r\n  margin-left: 44.68085106382979%;\r\n  *margin-left: 44.57446808510638%;\r\n}\r\n.oskariui .row-fluid .offset5:first-child {\r\n  margin-left: 42.5531914893617%;\r\n  *margin-left: 42.4468085106383%;\r\n}\r\n.oskariui .row-fluid .offset4 {\r\n  margin-left: 36.170212765957444%;\r\n  *margin-left: 36.06382978723405%;\r\n}\r\n.oskariui .row-fluid .offset4:first-child {\r\n  margin-left: 34.04255319148936%;\r\n  *margin-left: 33.93617021276596%;\r\n}\r\n.oskariui .row-fluid .offset3 {\r\n  margin-left: 27.659574468085104%;\r\n  *margin-left: 27.5531914893617%;\r\n}\r\n.oskariui .row-fluid .offset3:first-child {\r\n  margin-left: 25.53191489361702%;\r\n  *margin-left: 25.425531914893618%;\r\n}\r\n.oskariui .row-fluid .offset2 {\r\n  margin-left: 19.148936170212764%;\r\n  *margin-left: 19.04255319148936%;\r\n}\r\n.oskariui .row-fluid .offset2:first-child {\r\n  margin-left: 17.02127659574468%;\r\n  *margin-left: 16.914893617021278%;\r\n}\r\n.oskariui .row-fluid .offset1 {\r\n  margin-left: 10.638297872340425%;\r\n  *margin-left: 10.53191489361702%;\r\n}\r\n.oskariui .row-fluid .offset1:first-child {\r\n  margin-left: 8.51063829787234%;\r\n  *margin-left: 8.404255319148938%;\r\n}\r\n[class*="span"].hide,\r\n.oskariui .row-fluid [class*="span"].hide {\r\n  display: none;\r\n}\r\n[class*="span"].pull-right,\r\n.oskariui .row-fluid [class*="span"].pull-right {\r\n  float: right;\r\n}\r\n.oskariui .container {\r\n  margin-right: auto;\r\n  margin-left: auto;\r\n  *zoom: 1;\r\n}\r\n.oskariui .container:before,\r\n.oskariui .container:after {\r\n  display: table;\r\n  content: "";\r\n  line-height: 0;\r\n}\r\n.oskariui .container:after {\r\n  clear: both;\r\n}\r\n.oskariui .container-fluid {\r\n  padding-right: 20px;\r\n  padding-left: 20px;\r\n  *zoom: 1;\r\n}\r\n.oskariui .container-fluid:before,\r\n.oskariui .container-fluid:after {\r\n  display: table;\r\n  content: "";\r\n  line-height: 0;\r\n}\r\n.oskariui .container-fluid:after {\r\n  clear: both;\r\n}\r\n/* setup document body so flyouts will not make scrollbars to browser window */\nbody {\n  position: fixed;\n  width: 100%;\n  height: 100%; }\n\n/* flyout toolbar */\n.oskari-flyoutheading {\n  background-color: #ffd400;\n  border-top: 1px solid #ffdf00;\n  border-bottom: 1px solid #ebb819;\n  height: 14px;\n  width: 100%; }\n\n.oskari-flyouttoolbar {\n  height: 57px;\n  width: 100%;\n  background-color: #fdf8d9;\n  border-top: #fdfdfd;\n  border-bottom: #fef2ba; }\n\n.oskari-flyout-title {\n  float: left;\n  margin-left: 20px;\n  margin-top: 12px;\n  height: 20px;\n  display: inline-block; }\n\n.oskari-flyout-title p {\n  margin: 0;\n  padding: 0;\n  font: 16px/20px "Open Sans", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif; }\n\n/** flyout toolbar tools and tool states  */\n.oskari-flyouttools {\n  float: right;\n  margin-right: 25px;\n  height: 16px;\n  display: inline-block;\n  margin-top: 15px; }\n\n.oskari-flyouttool-detach {\n  display: none;\n  /* visualise here if this tool required */ }\n\n.oskari-detached .oskari-flyouttool-detach {\n  display: none; }\n\n.oskari-minimized .oskari-flyouttool-detach {\n  display: none; }\n\n.oskari-flyouttool-attach {\n  /* visualise here if this tool required */\n  display: none; }\n\n.oskari-attached .oskari-flyouttool-attach {\n  display: none; }\n\n.oskari-flyouttool-minimize {\n  /* visualise here if this tool required */\n  display: none; }\n\n.oskari-attached .oskari-flyouttool-minimize {\n  display: none; }\n\n.oskari-minimized .oskari-flyouttool-minimize {\n  display: none; }\n\n.oskari-flyouttool-restore {\n  /* visualise here if this tool required */\n  display: none; }\n\n.oskari-flyouttool-help {\n  /* visualise here if this tool required */\n  display: none; }\n\n.oskari-minimized .oskari-flyouttool-restore {\n  display: inline-block; }\n\n.oskari-minimized .oskari-flyouttool-attach {\n  display: none; }\n\n.oskari-minimized .oskari-flyouttool-detach {\n  display: none; }\n\n.oskari-flyouttool-close {\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  margin-right: 2px;\n  margin-left: auto; }\n\n/* flyout */\n.oskari-flyout {\n  background-color: #fafafa;\n  position: absolute;\n  z-index: 1100;\n  margin: 0px;\n  padding: 0px;\n  border: 1px solid rgba(0, 0, 0, 0.2); }\n\n/* flyout states */\n/*.oskari-minimized {\r\n width: 640px;\r\n height: 64px;\r\n overflow: hidden;\r\n\r\n min-height: 64px;\r\n max-height: 64px;\r\n }*/\n.oskari-closed {\n  display: none; }\n\n.oskari-minimized {\n  display: none; }\n\n.oskari-flyoutcontent {\n  margin: 0;\n  padding: 20px 20px 20px 25px;\n  border: 0;\n  /*overflow: auto;*/ }\n\n/** tile */\n/* tile states */\n.oskari-tile-attached {\n  border-bottom: 1px solid white;\n  background-color: white; }\n\n.oskari-tile-detached {\n  border-top: 1px solid #484846;\n  border-bottom: 1px solid #212121;\n  background-color: white; }\n\n.oskari-tile-minimized {\n  border-top: 1px solid #484846;\n  border-bottom: 1px solid #212121;\n  background-color: #2d2d2d; }\n\n.oskari-tile-closed {\n  border-top: 1px solid #484846;\n  border-bottom: 1px solid #212121;\n  background-color: #2d2d2d; }\n\n.oskari-tile-container {\n  margin: 0; }\n\n.oskari-tile {\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n  height: 31px;\n  width: 153px;\n  border-top: 1px solid #484846;\n  border-bottom: 1px solid #212121;\n  line-height: 24px; }\n  .oskari-tile.disabled {\n    opacity: 0.25;\n    filter: alpha(opacity=25);\n    /* For IE8 and earlier, unquote for libsass bug */\n    cursor: default; }\n\n.oskari-tile-title {\n  display: inline-block;\n  margin: 0;\n  margin-top: 2px;\n  margin-left: 16px;\n  padding: 0;\n  float: left;\n  height: 28px;\n  width: 112px;\n  font-family: Arial, Helvetica;\n  font-weight: bold;\n  font-size: 11px;\n  text-align: left;\n  text-transform: uppercase;\n  /*color: white;*/ }\n\n.oskari-tile-attached .oskari-tile-title {\n  color: #333438; }\n\n.oskari-tile-detached .oskari-tile-title {\n  color: #333438; }\n\n.oskari-tile-minimized .oskari-tile-title {\n  color: white; }\n\n.oskari-tile-closed .oskari-tile-title {\n  color: white; }\n\n.oskari-tile-status {\n  float: right;\n  text-align: center;\n  display: inline-block;\n  font-size: 11px;\n  font-weight: bold;\n  height: 19px !important;\n  line-height: 19px;\n  width: 20px !important;\n  margin: 1px;\n  margin-top: 6px;\n  padding: 1px; }\n\n.oskari-tile-close {\n  display: none; }\n\n.oskariform .oskarifield {\n  padding: 10px; }\n\n/** media queries */\n@media screen {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 640px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 640px; }\n\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 500px;\n    /* overflow: auto; */ } }\n@media screen {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 640px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 640px; }\n\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 500px;\n    /* overflow: auto; */ } }\n@media only screen and (min-width: 400px) and (max-width: 599px) {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 500px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 500px; } }\n@media only screen and (min-width: 600px) and (max-width: 799px) {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 600px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 600px; } }\n@media only screen and (min-width: 800px) and (max-width: 1199px) {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 1000px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 600px; } }\n@media only screen and (min-width: 1200px) and (max-width: 1599px) {\n  .oskari-attached {\n    min-width: 520px;\n    max-width: 600px; }\n\n  .oskari-detached {\n    min-width: 520px;\n    max-width: 600px; } }\n@media only screen and (min-height: 400px) and (max-height: 599px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 300px;\n    /* overflow: auto; */ } }\n@media only screen and (min-height: 600px) and (max-height: 799px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 500px;\n    /* overflow: auto; */ } }\n@media only screen and (min-height: 800px) and (max-height: 999px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 700px;\n    /* overflow: auto; */ } }\n@media only screen and (min-height: 1000px) and (max-height: 1199px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 900px;\n    /* overflow: auto; */ } }\n@media only screen and (min-height: 1200px) and (max-height: 1399px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 1100px;\n    /* overflow: auto; */ } }\n@media only screen and (min-height: 1400px) {\n  .oskari-flyoutcontentcontainer {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    border: 0;\n    overflow: auto;\n    max-height: 1300px;\n    /* overflow: auto; */ } }\n/* IE8 TEMP fixes */\n.oskari-flyoutcontentcontainer_IE_400_599 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 300px;\n  /* overflow: auto; */ }\n\n.oskari-flyoutcontentcontainer_IE_600_799 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 500px;\n  /* overflow: auto; */ }\n\n.oskari-flyoutcontentcontainer_IE_800_999 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 700px;\n  /* overflow: auto; */ }\n\n.oskari-flyoutcontentcontainer_IE_1000_1199 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 900px;\n  /* overflow: auto; */ }\n\n.oskari-flyoutcontentcontainer_IE_1200_1399 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 1100px;\n  /* overflow: auto; */ }\n\n.oskari-flyoutcontentcontainer_IE_1400 {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  border: 0;\n  overflow: auto;\n  max-height: 1300px;\n  /* overflow: auto; */ }\n/* Accordion */\ndiv.accordion div.accordion_panel {\n  background-color: #f3f3f3;\n  border: 1pt solid #c0d0d0;\n  margin: 0;\n  padding: 0; }\n\ndiv.accordion_panel div.header div.headerIcon {\n  display: inline-block;\n  margin-left: 12px;\n  vertical-align: middle; }\n\ndiv.accordion_panel div.header div.headerText {\n  display: inline-block;\n  font-weight: bold;\n  padding: 8px 10px 8px 12px;\n  font: 14pt Arial, sans-serif; }\n\ndiv.accordion div.accordion_panel.open {\n  background-color: #FFFFFF; }\n\ndiv.accordion div.accordion_panel div.content {\n  padding: 5px; }\n\ndiv.accordion div.accordionmsg {\n  padding: 10px; }\n/* "tab" content */\ndiv.oskariTabs div.tabsContent {\n  border-left: 1px solid #999999;\n  border-right: 1px solid #999999;\n  border-top: 0px solid #999999;\n  border-bottom: 1px solid #999999;\n  color: #000000;\n  height: 90%; }\n\ndiv.oskariTabs div.tab-content {\n  padding: 10px; }\n\n/* tab headers */\ndiv.oskariTabs div.tabsHeader {\n  background: url(\'/Oskari/resources/framework/bundle/divmanazer/images/tab_bg.png\') repeat-x scroll center bottom;\n  /* #FFFFFF*/\n  clear: left;\n  float: left;\n  font: 12pt Arial, sans-serif;\n  font-weight: bold;\n  overflow: hidden;\n  padding: 0;\n  width: 100%; }\n\ndiv.oskariTabs div.tabsHeader ul {\n  float: left;\n  list-style: none outside none;\n  margin: 0;\n  padding: 0;\n  text-align: center; }\n\ndiv.oskariTabs div.tabsHeader ul li {\n  display: block;\n  float: left;\n  list-style: none outside none;\n  margin: 10px 0 0;\n  padding: 0;\n  right: 50%; }\n\ndiv.oskariTabs div.tabsHeader ul li a {\n  background: none repeat scroll 0 0 #FFFFFF;\n  border-bottom: 1px solid #999999;\n  color: #3333FF;\n  display: block;\n  float: left;\n  padding: 10px 20px;\n  position: relative;\n  text-decoration: none; }\n\ndiv.oskariTabs div.tabsHeader ul li.active a {\n  border-left: 1px solid #999999;\n  border-right: 1px solid #999999;\n  border-top: 1px solid #999999;\n  border-bottom: 0px solid #999999;\n  color: #000000; }\n\ndiv.oskariTabs div.tabsHeader ul li.fill a {\n  width: 100%; }\n.modaldialog {\n  border: 1px solid #3C3C3C;\n  margin: 0px; }\n\n.modaltitle {\n  margin: 0px;\n  border-bottom: 1px solid #3C3C3C;\n  color: #3C3C3C;\n  padding: 8px 16px 4px 16px; }\n\n.modalmessage {\n  width: 100%;\n  color: #3C3C3C;\n  padding: 8px 16px 8px 16px; }\n\n.modalbuttons {\n  width: 100%;\n  display: inline-block;\n  padding: 0px 16px 4px 16px; }\n\n.modalbutton {\n  margin: 2px;\n  display: inline-block; }\n/*!\r\n * Bootstrap v2.0.3\r\n *\r\n * Copyright 2012 Twitter, Inc\r\n * Licensed under the Apache License v2.0\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Designed and built with all the love in the world @twitter by @mdo and @fat.\r\n */\n.oskari-badge {\n  font-size: 10.998px;\n  font-weight: bold;\n  line-height: 14px;\n  color: #ffffff;\n  vertical-align: baseline;\n  white-space: nowrap;\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);\n  background-color: #999999; }\n\n.oskari-badge {\n  padding: 1px 9px 2px;\n  -webkit-border-radius: 9px;\n  -moz-border-radius: 9px;\n  border-radius: 9px; }\n\na.oskari-badge:hover {\n  color: #ffffff;\n  text-decoration: none;\n  cursor: pointer; }\n\n.oskari-badge-important {\n  background-color: #b94a48; }\n\n.oskari-badge-important[href] {\n  background-color: #953b39; }\n\n.oskari-badge-warning {\n  background-color: #f89406; }\n\n.oskari-badge-warning[href] {\n  background-color: #c67605; }\n\n.oskari-badge-success {\n  background-color: #468847; }\n\n.oskari-badge-success[href] {\n  background-color: #356635; }\n\n.oskari-badge-info {\n  background-color: #3a87ad; }\n\n.oskari-badge-info[href] {\n  background-color: #2d6987; }\n\n.oskari-badge-inverse {\n  background-color: #333333; }\n\n.oskari-badge-inverse[href] {\n  background-color: #1a1a1a; }\n/*!\r\n * Bootstrap v2.0.3\r\n *\r\n * Copyright 2012 Twitter, Inc\r\n * Licensed under the Apache License v2.0\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Designed and built with all the love in the world @twitter by @mdo and @fat.\r\n */\n.oskari-alert {\n  padding-left: 8px;\n  padding-top: 4px;\n  margin: 4px;\n  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\n  background-color: #fcf8e3;\n  border: 1px solid #fbeed5;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  color: #c09853;\n  position: relative;\n  height: 24px; }\n\n.oskari-alert-heading {\n  color: inherit; }\n\n.oskari-alert-icon-close {\n  position: absolute;\n  top: 4px;\n  right: 0px;\n  width: 24px;\n  height: 24px; }\n\n.oskari-alert-success {\n  background-color: #dff0d8;\n  border-color: #d6e9c6;\n  color: #468847; }\n\n.oskari-alert-danger, .oskari-alert-error {\n  background-color: #f2dede;\n  border-color: #eed3d7;\n  color: #b94a48; }\n\n.oskari-alert-info {\n  background-color: #d9edf7;\n  border-color: #bce8f1;\n  color: #3a87ad; }\ndiv.oskarifield div.icon-close {\n  display: inline-block;\n  left: -20px;\n  margin-left: 0px;\n  position: relative;\n  top: 3px; }\nth.asc {\n  background-image: url(\'/Oskari/resources/framework/bundle/divmanazer/images/asc_arrow.png\');\n  background-repeat: no-repeat;\n  background-position: center center; }\n\nth.desc {\n  background-image: url(\'/Oskari/resources/framework/bundle/divmanazer/images/desc_arrow.png\');\n  background-repeat: no-repeat;\n  background-position: center center; }\n\ndiv.column-selector-placeholder {\n  border-style: none;\n  float: left;\n  opacity: 1.0;\n  margin: 0;\n  padding: 0;\n  right: 0;\n  width: 25px;\n  height: 7px;\n  max-width: 25px;\n  max-height: 7px; }\n\ndiv.icon-menu {\n  position: absolute;\n  opacity: 1.0;\n  margin: 0;\n  cursor: pointer;\n  padding: 0;\n  width: 25px;\n  height: 8px;\n  max-width: 25px;\n  max-height: 7px; }\n\ndiv.column-selector {\n  position: absolute;\n  visibility: hidden;\n  background-color: white;\n  margin-top: 7px;\n  margin-right: 50px;\n  padding: 0;\n  border: 1px solid;\n  z-index: 10001; }\n\ndiv.column-selector div.close-selector-button {\n  width: 16px;\n  height: 16px;\n  position: absolute;\n  top: 5px;\n  right: 5px; }\n\ndiv.column-selector ul.column-selector-list {\n  list-style-type: none;\n  padding-right: 30px; }\n\ndiv.column-selector label.column-label {\n  padding-left: 5px; }\ndiv.divmanazerpopup {\n  max-width: 700px;\n  min-width: 200px;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  background-color: white;\n  -moz-background-clip: border;\n  /* Firefox 3.6 */\n  -webkit-background-clip: border;\n  /* Safari 4? Chrome 6? */\n  background-clip: border-box;\n  /* Firefox 4, Safari 5, Opera 10, IE 9 */\n  -moz-background-clip: padding;\n  /* Firefox 3.6 */\n  -webkit-background-clip: padding;\n  /* Safari 4? Chrome 6? */\n  background-clip: padding-box;\n  /* Firefox 4, Safari 5, Opera 10, IE 9 */\n  -moz-background-clip: content;\n  /* Firefox 3.6 */\n  -webkit-background-clip: content;\n  /* Safari 4? Chrome 6? */\n  background-clip: content-box;\n  /* Firefox 4, Safari 5, Opera 10, IE 9 */\n  border: 5px solid rgba(0, 0, 0, 0.2);\n  border-radius: 7px;\n  /*\r\n    box-shadow: 0px 3px 3px rgba(0, 0, 0, 0.80);\r\n    -moz-box-shadow: 0px 3px 3px black;\r\n    -webkit-box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.80);\r\n    */\n  z-index: 9000; }\n\ndiv.divmanazerpopup h3.popupHeader {\n  background-color: #FDF8D9;\n  border-radius: 5px 5px 0 0;\n  font-size: 18px;\n  line-height: 28px;\n  padding: 5px 10px; }\n\ndiv.divmanazerpopup div.content {\n  margin: 10px; }\n\ndiv.divmanazerpopup div.content textarea {\n  resize: none; }\n\ndiv.divmanazerpopup div.content ul {\n  margin: 10px; }\n\ndiv.divmanazerpopup.no_resize div.content textarea {\n  resize: none; }\n\ndiv.divmanazerpopup div.actions {\n  margin: 10px;\n  text-align: center; }\n\ndiv.divmanazerpopup div.actions input {\n  margin: 10px; }\n\n.divmanazerpopup.arrow:after, .divmanazerpopup.arrow:before {\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  /*pointer-events: none; */ }\n\n/* Bottom alignment */\n.divmanazerpopup.bottom:after, .divmanazerpopup.bottom:before {\n  bottom: 100%; }\n\n.divmanazerpopup.bottom:after {\n  border-bottom-color: #FDF8D9;\n  border-width: 5px;\n  margin-left: -5px;\n  left: 50%; }\n\n.divmanazerpopup.bottom:before {\n  border-bottom-color: #000000;\n  border-width: 6px;\n  margin-left: -6px;\n  left: 50%; }\n\n/* top alignment */\n.divmanazerpopup.top:after, .divmanazerpopup.top:before {\n  top: 100%; }\n\n.divmanazerpopup.top:after {\n  border-top-color: #FFFFFF;\n  border-width: 5px;\n  margin-left: -5px;\n  left: 50%; }\n\n.divmanazerpopup.top:before {\n  border-top-color: #000000;\n  border-width: 6px;\n  margin-left: -6px;\n  left: 50%; }\n\n/* left alignment */\n.divmanazerpopup.left:after, .divmanazerpopup.left:before {\n  left: 100%; }\n\n.divmanazerpopup.left:after {\n  border-left-color: #FDF8D9;\n  border-width: 5px;\n  margin-top: -5px;\n  top: 50%; }\n\n.divmanazerpopup.left:before {\n  border-left-color: #000000;\n  border-width: 6px;\n  margin-top: -6px;\n  top: 50%; }\n\n/* right alignment */\n.divmanazerpopup.right:after, .divmanazerpopup.right:before {\n  right: 100%; }\n\n.divmanazerpopup.right:after {\n  border-right-color: #FDF8D9;\n  border-width: 5px;\n  margin-top: -5px;\n  top: 50%; }\n\n.divmanazerpopup.right:before {\n  border-right-color: #000000;\n  border-width: 6px;\n  margin-top: -6px;\n  top: 50%; }\ndiv.oskaributton {\n  display: inline-block;\n  margin: 5px; }\n\ndiv.oskaributton.primary input {\n  color: #3CA9FC; }\ndiv.oskarioverlay {\n  position: absolute;\n  background-color: black;\n  z-index: 8000; }\n\n.transparent {\n  zoom: 1;\n  filter: alpha(opacity=50);\n  /* unquote for libsass bug */\n  opacity: 0.5; }\n/*!\r\n * Bootstrap v2.0.3\r\n *\r\n * Copyright 2012 Twitter, Inc\r\n * Licensed under the Apache License v2.0\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Designed and built with all the love in the world @twitter by @mdo and @fat.\r\n */\n.oskari-tooltip {\n  position: absolute;\n  z-index: 1200;\n  display: block;\n  visibility: visible;\n  padding: 5px;\n  font-size: 11px;\n  opacity: 0;\n  filter: alpha(opacity=0);\n  /* unquote for libsass bug */ }\n\n.oskari-tooltip.in {\n  opacity: 0.8;\n  filter: alpha(opacity=80);\n  /* unquote for libsass bug */ }\n\n.oskari-tooltip.top {\n  margin-top: -2px; }\n\n.oskari-tooltip.right {\n  margin-left: 2px; }\n\n.oskari-tooltip.bottom {\n  margin-top: 2px; }\n\n.oskari-tooltip.left {\n  margin-left: -2px; }\n\n.oskari-tooltip.top .oskari-tooltip-arrow {\n  bottom: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid #000000; }\n\n.oskari-tooltip.left .oskari-tooltip-arrow {\n  top: 50%;\n  right: 0;\n  margin-top: -5px;\n  border-top: 5px solid transparent;\n  border-bottom: 5px solid transparent;\n  border-left: 5px solid #000000; }\n\n.oskari-tooltip.bottom .oskari-tooltip-arrow {\n  top: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-bottom: 5px solid #000000; }\n\n.oskari-tooltip.right .oskari-tooltip-arrow {\n  top: 50%;\n  left: 0;\n  margin-top: -5px;\n  border-top: 5px solid transparent;\n  border-bottom: 5px solid transparent;\n  border-right: 5px solid #000000; }\n\n.oskari-tooltip-inner {\n  max-width: 640px;\n  padding: 3px 8px;\n  color: #ffffff;\n  text-align: center;\n  text-decoration: none;\n  background-color: #000000;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px; }\n\n.oskari-tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0; }\n\n.oskari-popover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 1210;\n  display: none;\n  padding: 5px; }\n\n.oskari-popover.top {\n  margin-top: -5px; }\n\n.oskari-popover.right {\n  margin-left: 5px; }\n\n.oskari-popover.bottom {\n  margin-top: 5px; }\n\n.oskari-popover.left {\n  margin-left: -5px; }\n\n.oskari-popover.top .oskari-arrow {\n  bottom: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid #000000; }\n\n.oskari-popover.right .oskari-arrow {\n  top: 50%;\n  left: 0;\n  margin-top: -5px;\n  border-top: 5px solid transparent;\n  border-bottom: 5px solid transparent;\n  border-right: 5px solid #000000; }\n\n.oskari-popover.bottom .oskari-arrow {\n  top: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-bottom: 5px solid #000000; }\n\n.oskari-popover.left .oskari-arrow {\n  top: 50%;\n  right: 0;\n  margin-top: -5px;\n  border-top: 5px solid transparent;\n  border-bottom: 5px solid transparent;\n  border-left: 5px solid #000000; }\n\n.oskari-popover .oskari-arrow {\n  position: absolute;\n  width: 0;\n  height: 0; }\n\n.oskari-popover-inner {\n  padding: 3px;\n  /*width: 280px;*/\n  overflow: hidden;\n  background: #000000;\n  background: rgba(0, 0, 0, 0.8);\n  -webkit-border-radius: 6px;\n  -moz-border-radius: 6px;\n  border-radius: 6px;\n  -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\n  -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\n  box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3); }\n\n.oskari-popover-title {\n  padding: 9px 15px;\n  line-height: 1;\n  background-color: #f5f5f5;\n  border-bottom: 1px solid #eee;\n  -webkit-border-radius: 3px 3px 0 0;\n  -moz-border-radius: 3px 3px 0 0;\n  border-radius: 3px 3px 0 0; }\n\n.oskari-popover-content {\n  padding: 14px;\n  background-color: #ffffff;\n  -webkit-border-radius: 0 0 3px 3px;\n  -moz-border-radius: 0 0 3px 3px;\n  border-radius: 0 0 3px 3px;\n  -webkit-background-clip: padding-box;\n  -moz-background-clip: padding-box;\n  background-clip: padding-box; }\n\n.oskari-popover-content p, .oskari-popover-content ul, .oskari-popover-content ol {\n  margin-bottom: 0; }\n')}),requirejs.s.contexts._.nextTick=requirejs.nextTick;